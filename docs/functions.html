<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter12 Definition of Functions | Introduction to R</title>
  <meta name="description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter12 Definition of Functions | Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://psicostat.github.io/Introduction2R_EN/images/logo_psicostat.png" />
  <meta property="og:description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="github-repo" content="psicostat/Introduction2R_EN" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter12 Definition of Functions | Introduction to R" />
  
  <meta name="twitter:description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="twitter:image" content="https://psicostat.github.io/Introduction2R_EN/images/logo_psicostat.png" />

<meta name="author" content="by Claudio Zandonella Callegher and Filippo Gambarota (revision and translation into English by Enrico Toffalini), members of Psicostat" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/faviconpsicostat2.ico" type="image/x-icon" />
<link rel="prev" href="third-section.html"/>
<link rel="next" href="conditionals.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="libs/sass4eeb3cd232157e7bc0437cf318a67eab/style.min.css" type="text/css" />
<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/hex_psicostat.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentation of the Book</a></li>
<li class="part"><span><b>Getting Started</b></span></li>
<li class="chapter" data-level="" data-path="section-1---getting-started.html"><a href="section-1---getting-started.html"><i class="fa fa-check"></i>Section 1 - Getting Started</a></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installing R e RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#install-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="install.html"><a href="install.html#r-windows"><i class="fa fa-check"></i><b>1.1.1</b> R Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="install.html"><a href="install.html#r-macos"><i class="fa fa-check"></i><b>1.1.2</b> R MacOS</a></li>
<li class="chapter" data-level="1.1.3" data-path="install.html"><a href="install.html#r-linux"><i class="fa fa-check"></i><b>1.1.3</b> R Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="install.html"><a href="install.html#r-studio-on-linux"><i class="fa fa-check"></i><b>1.2.1</b> R Studio on Linux</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio-gui.html"><a href="rstudio-gui.html"><i class="fa fa-check"></i><b>2</b> RStudio Interface</a></li>
<li class="chapter" data-level="3" data-path="first-commands.html"><a href="first-commands.html"><i class="fa fa-check"></i><b>3</b> First steps in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="first-commands.html"><a href="first-commands.html#math-operators"><i class="fa fa-check"></i><b>3.1</b> Mathematical Operators</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="first-commands.html"><a href="first-commands.html#order-of-operations"><i class="fa fa-check"></i><b>3.1.1</b> Order of Operations</a></li>
<li class="chapter" data-level="" data-path="first-commands.html"><a href="first-commands.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="first-commands.html"><a href="first-commands.html#operators-rel-log"><i class="fa fa-check"></i><b>3.2</b> Relational and Logical Operators</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="first-commands.html"><a href="first-commands.html#relational-operators"><i class="fa fa-check"></i><b>3.2.1</b> Relational Operators</a></li>
<li class="chapter" data-level="3.2.2" data-path="first-commands.html"><a href="first-commands.html#logical-operators"><i class="fa fa-check"></i><b>3.2.2</b> Logical Operators</a></li>
<li class="chapter" data-level="3.2.3" data-path="first-commands.html"><a href="first-commands.html#order-of-evaluation-of-relations"><i class="fa fa-check"></i><b>3.2.3</b> Order of Evaluation of Relations</a></li>
<li class="chapter" data-level="" data-path="first-commands.html"><a href="first-commands.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-functions.html"><a href="objects-functions.html"><i class="fa fa-check"></i><b>4</b> Objects &amp; Functions: Two Inseparable Companions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="objects-functions.html"><a href="objects-functions.html#objects-section"><i class="fa fa-check"></i><b>4.1</b> Objects</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="objects-functions.html"><a href="objects-functions.html#assign"><i class="fa fa-check"></i><b>4.1.1</b> Assigning and Calling an Object</a></li>
<li class="chapter" data-level="4.1.2" data-path="objects-functions.html"><a href="objects-functions.html#objects-names"><i class="fa fa-check"></i><b>4.1.2</b> Object Names</a></li>
<li class="chapter" data-level="4.1.3" data-path="objects-functions.html"><a href="objects-functions.html#data-types-and-data-structures"><i class="fa fa-check"></i><b>4.1.3</b> Data Types and Data Structures</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objects-functions.html"><a href="objects-functions.html#functions-def"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="objects-functions.html"><a href="objects-functions.html#function-arguments"><i class="fa fa-check"></i><b>4.2.1</b> Function Arguments</a></li>
<li class="chapter" data-level="4.2.2" data-path="objects-functions.html"><a href="objects-functions.html#help"><i class="fa fa-check"></i><b>4.2.2</b> Help! I need Somebody…Help!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-environment.html"><a href="working-environment.html"><i class="fa fa-check"></i><b>5</b> Working Environment</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-environment.html"><a href="working-environment.html#environment"><i class="fa fa-check"></i><b>5.1</b> Environment</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="working-environment.html"><a href="working-environment.html#adding-objects-to-the-environment"><i class="fa fa-check"></i><b>5.1.1</b> Adding Objects to the Environment</a></li>
<li class="chapter" data-level="5.1.2" data-path="working-environment.html"><a href="working-environment.html#removing-objects-from-the-environment"><i class="fa fa-check"></i><b>5.1.2</b> Removing Objects from the Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="working-environment.html"><a href="working-environment.html#working-directory"><i class="fa fa-check"></i><b>5.2</b> Working Directory</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="working-environment.html"><a href="working-environment.html#computer-organization"><i class="fa fa-check"></i><b>5.2.1</b> Computer Organization</a></li>
<li class="chapter" data-level="5.2.2" data-path="working-environment.html"><a href="working-environment.html#absolute-path-and-relative-path"><i class="fa fa-check"></i><b>5.2.2</b> Absolute Path and Relative Path</a></li>
<li class="chapter" data-level="5.2.3" data-path="working-environment.html"><a href="working-environment.html#working-directory-in-r"><i class="fa fa-check"></i><b>5.2.3</b> Working Directory in R</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="working-environment.html"><a href="working-environment.html#packages"><i class="fa fa-check"></i><b>5.3</b> R-packages</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="working-environment.html"><a href="working-environment.html#install.packages"><i class="fa fa-check"></i><b>5.3.1</b> install.packages()</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-environment.html"><a href="working-environment.html#library"><i class="fa fa-check"></i><b>5.3.2</b> library()</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-environment.html"><a href="working-environment.html#updating-and-removing-packages"><i class="fa fa-check"></i><b>5.3.3</b> Updating and Removing Packages</a></li>
<li class="chapter" data-level="5.3.4" data-path="working-environment.html"><a href="working-environment.html#package-documentation"><i class="fa fa-check"></i><b>5.3.4</b> Package Documentation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-session.html"><a href="working-session.html"><i class="fa fa-check"></i><b>6</b> Working Session</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-session.html"><a href="working-session.html#organizing-scripts"><i class="fa fa-check"></i><b>6.1</b> Organizing Scripts</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="working-session.html"><a href="working-session.html#creating-sections"><i class="fa fa-check"></i><b>6.1.1</b> Creating Sections</a></li>
<li class="chapter" data-level="6.1.2" data-path="working-session.html"><a href="working-session.html#sintax"><i class="fa fa-check"></i><b>6.1.2</b> Syntax</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="working-session.html"><a href="working-session.html#organizing-projects"><i class="fa fa-check"></i><b>6.2</b> Organizing Projects</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="working-session.html"><a href="working-session.html#rstudio-projects"><i class="fa fa-check"></i><b>6.2.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="working-session.html"><a href="working-session.html#messages-warnings-e-errors"><i class="fa fa-check"></i><b>6.3</b> Messages, Warnings e Errors</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="working-session.html"><a href="working-session.html#resolving-errors"><i class="fa fa-check"></i><b>6.3.1</b> Resolving Errors</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Data Structures</b></span></li>
<li class="chapter" data-level="" data-path="second-section.html"><a href="second-section.html"><i class="fa fa-check"></i>Section 2 - Data Structures</a></li>
<li class="chapter" data-level="7" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>7</b> Vectors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vector.html"><a href="vector.html#creation"><i class="fa fa-check"></i><b>7.1</b> Creation</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="vector.html"><a href="vector.html#vector-selection"><i class="fa fa-check"></i><b>7.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="vector.html"><a href="vector.html#vector-selection-advanced"><i class="fa fa-check"></i><b>7.2.1</b> Advanced Uses of Selection</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vector.html"><a href="vector.html#vector-functions"><i class="fa fa-check"></i><b>7.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-4"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="vector.html"><a href="vector.html#data-type"><i class="fa fa-check"></i><b>7.4</b> Data Types</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="vector.html"><a href="vector.html#character"><i class="fa fa-check"></i><b>7.4.1</b> Character</a></li>
<li class="chapter" data-level="7.4.2" data-path="vector.html"><a href="vector.html#numeric"><i class="fa fa-check"></i><b>7.4.2</b> Numeric</a></li>
<li class="chapter" data-level="7.4.3" data-path="vector.html"><a href="vector.html#integer"><i class="fa fa-check"></i><b>7.4.3</b> Integer</a></li>
<li class="chapter" data-level="7.4.4" data-path="vector.html"><a href="vector.html#logical-vector"><i class="fa fa-check"></i><b>7.4.4</b> Logical</a></li>
<li class="chapter" data-level="7.4.5" data-path="vector.html"><a href="vector.html#special-values"><i class="fa fa-check"></i><b>7.4.5</b> Special Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>8</b> Factors</a>
<ul>
<li class="chapter" data-level="8.1" data-path="factor.html"><a href="factor.html#attributes"><i class="fa fa-check"></i><b>8.1</b> Object Attributes</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="factor.html"><a href="factor.html#attributes-of-a-vector"><i class="fa fa-check"></i><b>8.1.1</b> Attributes of a Vector</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="factor.html"><a href="factor.html#factors"><i class="fa fa-check"></i><b>8.2</b> Factors</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="factor.html"><a href="factor.html#factor-structure"><i class="fa fa-check"></i><b>8.2.1</b> Factor Structure</a></li>
<li class="chapter" data-level="8.2.2" data-path="factor.html"><a href="factor.html#factor-operations"><i class="fa fa-check"></i><b>8.2.2</b> Factor Operations</a></li>
<li class="chapter" data-level="8.2.3" data-path="factor.html"><a href="factor.html#ordinal-factors"><i class="fa fa-check"></i><b>8.2.3</b> Ordinal Factors</a></li>
<li class="chapter" data-level="" data-path="factor.html"><a href="factor.html#exercises-5"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>9</b> Matrices</a>
<ul>
<li class="chapter" data-level="9.1" data-path="matrix.html"><a href="matrix.html#creation-1"><i class="fa fa-check"></i><b>9.1</b> Creation</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="matrix.html"><a href="matrix.html#matrix-types"><i class="fa fa-check"></i><b>9.1.1</b> Matrix types</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-6"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="matrix.html"><a href="matrix.html#sel-matrix"><i class="fa fa-check"></i><b>9.2</b> Element Selection</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="matrix.html"><a href="matrix.html#matrix-selection-advanced"><i class="fa fa-check"></i><b>9.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-7"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="matrix.html"><a href="matrix.html#functions-and-operations"><i class="fa fa-check"></i><b>9.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="matrix.html"><a href="matrix.html#mat-prop"><i class="fa fa-check"></i><b>9.3.1</b> Attributes of a Matrix</a></li>
<li class="chapter" data-level="9.3.2" data-path="matrix.html"><a href="matrix.html#matrix-bind"><i class="fa fa-check"></i><b>9.3.2</b> Combining Matrices</a></li>
<li class="chapter" data-level="9.3.3" data-path="matrix.html"><a href="matrix.html#mathematical-operators"><i class="fa fa-check"></i><b>9.3.3</b> Mathematical Operators</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="matrix.html"><a href="matrix.html#arrays"><i class="fa fa-check"></i><b>9.4</b> Arrays</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>10</b> Dataframe</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dataframe.html"><a href="dataframe.html#creating-a-dataframe"><i class="fa fa-check"></i><b>10.1</b> Creating a dataframe</a>
<ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-9"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dataframe.html"><a href="dataframe.html#sel-df"><i class="fa fa-check"></i><b>10.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="dataframe.html"><a href="dataframe.html#advanced-selection-uses"><i class="fa fa-check"></i><b>10.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-10"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dataframe.html"><a href="dataframe.html#functions-and-operations-1"><i class="fa fa-check"></i><b>10.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dataframe.html"><a href="dataframe.html#attributes-of-a-dataframe"><i class="fa fa-check"></i><b>10.3.1</b> Attributes of a Dataframe</a></li>
<li class="chapter" data-level="10.3.2" data-path="dataframe.html"><a href="dataframe.html#merging-dataframes"><i class="fa fa-check"></i><b>10.3.2</b> Merging Dataframes</a></li>
<li class="chapter" data-level="10.3.3" data-path="dataframe.html"><a href="dataframe.html#dataframe-information"><i class="fa fa-check"></i><b>10.3.3</b> Dataframe Information</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-11"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="list.html"><a href="list.html"><i class="fa fa-check"></i><b>11</b> Lists</a>
<ul>
<li class="chapter" data-level="11.1" data-path="list.html"><a href="list.html#creating-lists"><i class="fa fa-check"></i><b>11.1</b> Creating Lists</a>
<ul>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#exercises-12"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="list.html"><a href="list.html#selecting-elements"><i class="fa fa-check"></i><b>11.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="list.html"><a href="list.html#advanced-selection-uses-1"><i class="fa fa-check"></i><b>11.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#exercises-13"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="list.html"><a href="list.html#functions-and-operations-2"><i class="fa fa-check"></i><b>11.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="list.html"><a href="list.html#attributes-of-a-list"><i class="fa fa-check"></i><b>11.3.1</b> Attributes of a List</a></li>
<li class="chapter" data-level="11.3.2" data-path="list.html"><a href="list.html#merging-lists"><i class="fa fa-check"></i><b>11.3.2</b> Merging Lists</a></li>
<li class="chapter" data-level="11.3.3" data-path="list.html"><a href="list.html#list-information"><i class="fa fa-check"></i><b>11.3.3</b> List Information</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="list.html"><a href="list.html#nested-structure"><i class="fa fa-check"></i><b>11.4</b> Nested Structure</a></li>
</ul></li>
<li class="part"><span><b>Algorithms</b></span></li>
<li class="chapter" data-level="" data-path="third-section.html"><a href="third-section.html"><i class="fa fa-check"></i>Section 3 - Algorithms</a></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> Definition of Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#creating-a-function"><i class="fa fa-check"></i><b>12.1</b> Creating a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="functions.html"><a href="functions.html#defining-inputs-and-outputs"><i class="fa fa-check"></i><b>12.1.1</b> Defining Inputs and Outputs</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercises-14"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#working-with-functions"><i class="fa fa-check"></i><b>12.2</b> Working with Functions</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#function-environment"><i class="fa fa-check"></i><b>12.3</b> Function Environment</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#best-practices"><i class="fa fa-check"></i><b>12.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="functions.html"><a href="functions.html#when-is-a-function-necessary"><i class="fa fa-check"></i><b>12.4.1</b> When is a Function Necessary?</a></li>
<li class="chapter" data-level="12.4.2" data-path="functions.html"><a href="functions.html#choosing-the-name-of-a-function"><i class="fa fa-check"></i><b>12.4.2</b> Choosing the Name of a Function</a></li>
<li class="chapter" data-level="12.4.3" data-path="functions.html"><a href="functions.html#simplifying-the-number-of-operations-and-outputs"><i class="fa fa-check"></i><b>12.4.3</b> Simplifying the Number of Operations and Outputs</a></li>
<li class="chapter" data-level="12.4.4" data-path="functions.html"><a href="functions.html#commenting-and-documenting"><i class="fa fa-check"></i><b>12.4.4</b> Commenting and Documenting</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="functions.html"><a href="functions.html#importing-a-function"><i class="fa fa-check"></i><b>12.5</b> Importing a Function</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="conditionals.html"><a href="conditionals.html"><i class="fa fa-check"></i><b>13</b> Conditional Programming</a>
<ul>
<li class="chapter" data-level="13.1" data-path="conditionals.html"><a href="conditionals.html#conditional-structures"><i class="fa fa-check"></i><b>13.1</b> Conditional Structures</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="conditionals.html"><a href="conditionals.html#if"><i class="fa fa-check"></i><b>13.1.1</b> if</a></li>
<li class="chapter" data-level="13.1.2" data-path="conditionals.html"><a href="conditionals.html#ifelse"><i class="fa fa-check"></i><b>13.1.2</b> if…else</a></li>
<li class="chapter" data-level="13.1.3" data-path="conditionals.html"><a href="conditionals.html#nested"><i class="fa fa-check"></i><b>13.1.3</b> Nested</a></li>
<li class="chapter" data-level="" data-path="conditionals.html"><a href="conditionals.html#exercises-15"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="conditionals.html"><a href="conditionals.html#other-conditional-operators"><i class="fa fa-check"></i><b>13.2</b> Other Conditional Operators</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="conditionals.html"><a href="conditionals.html#switch"><i class="fa fa-check"></i><b>13.2.1</b> switch</a></li>
<li class="chapter" data-level="13.2.2" data-path="conditionals.html"><a href="conditionals.html#ifelse-1"><i class="fa fa-check"></i><b>13.2.2</b> ifelse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="loop.html"><a href="loop.html"><i class="fa fa-check"></i><b>14</b> Iterative Programming</a>
<ul>
<li class="chapter" data-level="14.1" data-path="loop.html"><a href="loop.html#loops"><i class="fa fa-check"></i><b>14.1</b> Loops</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="loop.html"><a href="loop.html#for"><i class="fa fa-check"></i><b>14.1.1</b> For</a></li>
<li class="chapter" data-level="14.1.2" data-path="loop.html"><a href="loop.html#while"><i class="fa fa-check"></i><b>14.1.2</b> While</a></li>
<li class="chapter" data-level="14.1.3" data-path="loop.html"><a href="loop.html#next-and-break"><i class="fa fa-check"></i><b>14.1.3</b> Next and Break</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="loop.html"><a href="loop.html#nested-loops"><i class="fa fa-check"></i><b>14.2</b> Nested Loops</a>
<ul>
<li class="chapter" data-level="" data-path="loop.html"><a href="loop.html#exercises-16"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="loop.html"><a href="loop.html#apply-family"><i class="fa fa-check"></i><b>14.3</b> Apply Family</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="loop.html"><a href="loop.html#which-functions-to-apply"><i class="fa fa-check"></i><b>14.3.1</b> Which Functions to Apply?</a></li>
<li class="chapter" data-level="14.3.2" data-path="loop.html"><a href="loop.html#apply"><i class="fa fa-check"></i><b>14.3.2</b> apply</a></li>
<li class="chapter" data-level="14.3.3" data-path="loop.html"><a href="loop.html#tapply"><i class="fa fa-check"></i><b>14.3.3</b> tapply</a></li>
<li class="chapter" data-level="14.3.4" data-path="loop.html"><a href="loop.html#lapply"><i class="fa fa-check"></i><b>14.3.4</b> lapply</a></li>
<li class="chapter" data-level="14.3.5" data-path="loop.html"><a href="loop.html#sapply"><i class="fa fa-check"></i><b>14.3.5</b> sapply</a></li>
<li class="chapter" data-level="14.3.6" data-path="loop.html"><a href="loop.html#vapply"><i class="fa fa-check"></i><b>14.3.6</b> vapply</a></li>
<li class="chapter" data-level="14.3.7" data-path="loop.html"><a href="loop.html#list-of-functions-applied-to-a-list-of-objects"><i class="fa fa-check"></i><b>14.3.7</b> List of Functions Applied to a List of Objects</a></li>
<li class="chapter" data-level="14.3.8" data-path="loop.html"><a href="loop.html#mapply"><i class="fa fa-check"></i><b>14.3.8</b> mapply</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="loop.html"><a href="loop.html#replicate"><i class="fa fa-check"></i><b>14.4</b> Replicate</a></li>
</ul></li>
<li class="part"><span><b>Advanced Topics</b></span></li>
<li class="chapter" data-level="" data-path="fourth-section.html"><a href="fourth-section.html"><i class="fa fa-check"></i>Section 4 - Advanced Topics</a></li>
<li class="chapter" data-level="15" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>15</b> Strings</a>
<ul>
<li class="chapter" data-level="15.1" data-path="strings.html"><a href="strings.html#comparing-strings"><i class="fa fa-check"></i><b>15.1</b> Comparing Strings</a></li>
<li class="chapter" data-level="15.2" data-path="strings.html"><a href="strings.html#constructing-strings"><i class="fa fa-check"></i><b>15.2</b> Constructing Strings</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="strings.html"><a href="strings.html#tolower-and-toupper"><i class="fa fa-check"></i><b>15.2.1</b> <code>tolower()</code> and <code>toupper()</code></a></li>
<li class="chapter" data-level="15.2.2" data-path="strings.html"><a href="strings.html#paste-and-paste0"><i class="fa fa-check"></i><b>15.2.2</b> <code>paste()</code> and <code>paste0()</code></a></li>
<li class="chapter" data-level="15.2.3" data-path="strings.html"><a href="strings.html#sprinf"><i class="fa fa-check"></i><b>15.2.3</b> <code>sprinf()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings.html"><a href="strings.html#indexing-strings"><i class="fa fa-check"></i><b>15.3</b> Indexing Strings</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="strings.html"><a href="strings.html#nchar"><i class="fa fa-check"></i><b>15.3.1</b> <code>nchar()</code></a></li>
<li class="chapter" data-level="15.3.2" data-path="strings.html"><a href="strings.html#gregexpr-and-regexpr"><i class="fa fa-check"></i><b>15.3.2</b> <code>gregexpr()</code> and <code>regexpr()</code></a></li>
<li class="chapter" data-level="15.3.3" data-path="strings.html"><a href="strings.html#substr-and-substring"><i class="fa fa-check"></i><b>15.3.3</b> <code>substr()</code> and <code>substring()</code></a></li>
<li class="chapter" data-level="15.3.4" data-path="strings.html"><a href="strings.html#startwith-and-endswith"><i class="fa fa-check"></i><b>15.3.4</b> <code>startWith()</code> and <code>endsWith()</code></a></li>
<li class="chapter" data-level="15.3.5" data-path="strings.html"><a href="strings.html#grep-and-grepl"><i class="fa fa-check"></i><b>15.3.5</b> <code>grep()</code> and <code>grepl()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings.html"><a href="strings.html#manipulating-strings"><i class="fa fa-check"></i><b>15.4</b> Manipulating Strings</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="strings.html"><a href="strings.html#gsub-and-sub"><i class="fa fa-check"></i><b>15.4.1</b> <code>gsub()</code> and <code>sub()</code></a></li>
<li class="chapter" data-level="15.4.2" data-path="strings.html"><a href="strings.html#strsplit"><i class="fa fa-check"></i><b>15.4.2</b> <code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="strings.html"><a href="strings.html#regular-expression-regex"><i class="fa fa-check"></i><b>15.5</b> Regular Expression (REGEX)</a></li>
<li class="chapter" data-level="15.6" data-path="strings.html"><a href="strings.html#further-reading"><i class="fa fa-check"></i><b>15.6</b> Further Reading</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="strings.html"><a href="strings.html#useful-resources"><i class="fa fa-check"></i><b>15.6.1</b> Useful Resources</a></li>
<li class="chapter" data-level="15.6.2" data-path="strings.html"><a href="strings.html#other-useful-functions"><i class="fa fa-check"></i><b>15.6.2</b> Other Useful Functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size: 2.5em">Introduction to R</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <script src="assets/hideOutput.js"></script>
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="functions" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter12</span> Definition of Functions<a href="functions.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In Chapter <a href="objects-functions.html#functions-def">4.2</a>, we introduced the concept of functions and saw how they are used to manipulate objects in R and perform numerous tasks. In Chapter <a href="working-environment.html#packages">5.3</a>, we also saw how packages can be used to access new functions, thus greatly extending the possible applications of R. However, in R, it is also possible to define your own functions to perform specific tasks according to your own needs.</p>
<p>This is one of the main advantages of using a programming language, i.e., being able to develop custom functions according to your needs and not being limited to predefined ones. In this chapter, we will describe how to create your own functions in R.</p>
<div id="creating-a-function" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Creating a Function<a href="functions.html#creating-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The command used to create a function in R is <code>function()</code> followed by curly brackets <code>{ }</code> within which the function body must be specified:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="functions.html#cb252-1" tabindex="-1"></a>function_name <span class="ot">=</span> <span class="cf">function</span>( ){</span>
<span id="cb252-2"><a href="functions.html#cb252-2" tabindex="-1"></a>  <span class="sc">&lt;</span><span class="cf">function</span><span class="sc">-</span>body<span class="sc">&gt;</span></span>
<span id="cb252-3"><a href="functions.html#cb252-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Note that it is necessary to assign the function to an object, for example <code>my_function</code>, which will become the name of our function. To execute the function, simply, as with any other function, specify the function name followed by parentheses, in our case <code>my_function()</code>. Let’s look at some examples of simple functions:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="functions.html#cb253-1" tabindex="-1"></a><span class="co"># Define the function</span></span>
<span id="cb253-2"><a href="functions.html#cb253-2" tabindex="-1"></a>my_greetings <span class="ot">=</span> <span class="cf">function</span>(){</span>
<span id="cb253-3"><a href="functions.html#cb253-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello World!&quot;</span>)</span>
<span id="cb253-4"><a href="functions.html#cb253-4" tabindex="-1"></a>}</span>
<span id="cb253-5"><a href="functions.html#cb253-5" tabindex="-1"></a></span>
<span id="cb253-6"><a href="functions.html#cb253-6" tabindex="-1"></a><span class="fu">my_greetings</span>()</span>
<span id="cb253-7"><a href="functions.html#cb253-7" tabindex="-1"></a><span class="do">## [1] &quot;Hello World!&quot;</span></span>
<span id="cb253-8"><a href="functions.html#cb253-8" tabindex="-1"></a></span>
<span id="cb253-9"><a href="functions.html#cb253-9" tabindex="-1"></a><span class="co"># Define another function</span></span>
<span id="cb253-10"><a href="functions.html#cb253-10" tabindex="-1"></a>my_sum <span class="ot">=</span> <span class="cf">function</span>(){</span>
<span id="cb253-11"><a href="functions.html#cb253-11" tabindex="-1"></a>  x <span class="ot">=</span> <span class="dv">7</span></span>
<span id="cb253-12"><a href="functions.html#cb253-12" tabindex="-1"></a>  y <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb253-13"><a href="functions.html#cb253-13" tabindex="-1"></a>  x <span class="sc">+</span> y</span>
<span id="cb253-14"><a href="functions.html#cb253-14" tabindex="-1"></a>}</span>
<span id="cb253-15"><a href="functions.html#cb253-15" tabindex="-1"></a></span>
<span id="cb253-16"><a href="functions.html#cb253-16" tabindex="-1"></a><span class="fu">my_sum</span>()</span>
<span id="cb253-17"><a href="functions.html#cb253-17" tabindex="-1"></a><span class="do">## [1] 10</span></span></code></pre></div>
<p>When we call our function, R will execute the function body and return the result of the last command executed. However, the functions in the previous example prove to be of little use since they always perform the same operations without allowing us to specify the function inputs. Furthermore, even though they are very simple functions, it might not be clear what output is actually returned by the function.</p>
<p>:::{design title=“Function Names” data-latex=“[Function Names]”}
When defining the name of a function, it’s useful to follow the same guidelines regarding object names (see Chapter <a href="objects-functions.html#objects-names">4.1.2</a>). In this case, to ensure the name is <strong>self-descriptive</strong>, it’s common to use verbs that summarize the action performed by the function.
:::</p>
<div id="defining-inputs-and-outputs" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Defining Inputs and Outputs<a href="functions.html#defining-inputs-and-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Remember that, in general, functions receive objects as inputs, perform specific actions, and return new objects as outputs. Input and output are therefore two fundamental aspects of every function that require special attention.</p>
<ul>
<li><strong>Input</strong> - We have also seen that in R, inputs are specified through the <strong>arguments</strong> of a function (see Chapter <a href="objects-functions.html#function-arguments">4.2.1</a>). To define the arguments of a function, these must be indicated inside the parentheses when creating the function.</li>
<li><strong>Output</strong> - To specify the output of a function, the <code>return()</code> function is used, indicating between the parentheses the name of the object you wish to return as the result of the function.</li>
</ul>
<p>The definition of a function with all its elements will follow the following pattern:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="functions.html#cb254-1" tabindex="-1"></a>function_name <span class="ot">=</span> <span class="cf">function</span>(argument_1, argument_2, ...){</span>
<span id="cb254-2"><a href="functions.html#cb254-2" tabindex="-1"></a>  <span class="sc">&lt;</span><span class="cf">function</span><span class="sc">-</span>body<span class="sc">&gt;</span></span>
<span id="cb254-3"><a href="functions.html#cb254-3" tabindex="-1"></a>  <span class="fu">return</span>(<span class="sc">&lt;</span>output<span class="sc">-</span>name<span class="sc">&gt;</span>)</span>
<span id="cb254-4"><a href="functions.html#cb254-4" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, we can rewrite the previous functions, allowing the inputs to be customized and highlighting what the returned output is.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="functions.html#cb255-1" tabindex="-1"></a><span class="co"># Redefine my_greetings()</span></span>
<span id="cb255-2"><a href="functions.html#cb255-2" tabindex="-1"></a>my_greetings <span class="ot">=</span> <span class="cf">function</span>(name){</span>
<span id="cb255-3"><a href="functions.html#cb255-3" tabindex="-1"></a>  greetings <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;Hello &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb255-4"><a href="functions.html#cb255-4" tabindex="-1"></a>  <span class="fu">return</span>(greetings)</span>
<span id="cb255-5"><a href="functions.html#cb255-5" tabindex="-1"></a>}</span>
<span id="cb255-6"><a href="functions.html#cb255-6" tabindex="-1"></a></span>
<span id="cb255-7"><a href="functions.html#cb255-7" tabindex="-1"></a><span class="fu">my_greetings</span>(<span class="at">name =</span> <span class="st">&quot;Psicostat&quot;</span>)</span>
<span id="cb255-8"><a href="functions.html#cb255-8" tabindex="-1"></a><span class="do">## [1] &quot;Hello Psicostat!&quot;</span></span>
<span id="cb255-9"><a href="functions.html#cb255-9" tabindex="-1"></a></span>
<span id="cb255-10"><a href="functions.html#cb255-10" tabindex="-1"></a><span class="co"># Redefine my_sum()</span></span>
<span id="cb255-11"><a href="functions.html#cb255-11" tabindex="-1"></a>my_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb255-12"><a href="functions.html#cb255-12" tabindex="-1"></a>  result <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb255-13"><a href="functions.html#cb255-13" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb255-14"><a href="functions.html#cb255-14" tabindex="-1"></a>}</span>
<span id="cb255-15"><a href="functions.html#cb255-15" tabindex="-1"></a></span>
<span id="cb255-16"><a href="functions.html#cb255-16" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="at">x =</span> <span class="dv">8</span>, <span class="at">y =</span> <span class="dv">6</span>)</span>
<span id="cb255-17"><a href="functions.html#cb255-17" tabindex="-1"></a><span class="do">## [1] 14</span></span></code></pre></div>
<div class="design" title="User Input">
<p>If necessary, you can make the function itself ask the user to input specific information through the <code>readline()</code> function.</p>
<p>Using the <code>readline()</code> function, a message set in the <code>prompt</code> argument will appear in the console (remember to leave a space at the end). The user will be prompted to type an alphanumeric sequence and then press <em>enter</em>. The values entered by the user will be saved as a character variable in the object we specify and can be used later in the function.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="functions.html#cb256-1" tabindex="-1"></a>happy_birthday <span class="ot">=</span> <span class="cf">function</span>(){</span>
<span id="cb256-2"><a href="functions.html#cb256-2" tabindex="-1"></a>  name <span class="ot">=</span> <span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">&quot;Enter your name: &quot;</span>)</span>
<span id="cb256-3"><a href="functions.html#cb256-3" tabindex="-1"></a>  message <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;Happy Birthday &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb256-4"><a href="functions.html#cb256-4" tabindex="-1"></a>  <span class="fu">return</span>(message)</span>
<span id="cb256-5"><a href="functions.html#cb256-5" tabindex="-1"></a>}</span>
<span id="cb256-6"><a href="functions.html#cb256-6" tabindex="-1"></a></span>
<span id="cb256-7"><a href="functions.html#cb256-7" tabindex="-1"></a><span class="fu">happy_birthday</span>()</span></code></pre></div>
<p>Note that this function can only be used in interactive R sessions since direct user input is required.</p>
</div>
<div id="default-arguments" class="section level4 unnumbered hasAnchor">
<h4>Default Arguments<a href="functions.html#default-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We have seen how to add arguments that must be defined by the user when using the function. If the user does not specify one or more arguments, R will return an error message indicating that there are unspecified arguments without default values.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="functions.html#cb257-1" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="at">x =</span> <span class="dv">5</span>)</span>
<span id="cb257-2"><a href="functions.html#cb257-2" tabindex="-1"></a><span class="do">## Error in my_sum(x = 5): argument &quot;y&quot; is missing, with no default</span></span></code></pre></div>
<p>To assign default values to a function’s arguments, simply specify them when creating the function within the parentheses as <code>argument_name = &lt;default-value&gt;</code>. If not otherwise specified, the arguments will take their default values. However, users are free to specify the function’s arguments according to their needs. For example, let’s set a default value for <code>y = 10</code> in the <code>my_sum()</code> function.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="functions.html#cb258-1" tabindex="-1"></a>my_sum <span class="ot">=</span> <span class="cf">function</span>(x, <span class="at">y =</span> <span class="dv">10</span>){</span>
<span id="cb258-2"><a href="functions.html#cb258-2" tabindex="-1"></a>  result <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb258-3"><a href="functions.html#cb258-3" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb258-4"><a href="functions.html#cb258-4" tabindex="-1"></a>}</span>
<span id="cb258-5"><a href="functions.html#cb258-5" tabindex="-1"></a></span>
<span id="cb258-6"><a href="functions.html#cb258-6" tabindex="-1"></a><span class="co"># Use the default value of y</span></span>
<span id="cb258-7"><a href="functions.html#cb258-7" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="at">x =</span> <span class="dv">5</span>)</span>
<span id="cb258-8"><a href="functions.html#cb258-8" tabindex="-1"></a><span class="do">## [1] 15</span></span>
<span id="cb258-9"><a href="functions.html#cb258-9" tabindex="-1"></a></span>
<span id="cb258-10"><a href="functions.html#cb258-10" tabindex="-1"></a><span class="co"># Specify the value of y</span></span>
<span id="cb258-11"><a href="functions.html#cb258-11" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="at">x =</span> <span class="dv">5</span>,  <span class="at">y =</span> <span class="dv">8</span>)</span>
<span id="cb258-12"><a href="functions.html#cb258-12" tabindex="-1"></a><span class="do">## [1] 13</span></span></code></pre></div>
<p>This practice is widely used to specify particular behaviors of functions. Generally, functions are defined with a default behavior, but certain arguments can be specified for particular needs only when necessary.</p>
<div class="trick" title="match.arg()">
<p>To enforce the selection of an argument from a limited set of values, a vector of possible values can be specified in the argument definition. The selection must then be validated using the <code>match.arg()</code> function, as shown in the following example:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="functions.html#cb259-1" tabindex="-1"></a><span class="co"># Redefine my_greetings()</span></span>
<span id="cb259-2"><a href="functions.html#cb259-2" tabindex="-1"></a>my_greetings <span class="ot">=</span> <span class="cf">function</span>(name, <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;Goodbye&quot;</span>)){</span>
<span id="cb259-3"><a href="functions.html#cb259-3" tabindex="-1"></a>  type <span class="ot">=</span> <span class="fu">match.arg</span>(type)</span>
<span id="cb259-4"><a href="functions.html#cb259-4" tabindex="-1"></a>  greetings <span class="ot">=</span> <span class="fu">paste0</span>(type,<span class="st">&quot; &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb259-5"><a href="functions.html#cb259-5" tabindex="-1"></a>  <span class="fu">return</span>(greetings)</span>
<span id="cb259-6"><a href="functions.html#cb259-6" tabindex="-1"></a>}</span>
<span id="cb259-7"><a href="functions.html#cb259-7" tabindex="-1"></a></span>
<span id="cb259-8"><a href="functions.html#cb259-8" tabindex="-1"></a><span class="co"># Choose type</span></span>
<span id="cb259-9"><a href="functions.html#cb259-9" tabindex="-1"></a><span class="fu">my_greetings</span>(<span class="at">name =</span> <span class="st">&quot;Psicostat&quot;</span>, <span class="at">type =</span> <span class="st">&quot;Goodbye&quot;</span>)</span>
<span id="cb259-10"><a href="functions.html#cb259-10" tabindex="-1"></a><span class="do">## [1] &quot;Goodbye Psicostat!&quot;</span></span>
<span id="cb259-11"><a href="functions.html#cb259-11" tabindex="-1"></a></span>
<span id="cb259-12"><a href="functions.html#cb259-12" tabindex="-1"></a><span class="co"># Default value</span></span>
<span id="cb259-13"><a href="functions.html#cb259-13" tabindex="-1"></a><span class="fu">my_greetings</span>(<span class="at">name =</span> <span class="st">&quot;Psicostat&quot;</span>)</span>
<span id="cb259-14"><a href="functions.html#cb259-14" tabindex="-1"></a><span class="do">## [1] &quot;Hello Psicostat!&quot;</span></span>
<span id="cb259-15"><a href="functions.html#cb259-15" tabindex="-1"></a></span>
<span id="cb259-16"><a href="functions.html#cb259-16" tabindex="-1"></a><span class="co"># Invalid value</span></span>
<span id="cb259-17"><a href="functions.html#cb259-17" tabindex="-1"></a><span class="fu">my_greetings</span>(<span class="at">name =</span> <span class="st">&quot;Psicostat&quot;</span>, <span class="at">type =</span> <span class="st">&quot;Guten Tag&quot;</span>)</span>
<span id="cb259-18"><a href="functions.html#cb259-18" tabindex="-1"></a><span class="do">## Error in match.arg(type): &#39;arg&#39; should be one of &quot;Hello&quot;, &quot;Goodbye&quot;</span></span></code></pre></div>
<p>The <code>match.arg()</code> function allows comparing the specified value against those indicated in the argument definition, returning an error if there is no match. Note how, if unspecified, the default value is the first one indicated in the definition.</p>
</div>
</div>
</div>
<div id="exercises-14" class="section level3 unnumbered hasAnchor">
<h3>Exercises<a href="functions.html#exercises-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Complete the following exercises:</p>
<ol style="list-style-type: decimal">
<li>Define a function that converts temperature from Celsius to Fahrenheit:
<span class="math display">\[
  Fahrenheit = Celsius *1.8 + 32
  \]</span></li>
<li>Define a function that sends Christmas and Easter greetings to a person.</li>
<li>Define a function that, given a vector of numeric values, calculates the number of elements and their average.</li>
<li>Define an interactive function that calculates the product of two values. The inputs must be obtained using the <code>readline()</code> function.</li>
<li>Define a function that calculates the monthly salary based on the hours worked in the month and the hourly wage.</li>
</ol>
</div>
</div>
<div id="working-with-functions" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Working with Functions<a href="functions.html#working-with-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions are undoubtedly the most useful and advanced aspect of the R language and programming languages in general. The packages developed in R are nothing more than a collection of functions that work together for a specific purpose. Besides the function’s purpose, it is important to understand how to handle <strong>errors and unexpected events</strong>. If the function accepts arguments, the end-user or even ourselves can mistakenly use it in the wrong way. Therefore, it is crucial to understand how to read errors but, more importantly, how to create useful error or warning messages for using the function.</p>
<p>Let’s take the sum function <code>+</code>, for example. Even though it might not seem like it, the <code>+</code> operator is actually a function. We have already seen above how we could write a <code>my_sum()</code> function that does the same as <code>+</code>:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="functions.html#cb260-1" tabindex="-1"></a>my_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb260-2"><a href="functions.html#cb260-2" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb260-3"><a href="functions.html#cb260-3" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb260-4"><a href="functions.html#cb260-4" tabindex="-1"></a>}</span>
<span id="cb260-5"><a href="functions.html#cb260-5" tabindex="-1"></a></span>
<span id="cb260-6"><a href="functions.html#cb260-6" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb260-7"><a href="functions.html#cb260-7" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb260-8"><a href="functions.html#cb260-8" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb260-9"><a href="functions.html#cb260-9" tabindex="-1"></a><span class="do">## [1] 6</span></span></code></pre></div>
<p>We have defined a (rather simple) function to calculate the sum of two numbers. What happens if we try to add a number to a string? Clearly, this is an operation that makes no sense, and we expect some kind of error:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="functions.html#cb261-1" tabindex="-1"></a><span class="fu">my_sum</span>(<span class="st">&quot;any_string&quot;</span>, <span class="dv">5</span>)</span>
<span id="cb261-2"><a href="functions.html#cb261-2" tabindex="-1"></a><span class="do">## Error in x + y: non-numeric argument to binary operator</span></span></code></pre></div>
<p>In this case, we see an <code>Error...</code> message with the useful information that one of the arguments used is <code>non-numeric</code>. It is a simple, targeted message and, most importantly, it does not provide a result because a fundamental condition (summing applies only to numbers) is not met. The <code>+</code> function already includes this check, but if we wanted to implement a <strong>check</strong> and provide a <strong>message</strong>, we have several options:</p>
<ul>
<li><code>stop(&lt;message&gt;, .call = TRUE)</code>: If placed inside a function, it halts execution and provides the specified message as an <code>Error</code>.</li>
<li><code>stopifnot(expr1, expr2, ...)</code>: If placed inside a function, it halts execution if at least one of a series of conditions is <strong>not TRUE</strong>.</li>
<li><code>warning()</code>: Provides a message to the user without stopping execution, offering information about a potential issue stemming from the input or a side effect of the function.</li>
<li><code>message()</code>: Provides a simple message without altering the function’s execution, useful for informing about operations performed.</li>
</ul>
<p>Returning to the sum example, imagine we want to write a function that sums only positive numbers. In other words, we want the <code>x</code> and <code>y</code> values input to the function to be positive in order for the function to execute. We can then include a <code>conditional check</code> and use the <code>stop()</code> function if the condition is not met:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="functions.html#cb262-1" tabindex="-1"></a>my_positive_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb262-2"><a href="functions.html#cb262-2" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">|</span> y <span class="sc">&lt;</span> <span class="dv">0</span>){</span>
<span id="cb262-3"><a href="functions.html#cb262-3" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;The arguments must be positive numbers!&quot;</span>)</span>
<span id="cb262-4"><a href="functions.html#cb262-4" tabindex="-1"></a>  }</span>
<span id="cb262-5"><a href="functions.html#cb262-5" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb262-6"><a href="functions.html#cb262-6" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb262-7"><a href="functions.html#cb262-7" tabindex="-1"></a>}</span>
<span id="cb262-8"><a href="functions.html#cb262-8" tabindex="-1"></a></span>
<span id="cb262-9"><a href="functions.html#cb262-9" tabindex="-1"></a><span class="fu">my_positive_sum</span>(<span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb262-10"><a href="functions.html#cb262-10" tabindex="-1"></a><span class="do">## [1] 15</span></span>
<span id="cb262-11"><a href="functions.html#cb262-11" tabindex="-1"></a><span class="fu">my_positive_sum</span>(<span class="dv">10</span>, <span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb262-12"><a href="functions.html#cb262-12" tabindex="-1"></a><span class="do">## Error in my_positive_sum(10, -5): The arguments must be positive numbers!</span></span></code></pre></div>
<p>A faster way to manage execution halts is by using <code>stopifnot()</code>. However, the logic is slightly different from using <code>if</code> + <code>stop()</code>. In the previous example, the logic is: <em>“if x or y is less than 0, stop.”</em> With <code>stopifnot()</code>, we use reverse logic, meaning we specify what we want to be <code>TRUE</code> and halt the execution if it is <code>FALSE</code>. In our case, we use <code>stopifnot(x &gt; 0, y &gt; 0)</code>, which means to stop if <code>x</code> or <code>y</code> <em>is NOT</em> greater than <code>0</code>. Unlike <code>stop()</code>, this does not provide a customized message but returns the first condition that is not met:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="functions.html#cb263-1" tabindex="-1"></a>my_positive_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb263-2"><a href="functions.html#cb263-2" tabindex="-1"></a>  <span class="fu">stopifnot</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, y <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb263-3"><a href="functions.html#cb263-3" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb263-4"><a href="functions.html#cb263-4" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb263-5"><a href="functions.html#cb263-5" tabindex="-1"></a>}</span>
<span id="cb263-6"><a href="functions.html#cb263-6" tabindex="-1"></a><span class="fu">my_positive_sum</span>(<span class="dv">10</span>, <span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb263-7"><a href="functions.html#cb263-7" tabindex="-1"></a><span class="do">## Error in my_positive_sum(10, -5): y &gt; 0 is not TRUE</span></span></code></pre></div>
<p>Similarly, let’s imagine (with a bit of imagination) that our function is not reliable for numbers less than 10, meaning it might occasionally produce incorrect results. In this case, we don’t want to halt execution but provide a <code>warning</code> message:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="functions.html#cb264-1" tabindex="-1"></a>my_positive_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb264-2"><a href="functions.html#cb264-2" tabindex="-1"></a>  <span class="co"># Error</span></span>
<span id="cb264-3"><a href="functions.html#cb264-3" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">|</span> y <span class="sc">&lt;</span> <span class="dv">0</span>){</span>
<span id="cb264-4"><a href="functions.html#cb264-4" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;The arguments must be positive numbers!&quot;</span>)</span>
<span id="cb264-5"><a href="functions.html#cb264-5" tabindex="-1"></a>  }</span>
<span id="cb264-6"><a href="functions.html#cb264-6" tabindex="-1"></a>  <span class="co"># Warning</span></span>
<span id="cb264-7"><a href="functions.html#cb264-7" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">|</span> y <span class="sc">&lt;</span> <span class="dv">10</span>){</span>
<span id="cb264-8"><a href="functions.html#cb264-8" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">&quot;For some strange reason, the function doesn&#39;t handle numbers below 10 very well, be careful! :)&quot;</span>)</span>
<span id="cb264-9"><a href="functions.html#cb264-9" tabindex="-1"></a>  }</span>
<span id="cb264-10"><a href="functions.html#cb264-10" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb264-11"><a href="functions.html#cb264-11" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb264-12"><a href="functions.html#cb264-12" tabindex="-1"></a>}</span>
<span id="cb264-13"><a href="functions.html#cb264-13" tabindex="-1"></a></span>
<span id="cb264-14"><a href="functions.html#cb264-14" tabindex="-1"></a><span class="fu">my_positive_sum</span>(<span class="dv">15</span>, <span class="dv">4</span>)</span>
<span id="cb264-15"><a href="functions.html#cb264-15" tabindex="-1"></a><span class="do">## Warning in my_positive_sum(15, 4): For some strange reason, the function</span></span>
<span id="cb264-16"><a href="functions.html#cb264-16" tabindex="-1"></a><span class="do">## doesn&#39;t handle numbers below 10 very well, be careful! :)</span></span>
<span id="cb264-17"><a href="functions.html#cb264-17" tabindex="-1"></a><span class="do">## [1] 19</span></span></code></pre></div>
<p>As you can see, we get the result (which is, of course, correct), but also a <code>warning</code> message that alerts us to this possible (but not critical) issue.</p>
<p>Lastly, we can accompany the result with a message under certain conditions, providing additional information using the <code>message()</code> function:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="functions.html#cb265-1" tabindex="-1"></a>my_positive_sum <span class="ot">=</span> <span class="cf">function</span>(x, y){</span>
<span id="cb265-2"><a href="functions.html#cb265-2" tabindex="-1"></a>  <span class="co"># Error</span></span>
<span id="cb265-3"><a href="functions.html#cb265-3" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">|</span> y <span class="sc">&lt;</span> <span class="dv">0</span>){</span>
<span id="cb265-4"><a href="functions.html#cb265-4" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;The arguments must be positive numbers!&quot;</span>)</span>
<span id="cb265-5"><a href="functions.html#cb265-5" tabindex="-1"></a>  }</span>
<span id="cb265-6"><a href="functions.html#cb265-6" tabindex="-1"></a>  <span class="co"># Warning</span></span>
<span id="cb265-7"><a href="functions.html#cb265-7" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">|</span> y <span class="sc">&lt;</span> <span class="dv">10</span>){</span>
<span id="cb265-8"><a href="functions.html#cb265-8" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">&quot;For some strange reason, the function doesn&#39;t handle numbers below 10 very well, be careful! :)&quot;</span>)</span>
<span id="cb265-9"><a href="functions.html#cb265-9" tabindex="-1"></a>  }</span>
<span id="cb265-10"><a href="functions.html#cb265-10" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">+</span> y</span>
<span id="cb265-11"><a href="functions.html#cb265-11" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Great job! :)&quot;</span>)</span>
<span id="cb265-12"><a href="functions.html#cb265-12" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb265-13"><a href="functions.html#cb265-13" tabindex="-1"></a>}</span>
<span id="cb265-14"><a href="functions.html#cb265-14" tabindex="-1"></a></span>
<span id="cb265-15"><a href="functions.html#cb265-15" tabindex="-1"></a><span class="fu">my_positive_sum</span>(<span class="dv">12</span>, <span class="dv">10</span>)</span>
<span id="cb265-16"><a href="functions.html#cb265-16" tabindex="-1"></a><span class="do">## Great job! :)</span></span>
<span id="cb265-17"><a href="functions.html#cb265-17" tabindex="-1"></a><span class="do">## [1] 22</span></span></code></pre></div>
<p>One last important aspect concerns what happens when we assign the result of a function in the presence of errors, warnings, or messages. In general, except in cases where errors occur (hence using the <code>stop()</code> function), the output remains the same, and the message is simply printed to the console:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="functions.html#cb266-1" tabindex="-1"></a>res1 <span class="ot">=</span> <span class="fu">my_positive_sum</span>(<span class="dv">10</span>,<span class="dv">5</span>)</span>
<span id="cb266-2"><a href="functions.html#cb266-2" tabindex="-1"></a><span class="do">## Warning in my_positive_sum(10, 5): For some strange reason, the function</span></span>
<span id="cb266-3"><a href="functions.html#cb266-3" tabindex="-1"></a><span class="do">## doesn&#39;t handle numbers below 10 very well, be careful! :)</span></span>
<span id="cb266-4"><a href="functions.html#cb266-4" tabindex="-1"></a><span class="do">## Great job! :)</span></span>
<span id="cb266-5"><a href="functions.html#cb266-5" tabindex="-1"></a>res2 <span class="ot">=</span> <span class="fu">my_positive_sum</span>(<span class="dv">10</span>,<span class="dv">23</span>)</span>
<span id="cb266-6"><a href="functions.html#cb266-6" tabindex="-1"></a><span class="do">## Great job! :)</span></span>
<span id="cb266-7"><a href="functions.html#cb266-7" tabindex="-1"></a>res3 <span class="ot">=</span> <span class="fu">my_positive_sum</span>(<span class="dv">10</span>,<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb266-8"><a href="functions.html#cb266-8" tabindex="-1"></a><span class="do">## Error in my_positive_sum(10, -1): The arguments must be positive numbers!</span></span>
<span id="cb266-9"><a href="functions.html#cb266-9" tabindex="-1"></a></span>
<span id="cb266-10"><a href="functions.html#cb266-10" tabindex="-1"></a>res1</span>
<span id="cb266-11"><a href="functions.html#cb266-11" tabindex="-1"></a><span class="do">## [1] 15</span></span>
<span id="cb266-12"><a href="functions.html#cb266-12" tabindex="-1"></a>res2</span>
<span id="cb266-13"><a href="functions.html#cb266-13" tabindex="-1"></a><span class="do">## [1] 33</span></span>
<span id="cb266-14"><a href="functions.html#cb266-14" tabindex="-1"></a>res3 <span class="co"># no output</span></span>
<span id="cb266-15"><a href="functions.html#cb266-15" tabindex="-1"></a><span class="do">## Error in eval(expr, envir, enclos): object &#39;res3&#39; not found</span></span></code></pre></div>
<p>As you can see, when an error occurs and we stop execution, the function, despite being expected to return an output, does not provide any result because it was interrupted.</p>
</div>
<div id="function-environment" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Function Environment<a href="functions.html#function-environment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The concept of <em>environment</em> in R is quite complex. In simple terms, all the operations we normally perform in the console or in a script happen within what is called the <em>global environment</em>. When we write and execute a function, we are creating a function object (in the <em>global environment</em>), which in turn creates an internal environment to perform the specified operations. Let’s imagine we have this function <code>my_fun()</code> that takes a value <code>x</code> and adds it to a value <code>y</code>, which is not an argument.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="functions.html#cb267-1" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb267-2"><a href="functions.html#cb267-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb267-3"><a href="functions.html#cb267-3" tabindex="-1"></a>}</span>
<span id="cb267-4"><a href="functions.html#cb267-4" tabindex="-1"></a></span>
<span id="cb267-5"><a href="functions.html#cb267-5" tabindex="-1"></a><span class="fu">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb267-6"><a href="functions.html#cb267-6" tabindex="-1"></a><span class="do">## Error in my_fun(10): object &#39;y&#39; not found</span></span></code></pre></div>
<p>Clearly, we get an error because the object <code>y</code> was not created. However, if we create the <code>y</code> object inside the function, it will perform the addition correctly, but it will not create the <code>y</code> object in the global environment.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="functions.html#cb268-1" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb268-2"><a href="functions.html#cb268-2" tabindex="-1"></a>  y <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb268-3"><a href="functions.html#cb268-3" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb268-4"><a href="functions.html#cb268-4" tabindex="-1"></a>}</span>
<span id="cb268-5"><a href="functions.html#cb268-5" tabindex="-1"></a></span>
<span id="cb268-6"><a href="functions.html#cb268-6" tabindex="-1"></a><span class="fu">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb268-7"><a href="functions.html#cb268-7" tabindex="-1"></a><span class="do">## [1] 11</span></span>
<span id="cb268-8"><a href="functions.html#cb268-8" tabindex="-1"></a><span class="fu">ls</span>() <span class="co"># we only have our function as an object</span></span>
<span id="cb268-9"><a href="functions.html#cb268-9" tabindex="-1"></a><span class="do">## [1] &quot;my_fun&quot;          &quot;my_greetings&quot;    &quot;my_positive_sum&quot; &quot;my_sum&quot;         </span></span>
<span id="cb268-10"><a href="functions.html#cb268-10" tabindex="-1"></a><span class="do">## [5] &quot;res1&quot;            &quot;res2&quot;</span></span></code></pre></div>
<p>From this, it’s clear that what happens inside the function is somewhat compartmentalized compared to the global environment. The only way to influence the global environment is to assign the result of the function, thus creating a new object:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="functions.html#cb269-1" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb269-2"><a href="functions.html#cb269-2" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb269-3"><a href="functions.html#cb269-3" tabindex="-1"></a><span class="do">## [1] &quot;my_fun&quot;          &quot;my_greetings&quot;    &quot;my_positive_sum&quot; &quot;my_sum&quot;         </span></span>
<span id="cb269-4"><a href="functions.html#cb269-4" tabindex="-1"></a><span class="do">## [5] &quot;res&quot;             &quot;res1&quot;            &quot;res2&quot;</span></span></code></pre></div>
<p>Another important point, especially for managing side effects, is the fact that the function does <strong>not</strong> modify and does <strong>not</strong> interfere with objects in the <em>global environment</em> that have the same names as objects within the <em>function environment</em>:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="functions.html#cb270-1" tabindex="-1"></a>y <span class="ot">=</span> <span class="dv">10</span> <span class="co"># global environment</span></span>
<span id="cb270-2"><a href="functions.html#cb270-2" tabindex="-1"></a></span>
<span id="cb270-3"><a href="functions.html#cb270-3" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb270-4"><a href="functions.html#cb270-4" tabindex="-1"></a>  y <span class="ot">=</span> <span class="dv">1</span> <span class="co"># function environment</span></span>
<span id="cb270-5"><a href="functions.html#cb270-5" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y) <span class="co"># this uses the function&#39;s y</span></span>
<span id="cb270-6"><a href="functions.html#cb270-6" tabindex="-1"></a>}</span>
<span id="cb270-7"><a href="functions.html#cb270-7" tabindex="-1"></a></span>
<span id="cb270-8"><a href="functions.html#cb270-8" tabindex="-1"></a><span class="fu">my_fun</span>(<span class="dv">1</span>)</span>
<span id="cb270-9"><a href="functions.html#cb270-9" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb270-10"><a href="functions.html#cb270-10" tabindex="-1"></a>y</span>
<span id="cb270-11"><a href="functions.html#cb270-11" tabindex="-1"></a><span class="do">## [1] 10</span></span></code></pre></div>
<p>As you can see, we created an object <code>y</code> inside the function. If executed in the same environment, this would have overwritten the previous value. The result is based on the value of <code>y</code> created in the function environment, and the global <code>y</code> was not modified.</p>
<p>One final important point concerns the relationship between the function environment and the global environment. We have seen their independence, but this is not absolute. If, inside the function, we use a variable defined only in the global environment, the function will automatically use that value (if not specified internally). This is useful for allowing functions and global variables to work together, but it is always preferable to create an independent function environment and provide <strong>arguments</strong> for all the necessary objects.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="functions.html#cb271-1" tabindex="-1"></a>y <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb271-2"><a href="functions.html#cb271-2" tabindex="-1"></a></span>
<span id="cb271-3"><a href="functions.html#cb271-3" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb271-4"><a href="functions.html#cb271-4" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y) <span class="co"># no &quot;y&quot; exists in the local function environment, therefore, &quot;y&quot; from global environment is used</span></span>
<span id="cb271-5"><a href="functions.html#cb271-5" tabindex="-1"></a>}</span>
<span id="cb271-6"><a href="functions.html#cb271-6" tabindex="-1"></a></span>
<span id="cb271-7"><a href="functions.html#cb271-7" tabindex="-1"></a><span class="fu">my_fun</span>(<span class="dv">1</span>)</span>
<span id="cb271-8"><a href="functions.html#cb271-8" tabindex="-1"></a><span class="do">## [1] 11</span></span></code></pre></div>
<p>The key points to remember when defining and using functions are:</p>
<ul>
<li>Every time a function is executed, the internal environment is recreated, so it’s like starting from scratch.</li>
<li>Objects created inside the function take precedence over those in the external environment.</li>
<li>If the function uses an object not defined internally, it will automatically look for it in the main environment.</li>
</ul>
<p><em>Note</em>: For a more in-depth discussion of the “Environments” topic, <a href="https://adv-r.hadley.nz/environments.html">Chapter 7</a> from Hadley Wickham’s book <em>Advanced R</em> is an excellent resource.</p>
</div>
<div id="best-practices" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Best Practices<a href="functions.html#best-practices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Writing functions is certainly the most important aspect when writing code. It allows you to automate operations, reduce the amount of code, make your script clearer, and reuse a certain portion of code in other contexts. However, there are some conventions and best practices for writing excellent and versatile functions:</p>
<ul>
<li>When is a function necessary?</li>
<li>Choosing the name</li>
<li>Simplifying the number of operations and outputs</li>
<li>Commenting and documenting</li>
</ul>
<div id="when-is-a-function-necessary" class="section level3 hasAnchor" number="12.4.1">
<h3><span class="header-section-number">12.4.1</span> When is a Function Necessary?<a href="functions.html#when-is-a-function-necessary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://r4ds.had.co.nz/functions.html#when-should-you-write-a-function">Hadley Wickam</a> suggests that if we repeat a series of operations more than twice, it might be better to write a function. Let’s imagine we have a series of objects and want to perform the same operation on all of them. For example, we want to <em>center</em> (i.e., subtract the mean from all the values of a numeric vector) a numeric vector:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="functions.html#cb272-1" tabindex="-1"></a>vect1 <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb272-2"><a href="functions.html#cb272-2" tabindex="-1"></a>vect2 <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb272-3"><a href="functions.html#cb272-3" tabindex="-1"></a>vect3 <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span></code></pre></div>
<p>In previous chapters, we saw how to use the <code>apply</code> family and how a function can be applied to a series of objects. But let’s imagine a case where we have a very long script and at various points, we perform a certain operation:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="functions.html#cb273-1" tabindex="-1"></a><span class="co"># Mean centering</span></span>
<span id="cb273-2"><a href="functions.html#cb273-2" tabindex="-1"></a>vect1 <span class="sc">-</span> <span class="fu">mean</span>(vect2)</span>
<span id="cb273-3"><a href="functions.html#cb273-3" tabindex="-1"></a><span class="do">##  [1] -0.41139663  0.11692492 -0.02186378 -0.19960069  0.21373907 -0.55045830</span></span>
<span id="cb273-4"><a href="functions.html#cb273-4" tabindex="-1"></a><span class="do">##  [7] -0.08519545  0.20336220  0.38618427  0.27035788</span></span>
<span id="cb273-5"><a href="functions.html#cb273-5" tabindex="-1"></a>vect2 <span class="sc">-</span> <span class="fu">mean</span>(vect2)</span>
<span id="cb273-6"><a href="functions.html#cb273-6" tabindex="-1"></a><span class="do">##  [1]  0.20947475  0.02759599 -0.15934934 -0.14476820  0.30310012 -0.32428165</span></span>
<span id="cb273-7"><a href="functions.html#cb273-7" tabindex="-1"></a><span class="do">##  [7] -0.06136103 -0.11847351  0.37552491 -0.10746203</span></span>
<span id="cb273-8"><a href="functions.html#cb273-8" tabindex="-1"></a>vect3 <span class="sc">-</span> <span class="fu">mean</span>(vect3)</span>
<span id="cb273-9"><a href="functions.html#cb273-9" tabindex="-1"></a><span class="do">##  [1] -0.04571068  0.15181301 -0.25855232 -0.12159508 -0.06932507 -0.33966069</span></span>
<span id="cb273-10"><a href="functions.html#cb273-10" tabindex="-1"></a><span class="do">##  [7] -0.02046535  0.43293552  0.22290078  0.04765988</span></span></code></pre></div>
<p>The operation is performed correctly and is also easy to understand. However, we are always doing the same thing, just changing an input (the very definition of a function), so we can:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="functions.html#cb274-1" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb274-2"><a href="functions.html#cb274-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb274-3"><a href="functions.html#cb274-3" tabindex="-1"></a>}</span>
<span id="cb274-4"><a href="functions.html#cb274-4" tabindex="-1"></a></span>
<span id="cb274-5"><a href="functions.html#cb274-5" tabindex="-1"></a><span class="fu">my_fun</span>(vect1)</span>
<span id="cb274-6"><a href="functions.html#cb274-6" tabindex="-1"></a><span class="do">##  [1] -0.40360198  0.12471957 -0.01406913 -0.19180604  0.22153372 -0.54266365</span></span>
<span id="cb274-7"><a href="functions.html#cb274-7" tabindex="-1"></a><span class="do">##  [7] -0.07740080  0.21115686  0.39397892  0.27815253</span></span>
<span id="cb274-8"><a href="functions.html#cb274-8" tabindex="-1"></a><span class="fu">my_fun</span>(vect2)</span>
<span id="cb274-9"><a href="functions.html#cb274-9" tabindex="-1"></a><span class="do">##  [1]  0.20947475  0.02759599 -0.15934934 -0.14476820  0.30310012 -0.32428165</span></span>
<span id="cb274-10"><a href="functions.html#cb274-10" tabindex="-1"></a><span class="do">##  [7] -0.06136103 -0.11847351  0.37552491 -0.10746203</span></span>
<span id="cb274-11"><a href="functions.html#cb274-11" tabindex="-1"></a><span class="fu">my_fun</span>(vect3)</span>
<span id="cb274-12"><a href="functions.html#cb274-12" tabindex="-1"></a><span class="do">##  [1] -0.04571068  0.15181301 -0.25855232 -0.12159508 -0.06932507 -0.33966069</span></span>
<span id="cb274-13"><a href="functions.html#cb274-13" tabindex="-1"></a><span class="do">##  [7] -0.02046535  0.43293552  0.22290078  0.04765988</span></span></code></pre></div>
<p>The code hasn’t changed much in terms of lines or complexity. However, imagine realizing an error or wanting to change or extend the operations on <code>vect1</code>, <code>vect2</code>, and <code>vect3</code>. In the first case, you would have to go line by line through the script and modify the code. In the case of a function, simply changing the operations will apply them every time the function is called. Let’s imagine that we also want to <em>standardize</em> (subtract the mean and divide by the standard deviation) our vectors:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="functions.html#cb275-1" tabindex="-1"></a>my_fun <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb275-2"><a href="functions.html#cb275-2" tabindex="-1"></a>  res <span class="ot">=</span> (x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">/</span> <span class="fu">sd</span>(x)</span>
<span id="cb275-3"><a href="functions.html#cb275-3" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb275-4"><a href="functions.html#cb275-4" tabindex="-1"></a>}</span>
<span id="cb275-5"><a href="functions.html#cb275-5" tabindex="-1"></a></span>
<span id="cb275-6"><a href="functions.html#cb275-6" tabindex="-1"></a><span class="fu">my_fun</span>(vect1)</span>
<span id="cb275-7"><a href="functions.html#cb275-7" tabindex="-1"></a><span class="do">##  [1] -1.31939887  0.40771569 -0.04599281 -0.62702536  0.72420690 -1.77399976</span></span>
<span id="cb275-8"><a href="functions.html#cb275-8" tabindex="-1"></a><span class="do">##  [7] -0.25302780  0.69028432  1.28794053  0.90929716</span></span>
<span id="cb275-9"><a href="functions.html#cb275-9" tabindex="-1"></a><span class="fu">my_fun</span>(vect2)</span>
<span id="cb275-10"><a href="functions.html#cb275-10" tabindex="-1"></a><span class="do">##  [1]  0.9281891  0.1222787 -0.7060818 -0.6414724  1.3430460 -1.4369020</span></span>
<span id="cb275-11"><a href="functions.html#cb275-11" tabindex="-1"></a><span class="do">##  [7] -0.2718926 -0.5249598  1.6639624 -0.4761676</span></span>
<span id="cb275-12"><a href="functions.html#cb275-12" tabindex="-1"></a><span class="fu">my_fun</span>(vect3)</span>
<span id="cb275-13"><a href="functions.html#cb275-13" tabindex="-1"></a><span class="do">##  [1] -0.2007218  0.6666314 -1.1353382 -0.5339405 -0.3044158 -1.4914960</span></span>
<span id="cb275-14"><a href="functions.html#cb275-14" tabindex="-1"></a><span class="do">##  [7] -0.0898661  1.9010784  0.9787875  0.2092810</span></span></code></pre></div>
<p>Of course, the combination of functions and the <code>apply</code> family allows everything to be even more compact and efficient:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="functions.html#cb276-1" tabindex="-1"></a>my_list <span class="ot">=</span> <span class="fu">list</span>(vect1, vect2, vect3)</span>
<span id="cb276-2"><a href="functions.html#cb276-2" tabindex="-1"></a><span class="fu">lapply</span>(my_list, my_fun)</span>
<span id="cb276-3"><a href="functions.html#cb276-3" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb276-4"><a href="functions.html#cb276-4" tabindex="-1"></a><span class="do">##  [1] -1.31939887  0.40771569 -0.04599281 -0.62702536  0.72420690 -1.77399976</span></span>
<span id="cb276-5"><a href="functions.html#cb276-5" tabindex="-1"></a><span class="do">##  [7] -0.25302780  0.69028432  1.28794053  0.90929716</span></span>
<span id="cb276-6"><a href="functions.html#cb276-6" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb276-7"><a href="functions.html#cb276-7" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb276-8"><a href="functions.html#cb276-8" tabindex="-1"></a><span class="do">##  [1]  0.9281891  0.1222787 -0.7060818 -0.6414724  1.3430460 -1.4369020</span></span>
<span id="cb276-9"><a href="functions.html#cb276-9" tabindex="-1"></a><span class="do">##  [7] -0.2718926 -0.5249598  1.6639624 -0.4761676</span></span>
<span id="cb276-10"><a href="functions.html#cb276-10" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb276-11"><a href="functions.html#cb276-11" tabindex="-1"></a><span class="do">## [[3]]</span></span>
<span id="cb276-12"><a href="functions.html#cb276-12" tabindex="-1"></a><span class="do">##  [1] -0.2007218  0.6666314 -1.1353382 -0.5339405 -0.3044158 -1.4914960</span></span>
<span id="cb276-13"><a href="functions.html#cb276-13" tabindex="-1"></a><span class="do">##  [7] -0.0898661  1.9010784  0.9787875  0.2092810</span></span></code></pre></div>
</div>
<div id="choosing-the-name-of-a-function" class="section level3 hasAnchor" number="12.4.2">
<h3><span class="header-section-number">12.4.2</span> Choosing the Name of a Function<a href="functions.html#choosing-the-name-of-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This might seem like a marginal topic, but the choice of names, both for variables and especially for functions, is extremely important. It allows you to:</p>
<ul>
<li>Read your code clearly and make it understandable to others;</li>
<li>Easily organize a group of functions. When you have multiple functions, using appropriate naming allows you to take advantage of RStudio’s suggestions more effectively. For example, the <a href="https://stringr.tidyverse.org/"><code>stringr</code></a> package, which provides tools for working with strings, uses all functions named as <code>str_</code>, making it easier to find the desired function.</li>
</ul>
<p>It is useful to use <strong>verbs</strong> to name functions and <strong>nouns</strong> to name arguments. For example, an appropriate name for our last function might be <code>center_var()</code>, while the name of the new vector could be <code>centered_vect</code> or <code>c_vect</code>. If we find <code>center_var</code> in a script, it is immediately clear what that function does, even without looking at the code inside it.</p>
</div>
<div id="simplifying-the-number-of-operations-and-outputs" class="section level3 hasAnchor" number="12.4.3">
<h3><span class="header-section-number">12.4.3</span> Simplifying the Number of Operations and Outputs<a href="functions.html#simplifying-the-number-of-operations-and-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is a very important yet varied point. There are different programming styles, so there are no fixed rules or practices better than others. We said that a function is a way to abstract, reuse, and simplify a series of operations. Therefore, we can write very complex functions that receive various inputs, perform multiple operations, and return several outputs. However, it’s good practice to write functions that:</p>
<ul>
<li>Reduce the number of internal operations</li>
<li>Provide a single (or limited) output</li>
<li>Have a limited number of inputs</li>
</ul>
<p>If we have designed a function with too many outputs, it’s too complex, or it has too many inputs, we might consider breaking the function into sub-functions.</p>
<p>Let’s take an example with our <code>center_vect()</code>. We can think of various alternatives and extensions of this function. For instance, we might want to create a function that either centers or standardizes the vector. We might also choose to center it using the mean or the median. So, we can think of a macro function <code>trans_vect()</code> that transforms the vector based on the arguments:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="functions.html#cb277-1" tabindex="-1"></a>trans_vect <span class="ot">=</span> <span class="cf">function</span>(x, <span class="at">what =</span> <span class="fu">c</span>(<span class="st">&quot;center_mean&quot;</span>, <span class="st">&quot;center_median&quot;</span>, <span class="st">&quot;standardize&quot;</span>)){</span>
<span id="cb277-2"><a href="functions.html#cb277-2" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">match.arg</span>(what) <span class="sc">==</span> <span class="st">&quot;center_mean&quot;</span>){</span>
<span id="cb277-3"><a href="functions.html#cb277-3" tabindex="-1"></a>    res <span class="ot">=</span> x <span class="sc">-</span> <span class="fu">mean</span>(x)</span>
<span id="cb277-4"><a href="functions.html#cb277-4" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="fu">match.arg</span>(what) <span class="sc">==</span> <span class="st">&quot;center_median&quot;</span>){</span>
<span id="cb277-5"><a href="functions.html#cb277-5" tabindex="-1"></a>    res <span class="ot">=</span> x <span class="sc">-</span> <span class="fu">median</span>(x)</span>
<span id="cb277-6"><a href="functions.html#cb277-6" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="fu">match.arg</span>(what) <span class="sc">==</span> <span class="st">&quot;standardize&quot;</span>){</span>
<span id="cb277-7"><a href="functions.html#cb277-7" tabindex="-1"></a>    res <span class="ot">=</span> (x <span class="sc">-</span> <span class="fu">mean</span>(x))<span class="sc">/</span><span class="fu">sd</span>(x)</span>
<span id="cb277-8"><a href="functions.html#cb277-8" tabindex="-1"></a>  }</span>
<span id="cb277-9"><a href="functions.html#cb277-9" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb277-10"><a href="functions.html#cb277-10" tabindex="-1"></a>}</span>
<span id="cb277-11"><a href="functions.html#cb277-11" tabindex="-1"></a></span>
<span id="cb277-12"><a href="functions.html#cb277-12" tabindex="-1"></a>vect <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb277-13"><a href="functions.html#cb277-13" tabindex="-1"></a><span class="fu">trans_vect</span>(vect, <span class="st">&quot;center_mean&quot;</span>)</span>
<span id="cb277-14"><a href="functions.html#cb277-14" tabindex="-1"></a><span class="do">##  [1]  0.04956553  0.30464890  0.34899754  0.01049600 -0.32424882 -0.40001016</span></span>
<span id="cb277-15"><a href="functions.html#cb277-15" tabindex="-1"></a><span class="do">##  [7] -0.51342162 -0.19621670  0.23923243  0.48095690</span></span>
<span id="cb277-16"><a href="functions.html#cb277-16" tabindex="-1"></a><span class="fu">trans_vect</span>(vect, <span class="st">&quot;center_mean&quot;</span>)</span>
<span id="cb277-17"><a href="functions.html#cb277-17" tabindex="-1"></a><span class="do">##  [1]  0.04956553  0.30464890  0.34899754  0.01049600 -0.32424882 -0.40001016</span></span>
<span id="cb277-18"><a href="functions.html#cb277-18" tabindex="-1"></a><span class="do">##  [7] -0.51342162 -0.19621670  0.23923243  0.48095690</span></span>
<span id="cb277-19"><a href="functions.html#cb277-19" tabindex="-1"></a><span class="fu">trans_vect</span>(vect, <span class="st">&quot;standardize&quot;</span>)</span>
<span id="cb277-20"><a href="functions.html#cb277-20" tabindex="-1"></a><span class="do">##  [1]  0.14355085  0.88231907  1.01076084  0.03039834 -0.93908401 -1.15850275</span></span>
<span id="cb277-21"><a href="functions.html#cb277-21" tabindex="-1"></a><span class="do">##  [7] -1.48696312 -0.56827953  0.69286098  1.39293934</span></span></code></pre></div>
<p>The function is very clear, but it still contains some weaknesses. The user must insert a string to perform the operation. There are multiple <code>if</code> conditions, and the function’s purpose might be too broad. A better solution might be to write 3 simpler, more focused, and easier-to-maintain functions:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="functions.html#cb278-1" tabindex="-1"></a>center_vect_mean <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb278-2"><a href="functions.html#cb278-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb278-3"><a href="functions.html#cb278-3" tabindex="-1"></a>}</span>
<span id="cb278-4"><a href="functions.html#cb278-4" tabindex="-1"></a></span>
<span id="cb278-5"><a href="functions.html#cb278-5" tabindex="-1"></a>center_vect_median <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb278-6"><a href="functions.html#cb278-6" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="fu">median</span>(x))</span>
<span id="cb278-7"><a href="functions.html#cb278-7" tabindex="-1"></a>}</span>
<span id="cb278-8"><a href="functions.html#cb278-8" tabindex="-1"></a></span>
<span id="cb278-9"><a href="functions.html#cb278-9" tabindex="-1"></a>standardize_vect <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb278-10"><a href="functions.html#cb278-10" tabindex="-1"></a>  <span class="fu">return</span>((x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">/</span> <span class="fu">sd</span>(x))</span>
<span id="cb278-11"><a href="functions.html#cb278-11" tabindex="-1"></a>}</span>
<span id="cb278-12"><a href="functions.html#cb278-12" tabindex="-1"></a></span>
<span id="cb278-13"><a href="functions.html#cb278-13" tabindex="-1"></a>vect <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb278-14"><a href="functions.html#cb278-14" tabindex="-1"></a><span class="fu">center_vect_mean</span>(vect)</span>
<span id="cb278-15"><a href="functions.html#cb278-15" tabindex="-1"></a><span class="do">##  [1] -0.2849531  0.3929460 -0.1965581  0.3114775 -0.4603649  0.3303363</span></span>
<span id="cb278-16"><a href="functions.html#cb278-16" tabindex="-1"></a><span class="do">##  [7] -0.1201762  0.1510770  0.2774943 -0.4012787</span></span>
<span id="cb278-17"><a href="functions.html#cb278-17" tabindex="-1"></a><span class="fu">center_vect_median</span>(vect)</span>
<span id="cb278-18"><a href="functions.html#cb278-18" tabindex="-1"></a><span class="do">##  [1] -0.3004035  0.3774956 -0.2120085  0.2960271 -0.4758153  0.3148859</span></span>
<span id="cb278-19"><a href="functions.html#cb278-19" tabindex="-1"></a><span class="do">##  [7] -0.1356266  0.1356266  0.2620439 -0.4167291</span></span>
<span id="cb278-20"><a href="functions.html#cb278-20" tabindex="-1"></a><span class="fu">standardize_vect</span>(vect)</span>
<span id="cb278-21"><a href="functions.html#cb278-21" tabindex="-1"></a><span class="do">##  [1] -0.8690492  1.1984056 -0.5994625  0.9499433 -1.4040198  1.0074589</span></span>
<span id="cb278-22"><a href="functions.html#cb278-22" tabindex="-1"></a><span class="do">##  [7] -0.3665131  0.4607542  0.8463014 -1.2238189</span></span></code></pre></div>
<p>This way, the code is much more readable and clear, both inside the functions and when the functions are used. Another alternative would be to group the “centering” functions, specifying whether to use the mean or the median, and separate the standardization.</p>
</div>
<div id="commenting-and-documenting" class="section level3 hasAnchor" number="12.4.4">
<h3><span class="header-section-number">12.4.4</span> Commenting and Documenting<a href="functions.html#commenting-and-documenting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Documentation is perhaps the most important part of writing code. We can classify it into <em>formal</em> and <em>informal</em> documentation, depending on the purpose. <em>Formal</em> documentation is the one we find when using <code>help(function)</code> or <code>?function</code>. It is standardized and necessary when creating functions in a package that other users need to use. <em>Informal</em> documentation is what we put in our scripts and inside functions as <code># comment</code>. Both are very important and allow us to describe the general purpose of the function, the individual arguments, and the steps taken.</p>
</div>
</div>
<div id="importing-a-function" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Importing a Function<a href="functions.html#importing-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have already seen that the <code>library()</code> command loads a certain package, making the contained functions available for use. Without the need to create a package, we can still organize our functions effectively. We have two options:</p>
<ul>
<li>Write the functions in the same script where they are used.</li>
<li>Write a separate script and import all the functions it contains.</li>
</ul>
<p>In this case, it is mainly a matter of style and convenience. Generally:</p>
<ul>
<li>If we have many functions, it’s better to write them in one or more separate files and then import them at the beginning of the main script.</li>
<li>If we have few functions, we can keep them in the main script, perhaps in a dedicated section at the start.</li>
</ul>
<p>In the second case, it’s enough to write the function, and it will be saved as an object in the main environment. As for the first scenario, you can use the <code>source("path/script.R")</code> function. The <code>source()</code> function takes the path to an R script, which will then be executed in the background. So, if your directory is organized like this:</p>
<pre><code>- working directory/
|-- main_script.R
|-- functions/
    |-- my_functions.R</code></pre>
<p>Where the <code>my_functions.R</code> script is a script where all the functions are declared:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="functions.html#cb280-1" tabindex="-1"></a>fun1 <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb280-2"><a href="functions.html#cb280-2" tabindex="-1"></a>  <span class="co"># do</span></span>
<span id="cb280-3"><a href="functions.html#cb280-3" tabindex="-1"></a>}</span>
<span id="cb280-4"><a href="functions.html#cb280-4" tabindex="-1"></a></span>
<span id="cb280-5"><a href="functions.html#cb280-5" tabindex="-1"></a>fun2 <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb280-6"><a href="functions.html#cb280-6" tabindex="-1"></a>  <span class="co"># do</span></span>
<span id="cb280-7"><a href="functions.html#cb280-7" tabindex="-1"></a>}</span>
<span id="cb280-8"><a href="functions.html#cb280-8" tabindex="-1"></a></span>
<span id="cb280-9"><a href="functions.html#cb280-9" tabindex="-1"></a>fun3 <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb280-10"><a href="functions.html#cb280-10" tabindex="-1"></a>  <span class="co"># do</span></span>
<span id="cb280-11"><a href="functions.html#cb280-11" tabindex="-1"></a>}</span>
<span id="cb280-12"><a href="functions.html#cb280-12" tabindex="-1"></a></span>
<span id="cb280-13"><a href="functions.html#cb280-13" tabindex="-1"></a>...</span></code></pre></div>
<p>By writing at the beginning of your main script <code>source("functions/my_functions.R")</code>, all the functions will be loaded into the working environment.</p>
<!-- TODO print vs cat (aspetto nel return) -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="third-section.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditionals.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": true
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Introduction2R.pdf", "Introduction2R.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true,
"toc_float": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
