<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter14 Iterative Programming | Introduction to R</title>
  <meta name="description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter14 Iterative Programming | Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://psicostat.github.io/Introduction2R_EN/images/logo_psicostat.png" />
  <meta property="og:description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="github-repo" content="psicostat/Introduction2R_EN" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter14 Iterative Programming | Introduction to R" />
  
  <meta name="twitter:description" content="This is an introductory book on R produced by Psicostat, an interdisciplinary research group that combines a passion for statistics and psychology." />
  <meta name="twitter:image" content="https://psicostat.github.io/Introduction2R_EN/images/logo_psicostat.png" />

<meta name="author" content="by Claudio Zandonella Callegher and Filippo Gambarota (revision and translation into English by Enrico Toffalini), members of Psicostat" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/faviconpsicostat2.ico" type="image/x-icon" />
<link rel="prev" href="conditionals.html"/>
<link rel="next" href="fourth-section.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="libs/sass4eeb3cd232157e7bc0437cf318a67eab/style.min.css" type="text/css" />
<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/hex_psicostat.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentation of the Book</a></li>
<li class="part"><span><b>Getting Started</b></span></li>
<li class="chapter" data-level="" data-path="section-1---getting-started.html"><a href="section-1---getting-started.html"><i class="fa fa-check"></i>Section 1 - Getting Started</a></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installing R e RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#install-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="install.html"><a href="install.html#r-windows"><i class="fa fa-check"></i><b>1.1.1</b> R Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="install.html"><a href="install.html#r-macos"><i class="fa fa-check"></i><b>1.1.2</b> R MacOS</a></li>
<li class="chapter" data-level="1.1.3" data-path="install.html"><a href="install.html#r-linux"><i class="fa fa-check"></i><b>1.1.3</b> R Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="install.html"><a href="install.html#r-studio-on-linux"><i class="fa fa-check"></i><b>1.2.1</b> R Studio on Linux</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio-gui.html"><a href="rstudio-gui.html"><i class="fa fa-check"></i><b>2</b> RStudio Interface</a></li>
<li class="chapter" data-level="3" data-path="first-commands.html"><a href="first-commands.html"><i class="fa fa-check"></i><b>3</b> First steps in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="first-commands.html"><a href="first-commands.html#math-operators"><i class="fa fa-check"></i><b>3.1</b> Mathematical Operators</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="first-commands.html"><a href="first-commands.html#order-of-operations"><i class="fa fa-check"></i><b>3.1.1</b> Order of Operations</a></li>
<li class="chapter" data-level="" data-path="first-commands.html"><a href="first-commands.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="first-commands.html"><a href="first-commands.html#operators-rel-log"><i class="fa fa-check"></i><b>3.2</b> Relational and Logical Operators</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="first-commands.html"><a href="first-commands.html#relational-operators"><i class="fa fa-check"></i><b>3.2.1</b> Relational Operators</a></li>
<li class="chapter" data-level="3.2.2" data-path="first-commands.html"><a href="first-commands.html#logical-operators"><i class="fa fa-check"></i><b>3.2.2</b> Logical Operators</a></li>
<li class="chapter" data-level="3.2.3" data-path="first-commands.html"><a href="first-commands.html#order-of-evaluation-of-relations"><i class="fa fa-check"></i><b>3.2.3</b> Order of Evaluation of Relations</a></li>
<li class="chapter" data-level="" data-path="first-commands.html"><a href="first-commands.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-functions.html"><a href="objects-functions.html"><i class="fa fa-check"></i><b>4</b> Objects &amp; Functions: Two Inseparable Companions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="objects-functions.html"><a href="objects-functions.html#objects-section"><i class="fa fa-check"></i><b>4.1</b> Objects</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="objects-functions.html"><a href="objects-functions.html#assign"><i class="fa fa-check"></i><b>4.1.1</b> Assigning and Calling an Object</a></li>
<li class="chapter" data-level="4.1.2" data-path="objects-functions.html"><a href="objects-functions.html#objects-names"><i class="fa fa-check"></i><b>4.1.2</b> Object Names</a></li>
<li class="chapter" data-level="4.1.3" data-path="objects-functions.html"><a href="objects-functions.html#data-types-and-data-structures"><i class="fa fa-check"></i><b>4.1.3</b> Data Types and Data Structures</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objects-functions.html"><a href="objects-functions.html#functions-def"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="objects-functions.html"><a href="objects-functions.html#function-arguments"><i class="fa fa-check"></i><b>4.2.1</b> Function Arguments</a></li>
<li class="chapter" data-level="4.2.2" data-path="objects-functions.html"><a href="objects-functions.html#help"><i class="fa fa-check"></i><b>4.2.2</b> Help! I need Somebody…Help!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-environment.html"><a href="working-environment.html"><i class="fa fa-check"></i><b>5</b> Working Environment</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-environment.html"><a href="working-environment.html#environment"><i class="fa fa-check"></i><b>5.1</b> Environment</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="working-environment.html"><a href="working-environment.html#adding-objects-to-the-environment"><i class="fa fa-check"></i><b>5.1.1</b> Adding Objects to the Environment</a></li>
<li class="chapter" data-level="5.1.2" data-path="working-environment.html"><a href="working-environment.html#removing-objects-from-the-environment"><i class="fa fa-check"></i><b>5.1.2</b> Removing Objects from the Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="working-environment.html"><a href="working-environment.html#working-directory"><i class="fa fa-check"></i><b>5.2</b> Working Directory</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="working-environment.html"><a href="working-environment.html#computer-organization"><i class="fa fa-check"></i><b>5.2.1</b> Computer Organization</a></li>
<li class="chapter" data-level="5.2.2" data-path="working-environment.html"><a href="working-environment.html#absolute-path-and-relative-path"><i class="fa fa-check"></i><b>5.2.2</b> Absolute Path and Relative Path</a></li>
<li class="chapter" data-level="5.2.3" data-path="working-environment.html"><a href="working-environment.html#working-directory-in-r"><i class="fa fa-check"></i><b>5.2.3</b> Working Directory in R</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="working-environment.html"><a href="working-environment.html#packages"><i class="fa fa-check"></i><b>5.3</b> R-packages</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="working-environment.html"><a href="working-environment.html#install.packages"><i class="fa fa-check"></i><b>5.3.1</b> install.packages()</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-environment.html"><a href="working-environment.html#library"><i class="fa fa-check"></i><b>5.3.2</b> library()</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-environment.html"><a href="working-environment.html#updating-and-removing-packages"><i class="fa fa-check"></i><b>5.3.3</b> Updating and Removing Packages</a></li>
<li class="chapter" data-level="5.3.4" data-path="working-environment.html"><a href="working-environment.html#package-documentation"><i class="fa fa-check"></i><b>5.3.4</b> Package Documentation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-session.html"><a href="working-session.html"><i class="fa fa-check"></i><b>6</b> Working Session</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-session.html"><a href="working-session.html#organizing-scripts"><i class="fa fa-check"></i><b>6.1</b> Organizing Scripts</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="working-session.html"><a href="working-session.html#creating-sections"><i class="fa fa-check"></i><b>6.1.1</b> Creating Sections</a></li>
<li class="chapter" data-level="6.1.2" data-path="working-session.html"><a href="working-session.html#sintax"><i class="fa fa-check"></i><b>6.1.2</b> Syntax</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="working-session.html"><a href="working-session.html#organizing-projects"><i class="fa fa-check"></i><b>6.2</b> Organizing Projects</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="working-session.html"><a href="working-session.html#rstudio-projects"><i class="fa fa-check"></i><b>6.2.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="working-session.html"><a href="working-session.html#messages-warnings-e-errors"><i class="fa fa-check"></i><b>6.3</b> Messages, Warnings e Errors</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="working-session.html"><a href="working-session.html#resolving-errors"><i class="fa fa-check"></i><b>6.3.1</b> Resolving Errors</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Data Structures</b></span></li>
<li class="chapter" data-level="" data-path="second-section.html"><a href="second-section.html"><i class="fa fa-check"></i>Section 2 - Data Structures</a></li>
<li class="chapter" data-level="7" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>7</b> Vectors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vector.html"><a href="vector.html#creation"><i class="fa fa-check"></i><b>7.1</b> Creation</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="vector.html"><a href="vector.html#vector-selection"><i class="fa fa-check"></i><b>7.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="vector.html"><a href="vector.html#vector-selection-advanced"><i class="fa fa-check"></i><b>7.2.1</b> Advanced Uses of Selection</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vector.html"><a href="vector.html#vector-functions"><i class="fa fa-check"></i><b>7.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#exercises-4"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="vector.html"><a href="vector.html#data-type"><i class="fa fa-check"></i><b>7.4</b> Data Types</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="vector.html"><a href="vector.html#character"><i class="fa fa-check"></i><b>7.4.1</b> Character</a></li>
<li class="chapter" data-level="7.4.2" data-path="vector.html"><a href="vector.html#numeric"><i class="fa fa-check"></i><b>7.4.2</b> Numeric</a></li>
<li class="chapter" data-level="7.4.3" data-path="vector.html"><a href="vector.html#integer"><i class="fa fa-check"></i><b>7.4.3</b> Integer</a></li>
<li class="chapter" data-level="7.4.4" data-path="vector.html"><a href="vector.html#logical-vector"><i class="fa fa-check"></i><b>7.4.4</b> Logical</a></li>
<li class="chapter" data-level="7.4.5" data-path="vector.html"><a href="vector.html#special-values"><i class="fa fa-check"></i><b>7.4.5</b> Special Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>8</b> Factors</a>
<ul>
<li class="chapter" data-level="8.1" data-path="factor.html"><a href="factor.html#attributes"><i class="fa fa-check"></i><b>8.1</b> Object Attributes</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="factor.html"><a href="factor.html#attributes-of-a-vector"><i class="fa fa-check"></i><b>8.1.1</b> Attributes of a Vector</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="factor.html"><a href="factor.html#factors"><i class="fa fa-check"></i><b>8.2</b> Factors</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="factor.html"><a href="factor.html#factor-structure"><i class="fa fa-check"></i><b>8.2.1</b> Factor Structure</a></li>
<li class="chapter" data-level="8.2.2" data-path="factor.html"><a href="factor.html#factor-operations"><i class="fa fa-check"></i><b>8.2.2</b> Factor Operations</a></li>
<li class="chapter" data-level="8.2.3" data-path="factor.html"><a href="factor.html#ordinal-factors"><i class="fa fa-check"></i><b>8.2.3</b> Ordinal Factors</a></li>
<li class="chapter" data-level="" data-path="factor.html"><a href="factor.html#exercises-5"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>9</b> Matrices</a>
<ul>
<li class="chapter" data-level="9.1" data-path="matrix.html"><a href="matrix.html#creation-1"><i class="fa fa-check"></i><b>9.1</b> Creation</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="matrix.html"><a href="matrix.html#matrix-types"><i class="fa fa-check"></i><b>9.1.1</b> Matrix types</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-6"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="matrix.html"><a href="matrix.html#sel-matrix"><i class="fa fa-check"></i><b>9.2</b> Element Selection</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="matrix.html"><a href="matrix.html#matrix-selection-advanced"><i class="fa fa-check"></i><b>9.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-7"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="matrix.html"><a href="matrix.html#functions-and-operations"><i class="fa fa-check"></i><b>9.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="matrix.html"><a href="matrix.html#mat-prop"><i class="fa fa-check"></i><b>9.3.1</b> Attributes of a Matrix</a></li>
<li class="chapter" data-level="9.3.2" data-path="matrix.html"><a href="matrix.html#matrix-bind"><i class="fa fa-check"></i><b>9.3.2</b> Combining Matrices</a></li>
<li class="chapter" data-level="9.3.3" data-path="matrix.html"><a href="matrix.html#mathematical-operators"><i class="fa fa-check"></i><b>9.3.3</b> Mathematical Operators</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="matrix.html"><a href="matrix.html#arrays"><i class="fa fa-check"></i><b>9.4</b> Arrays</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>10</b> Dataframe</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dataframe.html"><a href="dataframe.html#creating-a-dataframe"><i class="fa fa-check"></i><b>10.1</b> Creating a dataframe</a>
<ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-9"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dataframe.html"><a href="dataframe.html#sel-df"><i class="fa fa-check"></i><b>10.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="dataframe.html"><a href="dataframe.html#advanced-selection-uses"><i class="fa fa-check"></i><b>10.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-10"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dataframe.html"><a href="dataframe.html#functions-and-operations-1"><i class="fa fa-check"></i><b>10.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dataframe.html"><a href="dataframe.html#attributes-of-a-dataframe"><i class="fa fa-check"></i><b>10.3.1</b> Attributes of a Dataframe</a></li>
<li class="chapter" data-level="10.3.2" data-path="dataframe.html"><a href="dataframe.html#merging-dataframes"><i class="fa fa-check"></i><b>10.3.2</b> Merging Dataframes</a></li>
<li class="chapter" data-level="10.3.3" data-path="dataframe.html"><a href="dataframe.html#dataframe-information"><i class="fa fa-check"></i><b>10.3.3</b> Dataframe Information</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#exercises-11"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="list.html"><a href="list.html"><i class="fa fa-check"></i><b>11</b> Lists</a>
<ul>
<li class="chapter" data-level="11.1" data-path="list.html"><a href="list.html#creating-lists"><i class="fa fa-check"></i><b>11.1</b> Creating Lists</a>
<ul>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#exercises-12"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="list.html"><a href="list.html#selecting-elements"><i class="fa fa-check"></i><b>11.2</b> Selecting Elements</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="list.html"><a href="list.html#advanced-selection-uses-1"><i class="fa fa-check"></i><b>11.2.1</b> Advanced Selection Uses</a></li>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#exercises-13"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="list.html"><a href="list.html#functions-and-operations-2"><i class="fa fa-check"></i><b>11.3</b> Functions and Operations</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="list.html"><a href="list.html#attributes-of-a-list"><i class="fa fa-check"></i><b>11.3.1</b> Attributes of a List</a></li>
<li class="chapter" data-level="11.3.2" data-path="list.html"><a href="list.html#merging-lists"><i class="fa fa-check"></i><b>11.3.2</b> Merging Lists</a></li>
<li class="chapter" data-level="11.3.3" data-path="list.html"><a href="list.html#list-information"><i class="fa fa-check"></i><b>11.3.3</b> List Information</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="list.html"><a href="list.html#nested-structure"><i class="fa fa-check"></i><b>11.4</b> Nested Structure</a></li>
</ul></li>
<li class="part"><span><b>Algorithms</b></span></li>
<li class="chapter" data-level="" data-path="third-section.html"><a href="third-section.html"><i class="fa fa-check"></i>Section 3 - Algorithms</a></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> Definition of Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#creating-a-function"><i class="fa fa-check"></i><b>12.1</b> Creating a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="functions.html"><a href="functions.html#defining-inputs-and-outputs"><i class="fa fa-check"></i><b>12.1.1</b> Defining Inputs and Outputs</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercises-14"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#working-with-functions"><i class="fa fa-check"></i><b>12.2</b> Working with Functions</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#function-environment"><i class="fa fa-check"></i><b>12.3</b> Function Environment</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#best-practices"><i class="fa fa-check"></i><b>12.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="functions.html"><a href="functions.html#when-is-a-function-necessary"><i class="fa fa-check"></i><b>12.4.1</b> When is a Function Necessary?</a></li>
<li class="chapter" data-level="12.4.2" data-path="functions.html"><a href="functions.html#choosing-the-name-of-a-function"><i class="fa fa-check"></i><b>12.4.2</b> Choosing the Name of a Function</a></li>
<li class="chapter" data-level="12.4.3" data-path="functions.html"><a href="functions.html#simplifying-the-number-of-operations-and-outputs"><i class="fa fa-check"></i><b>12.4.3</b> Simplifying the Number of Operations and Outputs</a></li>
<li class="chapter" data-level="12.4.4" data-path="functions.html"><a href="functions.html#commenting-and-documenting"><i class="fa fa-check"></i><b>12.4.4</b> Commenting and Documenting</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="functions.html"><a href="functions.html#importing-a-function"><i class="fa fa-check"></i><b>12.5</b> Importing a Function</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="conditionals.html"><a href="conditionals.html"><i class="fa fa-check"></i><b>13</b> Conditional Programming</a>
<ul>
<li class="chapter" data-level="13.1" data-path="conditionals.html"><a href="conditionals.html#conditional-structures"><i class="fa fa-check"></i><b>13.1</b> Conditional Structures</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="conditionals.html"><a href="conditionals.html#if"><i class="fa fa-check"></i><b>13.1.1</b> if</a></li>
<li class="chapter" data-level="13.1.2" data-path="conditionals.html"><a href="conditionals.html#ifelse"><i class="fa fa-check"></i><b>13.1.2</b> if…else</a></li>
<li class="chapter" data-level="13.1.3" data-path="conditionals.html"><a href="conditionals.html#nested"><i class="fa fa-check"></i><b>13.1.3</b> Nested</a></li>
<li class="chapter" data-level="" data-path="conditionals.html"><a href="conditionals.html#exercises-15"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="conditionals.html"><a href="conditionals.html#other-conditional-operators"><i class="fa fa-check"></i><b>13.2</b> Other Conditional Operators</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="conditionals.html"><a href="conditionals.html#switch"><i class="fa fa-check"></i><b>13.2.1</b> switch</a></li>
<li class="chapter" data-level="13.2.2" data-path="conditionals.html"><a href="conditionals.html#ifelse-1"><i class="fa fa-check"></i><b>13.2.2</b> ifelse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="loop.html"><a href="loop.html"><i class="fa fa-check"></i><b>14</b> Iterative Programming</a>
<ul>
<li class="chapter" data-level="14.1" data-path="loop.html"><a href="loop.html#loops"><i class="fa fa-check"></i><b>14.1</b> Loops</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="loop.html"><a href="loop.html#for"><i class="fa fa-check"></i><b>14.1.1</b> For</a></li>
<li class="chapter" data-level="14.1.2" data-path="loop.html"><a href="loop.html#while"><i class="fa fa-check"></i><b>14.1.2</b> While</a></li>
<li class="chapter" data-level="14.1.3" data-path="loop.html"><a href="loop.html#next-and-break"><i class="fa fa-check"></i><b>14.1.3</b> Next and Break</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="loop.html"><a href="loop.html#nested-loops"><i class="fa fa-check"></i><b>14.2</b> Nested Loops</a>
<ul>
<li class="chapter" data-level="" data-path="loop.html"><a href="loop.html#exercises-16"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="loop.html"><a href="loop.html#apply-family"><i class="fa fa-check"></i><b>14.3</b> Apply Family</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="loop.html"><a href="loop.html#which-functions-to-apply"><i class="fa fa-check"></i><b>14.3.1</b> Which Functions to Apply?</a></li>
<li class="chapter" data-level="14.3.2" data-path="loop.html"><a href="loop.html#apply"><i class="fa fa-check"></i><b>14.3.2</b> apply</a></li>
<li class="chapter" data-level="14.3.3" data-path="loop.html"><a href="loop.html#tapply"><i class="fa fa-check"></i><b>14.3.3</b> tapply</a></li>
<li class="chapter" data-level="14.3.4" data-path="loop.html"><a href="loop.html#lapply"><i class="fa fa-check"></i><b>14.3.4</b> lapply</a></li>
<li class="chapter" data-level="14.3.5" data-path="loop.html"><a href="loop.html#sapply"><i class="fa fa-check"></i><b>14.3.5</b> sapply</a></li>
<li class="chapter" data-level="14.3.6" data-path="loop.html"><a href="loop.html#vapply"><i class="fa fa-check"></i><b>14.3.6</b> vapply</a></li>
<li class="chapter" data-level="14.3.7" data-path="loop.html"><a href="loop.html#list-of-functions-applied-to-a-list-of-objects"><i class="fa fa-check"></i><b>14.3.7</b> List of Functions Applied to a List of Objects</a></li>
<li class="chapter" data-level="14.3.8" data-path="loop.html"><a href="loop.html#mapply"><i class="fa fa-check"></i><b>14.3.8</b> mapply</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="loop.html"><a href="loop.html#replicate"><i class="fa fa-check"></i><b>14.4</b> Replicate</a></li>
</ul></li>
<li class="part"><span><b>Advanced Topics</b></span></li>
<li class="chapter" data-level="" data-path="fourth-section.html"><a href="fourth-section.html"><i class="fa fa-check"></i>Section 4 - Advanced Topics</a></li>
<li class="chapter" data-level="15" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>15</b> Strings</a>
<ul>
<li class="chapter" data-level="15.1" data-path="strings.html"><a href="strings.html#comparing-strings"><i class="fa fa-check"></i><b>15.1</b> Comparing Strings</a></li>
<li class="chapter" data-level="15.2" data-path="strings.html"><a href="strings.html#constructing-strings"><i class="fa fa-check"></i><b>15.2</b> Constructing Strings</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="strings.html"><a href="strings.html#tolower-and-toupper"><i class="fa fa-check"></i><b>15.2.1</b> <code>tolower()</code> and <code>toupper()</code></a></li>
<li class="chapter" data-level="15.2.2" data-path="strings.html"><a href="strings.html#paste-and-paste0"><i class="fa fa-check"></i><b>15.2.2</b> <code>paste()</code> and <code>paste0()</code></a></li>
<li class="chapter" data-level="15.2.3" data-path="strings.html"><a href="strings.html#sprinf"><i class="fa fa-check"></i><b>15.2.3</b> <code>sprinf()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings.html"><a href="strings.html#indexing-strings"><i class="fa fa-check"></i><b>15.3</b> Indexing Strings</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="strings.html"><a href="strings.html#nchar"><i class="fa fa-check"></i><b>15.3.1</b> <code>nchar()</code></a></li>
<li class="chapter" data-level="15.3.2" data-path="strings.html"><a href="strings.html#gregexpr-and-regexpr"><i class="fa fa-check"></i><b>15.3.2</b> <code>gregexpr()</code> and <code>regexpr()</code></a></li>
<li class="chapter" data-level="15.3.3" data-path="strings.html"><a href="strings.html#substr-and-substring"><i class="fa fa-check"></i><b>15.3.3</b> <code>substr()</code> and <code>substring()</code></a></li>
<li class="chapter" data-level="15.3.4" data-path="strings.html"><a href="strings.html#startwith-and-endswith"><i class="fa fa-check"></i><b>15.3.4</b> <code>startWith()</code> and <code>endsWith()</code></a></li>
<li class="chapter" data-level="15.3.5" data-path="strings.html"><a href="strings.html#grep-and-grepl"><i class="fa fa-check"></i><b>15.3.5</b> <code>grep()</code> and <code>grepl()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings.html"><a href="strings.html#manipulating-strings"><i class="fa fa-check"></i><b>15.4</b> Manipulating Strings</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="strings.html"><a href="strings.html#gsub-and-sub"><i class="fa fa-check"></i><b>15.4.1</b> <code>gsub()</code> and <code>sub()</code></a></li>
<li class="chapter" data-level="15.4.2" data-path="strings.html"><a href="strings.html#strsplit"><i class="fa fa-check"></i><b>15.4.2</b> <code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="strings.html"><a href="strings.html#regular-expression-regex"><i class="fa fa-check"></i><b>15.5</b> Regular Expression (REGEX)</a></li>
<li class="chapter" data-level="15.6" data-path="strings.html"><a href="strings.html#further-reading"><i class="fa fa-check"></i><b>15.6</b> Further Reading</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="strings.html"><a href="strings.html#useful-resources"><i class="fa fa-check"></i><b>15.6.1</b> Useful Resources</a></li>
<li class="chapter" data-level="15.6.2" data-path="strings.html"><a href="strings.html#other-useful-functions"><i class="fa fa-check"></i><b>15.6.2</b> Other Useful Functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size: 2.5em">Introduction to R</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <script src="assets/hideOutput.js"></script>
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="loop" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Chapter14</span> Iterative Programming<a href="loop.html#loop" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The essence of most operations in various programming languages is the concept of <strong>iteration</strong>. Iteration means repeating a portion of code a certain number of times or until a condition is met.</p>
<p>Many of the functions we’ve used so far, such as the <code>sum()</code> or <code>mean()</code> functions, rely on iterative operations. In R, for better or worse, you will rarely use iterations via loops directly, even though they are present in most functions. In fact, many of the functions implemented in R are only available through external packages or must be manually written by implementing iterative structures.</p>
<div id="loops" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Loops<a href="loop.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="for" class="section level3 hasAnchor" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> For<a href="loop.html#for" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The first type of iterative structure is called a <code>for</code> loop. The idea is to repeat a series of instructions a <strong>predetermined</strong> number of times. Figure <a href="loop.html#fig:plot-for-loop">14.1</a> represents the concept of a for loop. Similar to the conditional structures discussed in the previous chapter, when we write a loop, we temporarily enter a part of the code, execute the required operations, and then continue with the rest of the code. What is referred to as <code>i</code> in the image is a conventional way of indicating the counting of operations. If we want to repeat an operation 1000 times, <code>i</code> starts at 1 and goes up to 1000.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="loop.html#cb298-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/for_loop.png&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:plot-for-loop"></span>
<img src="images/for_loop.png" alt="Representation of 'for' loop" width="65%" />
<p class="caption">
Figure 14.1: Representation of ‘for’ loop
</p>
</div>
<div id="for-loop-structure" class="section level4 unnumbered hasAnchor">
<h4>‘For’ Loop Structure<a href="loop.html#for-loop-structure" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In R, the syntax for writing a <code>for</code> loop is as follows:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="loop.html#cb299-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(...)) {</span>
<span id="cb299-2"><a href="loop.html#cb299-2" tabindex="-1"></a>    <span class="sc">&lt;</span>code<span class="sc">-</span>to<span class="sc">-</span>execute<span class="sc">&gt;</span></span>
<span id="cb299-3"><a href="loop.html#cb299-3" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><code>i</code> is a generic name for the counter variable we introduced earlier. It can be any character, but usually, for a generic loop, single letters like <code>i</code> or <code>j</code> are used, probably due to a similarity with mathematical notation, where these letters are often used to indicate a series of elements.</li>
<li><code>in</code> is the operator that indicates that <code>i</code> varies according to the values specified after it.</li>
<li><code>c(...)</code> is the range of values that <code>i</code> will take for each iteration.</li>
</ul>
<p>We can rephrase the code as:</p>
<blockquote>
<p>Repeat the operations enclosed in <code>{ }</code> a number of times equal to the length of <code>c(...)</code>, and in this loop, <code>i</code> will take, one by one, the values contained in <code>c(...)</code>.</p>
</blockquote>
<p>Informally, there are two types of loops: one that uses a generic counter assigned to <code>i</code> and another that directly uses values of interest.</p>
</div>
<div id="example-5" class="section level4 unnumbered hasAnchor">
<h4>Example<a href="loop.html#example-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Loop with directly the values of interest:</li>
</ul>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="loop.html#cb300-1" tabindex="-1"></a><span class="co"># numeric</span></span>
<span id="cb300-2"><a href="loop.html#cb300-2" tabindex="-1"></a><span class="co"># characters</span></span>
<span id="cb300-3"><a href="loop.html#cb300-3" tabindex="-1"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Alessio&quot;</span>, <span class="st">&quot;Beatrice&quot;</span>, <span class="st">&quot;Carlo&quot;</span>)){</span>
<span id="cb300-4"><a href="loop.html#cb300-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Hello &quot;</span>, name))</span>
<span id="cb300-5"><a href="loop.html#cb300-5" tabindex="-1"></a>}</span>
<span id="cb300-6"><a href="loop.html#cb300-6" tabindex="-1"></a><span class="do">## [1] &quot;Hello Alessio&quot;</span></span>
<span id="cb300-7"><a href="loop.html#cb300-7" tabindex="-1"></a><span class="do">## [1] &quot;Hello Beatrice&quot;</span></span>
<span id="cb300-8"><a href="loop.html#cb300-8" tabindex="-1"></a><span class="do">## [1] &quot;Hello Carlo&quot;</span></span></code></pre></div>
<p>Loop that uses a generic counter to index the elements:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="loop.html#cb301-1" tabindex="-1"></a>my_vector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">93</span>, <span class="dv">27</span>, <span class="dv">46</span>, <span class="dv">99</span>)</span>
<span id="cb301-2"><a href="loop.html#cb301-2" tabindex="-1"></a></span>
<span id="cb301-3"><a href="loop.html#cb301-3" tabindex="-1"></a><span class="co"># i in 1:length(my_vector)</span></span>
<span id="cb301-4"><a href="loop.html#cb301-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(my_vector)){</span>
<span id="cb301-5"><a href="loop.html#cb301-5" tabindex="-1"></a>  <span class="fu">print</span>(my_vector[i])</span>
<span id="cb301-6"><a href="loop.html#cb301-6" tabindex="-1"></a>}</span>
<span id="cb301-7"><a href="loop.html#cb301-7" tabindex="-1"></a><span class="do">## [1] 93</span></span>
<span id="cb301-8"><a href="loop.html#cb301-8" tabindex="-1"></a><span class="do">## [1] 27</span></span>
<span id="cb301-9"><a href="loop.html#cb301-9" tabindex="-1"></a><span class="do">## [1] 46</span></span>
<span id="cb301-10"><a href="loop.html#cb301-10" tabindex="-1"></a><span class="do">## [1] 99</span></span></code></pre></div>
<p>This distinction is very useful and often a source of errors. If you use the vector directly and your counter takes the values of the vector, you “lose” a position index. In the example of the loop with names, if we wanted to know and print the position that Alessio occupies, we would need to modify the approach by using a generic counter as well. We can create it outside the loop and update it manually:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="loop.html#cb302-1" tabindex="-1"></a>i <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb302-2"><a href="loop.html#cb302-2" tabindex="-1"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Alessio&quot;</span>, <span class="st">&quot;Beatrice&quot;</span>, <span class="st">&quot;Carlo&quot;</span>)){</span>
<span id="cb302-3"><a href="loop.html#cb302-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(name, <span class="st">&quot; is number &quot;</span>, i))</span>
<span id="cb302-4"><a href="loop.html#cb302-4" tabindex="-1"></a>  i <span class="ot">=</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb302-5"><a href="loop.html#cb302-5" tabindex="-1"></a>}</span>
<span id="cb302-6"><a href="loop.html#cb302-6" tabindex="-1"></a><span class="do">## [1] &quot;Alessio is number 1&quot;</span></span>
<span id="cb302-7"><a href="loop.html#cb302-7" tabindex="-1"></a><span class="do">## [1] &quot;Beatrice is number 2&quot;</span></span>
<span id="cb302-8"><a href="loop.html#cb302-8" tabindex="-1"></a><span class="do">## [1] &quot;Carlo is number 3&quot;</span></span></code></pre></div>
<p>In general, the best approach is always to use a loop with indices and not the actual values, so you can access both pieces of information.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="loop.html#cb303-1" tabindex="-1"></a>names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Alessio&quot;</span>, <span class="st">&quot;Beatrice&quot;</span>, <span class="st">&quot;Carlo&quot;</span>)</span>
<span id="cb303-2"><a href="loop.html#cb303-2" tabindex="-1"></a></span>
<span id="cb303-3"><a href="loop.html#cb303-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(names)){</span>
<span id="cb303-4"><a href="loop.html#cb303-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(names[i], <span class="st">&quot; is number &quot;</span>, i))</span>
<span id="cb303-5"><a href="loop.html#cb303-5" tabindex="-1"></a>}</span>
<span id="cb303-6"><a href="loop.html#cb303-6" tabindex="-1"></a><span class="do">## [1] &quot;Alessio is number 1&quot;</span></span>
<span id="cb303-7"><a href="loop.html#cb303-7" tabindex="-1"></a><span class="do">## [1] &quot;Beatrice is number 2&quot;</span></span>
<span id="cb303-8"><a href="loop.html#cb303-8" tabindex="-1"></a><span class="do">## [1] &quot;Carlo is number 3&quot;</span></span></code></pre></div>
<div class="trick" title="seq_along() ">
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="loop.html#cb304-1" tabindex="-1"></a>my_vector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">93</span>, <span class="dv">27</span>, <span class="dv">46</span>, <span class="dv">99</span>)</span>
<span id="cb304-2"><a href="loop.html#cb304-2" tabindex="-1"></a>my_NULL <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb304-3"><a href="loop.html#cb304-3" tabindex="-1"></a></span>
<span id="cb304-4"><a href="loop.html#cb304-4" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(my_vector)</span>
<span id="cb304-5"><a href="loop.html#cb304-5" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb304-6"><a href="loop.html#cb304-6" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(my_NULL)</span>
<span id="cb304-7"><a href="loop.html#cb304-7" tabindex="-1"></a><span class="do">## [1] 1 0</span></span>
<span id="cb304-8"><a href="loop.html#cb304-8" tabindex="-1"></a></span>
<span id="cb304-9"><a href="loop.html#cb304-9" tabindex="-1"></a><span class="fu">seq_along</span>(my_vector)</span>
<span id="cb304-10"><a href="loop.html#cb304-10" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb304-11"><a href="loop.html#cb304-11" tabindex="-1"></a><span class="fu">seq_along</span>(my_NULL)</span>
<span id="cb304-12"><a href="loop.html#cb304-12" tabindex="-1"></a><span class="do">## integer(0)</span></span>
<span id="cb304-13"><a href="loop.html#cb304-13" tabindex="-1"></a></span>
<span id="cb304-14"><a href="loop.html#cb304-14" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="fu">length</span>(my_vector))</span>
<span id="cb304-15"><a href="loop.html#cb304-15" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb304-16"><a href="loop.html#cb304-16" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="fu">length</span>(my_NULL))</span>
<span id="cb304-17"><a href="loop.html#cb304-17" tabindex="-1"></a><span class="do">## integer(0)</span></span></code></pre></div>
</div>
</div>
<div id="example-the-sum-function" class="section level4 unnumbered hasAnchor">
<h4>Example: The Sum Function<a href="loop.html#example-the-sum-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As introduced at the beginning of this chapter, many of the available functions in R are derived from iterative structures. If we think about the <code>sum()</code> function, we know that we can calculate the sum of a vector simply with <code>sum(x)</code>. To fully understand loops, it’s interesting to think about and implement common functions.</p>
<p>If we had to sum <code>n</code> numbers manually, the structure would be as follows:</p>
<ul>
<li>Take the first number <span class="math inline">\(x_1\)</span> and add it to the second <span class="math inline">\(x_2\)</span></li>
<li>You get a new number <code>x_{1+2}</code></li>
<li>Take the third number <span class="math inline">\(x_3\)</span> and add it to <code>x_{1+2}</code></li>
<li>You get <span class="math inline">\(x_{1+2+3}\)</span></li>
<li>Repeat this operation until the last element of <span class="math inline">\(x_n\)</span></li>
</ul>
<p>As you can see, this is an iterative structure, counting from 1 to the length of <span class="math inline">\(x\)</span>, and in each iteration, adding the next number to the sum of the previous ones. In R:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="loop.html#cb305-1" tabindex="-1"></a>my_values <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)</span>
<span id="cb305-2"><a href="loop.html#cb305-2" tabindex="-1"></a></span>
<span id="cb305-3"><a href="loop.html#cb305-3" tabindex="-1"></a><span class="co"># Calculate sum of values</span></span>
<span id="cb305-4"><a href="loop.html#cb305-4" tabindex="-1"></a>my_sum <span class="ot">=</span> <span class="dv">0</span>      <span class="co"># initialize value</span></span>
<span id="cb305-5"><a href="loop.html#cb305-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(my_values)){</span>
<span id="cb305-6"><a href="loop.html#cb305-6" tabindex="-1"></a>  my_sum <span class="ot">=</span> my_sum <span class="sc">+</span> my_values[i]</span>
<span id="cb305-7"><a href="loop.html#cb305-7" tabindex="-1"></a>}</span>
<span id="cb305-8"><a href="loop.html#cb305-8" tabindex="-1"></a></span>
<span id="cb305-9"><a href="loop.html#cb305-9" tabindex="-1"></a>my_sum</span>
<span id="cb305-10"><a href="loop.html#cb305-10" tabindex="-1"></a><span class="do">## [1] 20</span></span></code></pre></div>
<p>The structure is the same as our reasoning above. I create a “starting” variable that holds the value 0, and in each iteration, I add the respective indexed element.</p>
</div>
<div id="example-creating-a-vector" class="section level4 unnumbered hasAnchor">
<h4>Example: Creating a Vector<a href="loop.html#example-creating-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Since we use an index that takes a range of values, we can not only access a vector using our index but also progressively create or replace a vector.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="loop.html#cb306-1" tabindex="-1"></a><span class="co"># Calculate column sum</span></span>
<span id="cb306-2"><a href="loop.html#cb306-2" tabindex="-1"></a>my_matrix <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">6</span>)</span>
<span id="cb306-3"><a href="loop.html#cb306-3" tabindex="-1"></a></span>
<span id="cb306-4"><a href="loop.html#cb306-4" tabindex="-1"></a><span class="co"># Inefficient method (appending values)</span></span>
<span id="cb306-5"><a href="loop.html#cb306-5" tabindex="-1"></a>sum_cols <span class="ot">=</span> <span class="fu">c</span>()</span>
<span id="cb306-6"><a href="loop.html#cb306-6" tabindex="-1"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">ncol</span>(my_matrix))){</span>
<span id="cb306-7"><a href="loop.html#cb306-7" tabindex="-1"></a>  sum_col <span class="ot">=</span> <span class="fu">sum</span>(my_matrix[, i])   <span class="co"># calculate i-th column</span></span>
<span id="cb306-8"><a href="loop.html#cb306-8" tabindex="-1"></a>  sum_cols <span class="ot">=</span> <span class="fu">c</span>(sum_cols, sum_col) <span class="co"># append the result</span></span>
<span id="cb306-9"><a href="loop.html#cb306-9" tabindex="-1"></a>}</span>
<span id="cb306-10"><a href="loop.html#cb306-10" tabindex="-1"></a></span>
<span id="cb306-11"><a href="loop.html#cb306-11" tabindex="-1"></a>sum_cols</span>
<span id="cb306-12"><a href="loop.html#cb306-12" tabindex="-1"></a><span class="do">## [1] 10 26 42 58 74 90</span></span>
<span id="cb306-13"><a href="loop.html#cb306-13" tabindex="-1"></a></span>
<span id="cb306-14"><a href="loop.html#cb306-14" tabindex="-1"></a><span class="co"># Efficient method (updating values)</span></span>
<span id="cb306-15"><a href="loop.html#cb306-15" tabindex="-1"></a>sum_cols <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;double&quot;</span>, <span class="at">length =</span> <span class="fu">ncol</span>(my_matrix))</span>
<span id="cb306-16"><a href="loop.html#cb306-16" tabindex="-1"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="fu">seq_along</span>(sum_cols)){</span>
<span id="cb306-17"><a href="loop.html#cb306-17" tabindex="-1"></a>  sum_col <span class="ot">=</span> <span class="fu">sum</span>(my_matrix[, i])   <span class="co"># calculate i-th column</span></span>
<span id="cb306-18"><a href="loop.html#cb306-18" tabindex="-1"></a>  sum_cols[i] <span class="ot">=</span> sum_col <span class="co"># update the result</span></span>
<span id="cb306-19"><a href="loop.html#cb306-19" tabindex="-1"></a>}</span>
<span id="cb306-20"><a href="loop.html#cb306-20" tabindex="-1"></a></span>
<span id="cb306-21"><a href="loop.html#cb306-21" tabindex="-1"></a>sum_cols</span>
<span id="cb306-22"><a href="loop.html#cb306-22" tabindex="-1"></a><span class="do">## [1] 10 26 42 58 74 90</span></span></code></pre></div>
</div>
</div>
<div id="while" class="section level3 hasAnchor" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> While<a href="loop.html#while" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>while</code> loop can be considered a generalization of the <code>for</code> loop. In other words, the <code>for</code> loop is a particular type of <code>while</code> loop.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="loop.html#cb307-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/while_loop.png&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:plot-while-loop"></span>
<img src="images/while_loop.png" alt="Representation of 'while' loop" width="65%" />
<p class="caption">
Figure 14.2: Representation of ‘while’ loop
</p>
</div>
<div id="while-loop-structure" class="section level4 unnumbered hasAnchor">
<h4>While Loop Structure<a href="loop.html#while-loop-structure" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The syntax is more concise than the <code>for</code> loop because we don’t define any counter, placeholder, or a vector of values. The only thing driving a <code>while</code> loop is a logical condition (therefore with <code>TRUE</code> or <code>FALSE</code> values). Again, paraphrasing:</p>
<blockquote>
<p>Repeat the operations enclosed in <code>{ }</code> as long as the <code>&lt;test&gt;</code> condition is <code>TRUE</code>.</p>
</blockquote>
<p>In other words, at each iteration, the <code>&lt;test&gt;</code> condition is evaluated. If it is true, the operation is executed; otherwise, the loop stops.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="loop.html#cb308-1" tabindex="-1"></a><span class="cf">while</span> (<span class="sc">&lt;</span>test<span class="sc">&gt;</span>) {</span>
<span id="cb308-2"><a href="loop.html#cb308-2" tabindex="-1"></a>    <span class="sc">&lt;</span>code<span class="sc">-</span>to<span class="sc">-</span>execute<span class="sc">&gt;</span></span>
<span id="cb308-3"><a href="loop.html#cb308-3" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="example-6" class="section level4 unnumbered hasAnchor">
<h4>Example<a href="loop.html#example-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we want to perform a <strong>countdown</strong>:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="loop.html#cb309-1" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb309-2"><a href="loop.html#cb309-2" tabindex="-1"></a></span>
<span id="cb309-3"><a href="loop.html#cb309-3" tabindex="-1"></a><span class="cf">while</span>(count <span class="sc">&gt;=</span> <span class="dv">0</span>){</span>
<span id="cb309-4"><a href="loop.html#cb309-4" tabindex="-1"></a>  <span class="fu">print</span>(count)</span>
<span id="cb309-5"><a href="loop.html#cb309-5" tabindex="-1"></a>  count <span class="ot">=</span> count <span class="sc">-</span> <span class="dv">1</span> <span class="co"># update variable</span></span>
<span id="cb309-6"><a href="loop.html#cb309-6" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.5</span>) <span class="co"># wait half a second before proceeding, just for the suspense :-)</span></span>
<span id="cb309-7"><a href="loop.html#cb309-7" tabindex="-1"></a>}</span>
<span id="cb309-8"><a href="loop.html#cb309-8" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb309-9"><a href="loop.html#cb309-9" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb309-10"><a href="loop.html#cb309-10" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb309-11"><a href="loop.html#cb309-11" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb309-12"><a href="loop.html#cb309-12" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb309-13"><a href="loop.html#cb309-13" tabindex="-1"></a><span class="do">## [1] 0</span></span></code></pre></div>
<p>When writing a <code>while</code> loop, it’s important to ensure two things:</p>
<ul>
<li>That the condition is <code>TRUE</code> initially; otherwise, the loop won’t even start.</li>
<li>That at some point the condition becomes <code>FALSE</code> (because we have achieved the result or too much time or too many iterations have passed).</li>
</ul>
<p>If the second condition is not met, we end up with what is called an <code>endless loop</code>, like this:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="loop.html#cb310-1" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb310-2"><a href="loop.html#cb310-2" tabindex="-1"></a></span>
<span id="cb310-3"><a href="loop.html#cb310-3" tabindex="-1"></a><span class="co"># Warning: infinite loop</span></span>
<span id="cb310-4"><a href="loop.html#cb310-4" tabindex="-1"></a><span class="cf">while</span>(count <span class="sc">&gt;=</span> <span class="dv">0</span>){</span>
<span id="cb310-5"><a href="loop.html#cb310-5" tabindex="-1"></a>  <span class="fu">print</span>(count)</span>
<span id="cb310-6"><a href="loop.html#cb310-6" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="while-and-for" class="section level4 hasAnchor" number="14.1.2.1">
<h4><span class="header-section-number">14.1.2.1</span> While and For<a href="loop.html#while-and-for" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We previously introduced that <code>for</code> is a particular type of <code>while</code>. Conceptually, we can think of a <code>for</code> loop as a <code>while</code> loop where our counter <code>i</code> increments until it reaches the length of the vector we are iterating over. In other words, we can write a <code>for</code> loop in the following way:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="loop.html#cb311-1" tabindex="-1"></a>names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Alessio&quot;</span>, <span class="st">&quot;Beatrice&quot;</span>, <span class="st">&quot;Carlo&quot;</span>)</span>
<span id="cb311-2"><a href="loop.html#cb311-2" tabindex="-1"></a>i <span class="ot">=</span> <span class="dv">1</span> <span class="co"># counter</span></span>
<span id="cb311-3"><a href="loop.html#cb311-3" tabindex="-1"></a></span>
<span id="cb311-4"><a href="loop.html#cb311-4" tabindex="-1"></a><span class="cf">while</span>(i <span class="sc">&lt;=</span> <span class="fu">length</span>(names)){ <span class="co"># condition</span></span>
<span id="cb311-5"><a href="loop.html#cb311-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(names[i], <span class="st">&quot; is number &quot;</span>, i))</span>
<span id="cb311-6"><a href="loop.html#cb311-6" tabindex="-1"></a>  i <span class="ot">=</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb311-7"><a href="loop.html#cb311-7" tabindex="-1"></a>}</span>
<span id="cb311-8"><a href="loop.html#cb311-8" tabindex="-1"></a><span class="do">## [1] &quot;Alessio is number 1&quot;</span></span>
<span id="cb311-9"><a href="loop.html#cb311-9" tabindex="-1"></a><span class="do">## [1] &quot;Beatrice is number 2&quot;</span></span>
<span id="cb311-10"><a href="loop.html#cb311-10" tabindex="-1"></a><span class="do">## [1] &quot;Carlo is number 3&quot;</span></span></code></pre></div>
</div>
</div>
<div id="next-and-break" class="section level3 hasAnchor" number="14.1.3">
<h3><span class="header-section-number">14.1.3</span> Next and Break<a href="loop.html#next-and-break" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Within an iterative structure, we can execute any type of operation, including conditional structures. Sometimes, it may be useful to skip a particular iteration or stop the iterative loop entirely. In R, such operations can be performed with the <code>next</code> and <code>break</code> commands, respectively.</p>
<ul>
<li><code>next</code> - skips to the next iteration.</li>
<li><code>break</code> - stops the execution of the loop.</li>
</ul>
<div id="example-7" class="section level4 unnumbered hasAnchor">
<h4>Example<a href="loop.html#example-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>with a <code>for</code> loop:</li>
</ul>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="loop.html#cb312-1" tabindex="-1"></a>my_vector <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb312-2"><a href="loop.html#cb312-2" tabindex="-1"></a></span>
<span id="cb312-3"><a href="loop.html#cb312-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(my_vector)){</span>
<span id="cb312-4"><a href="loop.html#cb312-4" tabindex="-1"></a>  <span class="cf">if</span> (my_vector[i] <span class="sc">==</span> <span class="dv">3</span>) <span class="cf">next</span></span>
<span id="cb312-5"><a href="loop.html#cb312-5" tabindex="-1"></a>  </span>
<span id="cb312-6"><a href="loop.html#cb312-6" tabindex="-1"></a>  <span class="cf">if</span> (my_vector[i] <span class="sc">==</span> <span class="dv">5</span>) <span class="cf">break</span></span>
<span id="cb312-7"><a href="loop.html#cb312-7" tabindex="-1"></a>  <span class="fu">print</span>(my_vector[i])</span>
<span id="cb312-8"><a href="loop.html#cb312-8" tabindex="-1"></a>}</span>
<span id="cb312-9"><a href="loop.html#cb312-9" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb312-10"><a href="loop.html#cb312-10" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb312-11"><a href="loop.html#cb312-11" tabindex="-1"></a><span class="do">## [1] 4</span></span></code></pre></div>
<ul>
<li>with a <code>while</code> loop:</li>
</ul>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="loop.html#cb313-1" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">7</span></span>
<span id="cb313-2"><a href="loop.html#cb313-2" tabindex="-1"></a></span>
<span id="cb313-3"><a href="loop.html#cb313-3" tabindex="-1"></a><span class="cf">while</span>(count <span class="sc">&gt;=</span> <span class="dv">0</span>){</span>
<span id="cb313-4"><a href="loop.html#cb313-4" tabindex="-1"></a>  count <span class="ot">=</span> count <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb313-5"><a href="loop.html#cb313-5" tabindex="-1"></a>  <span class="cf">if</span> (count <span class="sc">==</span> <span class="dv">5</span>) <span class="cf">next</span></span>
<span id="cb313-6"><a href="loop.html#cb313-6" tabindex="-1"></a>  </span>
<span id="cb313-7"><a href="loop.html#cb313-7" tabindex="-1"></a>  <span class="cf">if</span> (count <span class="sc">==</span> <span class="dv">2</span>) <span class="cf">break</span></span>
<span id="cb313-8"><a href="loop.html#cb313-8" tabindex="-1"></a>  </span>
<span id="cb313-9"><a href="loop.html#cb313-9" tabindex="-1"></a>  <span class="fu">print</span>(count)</span>
<span id="cb313-10"><a href="loop.html#cb313-10" tabindex="-1"></a>}</span>
<span id="cb313-11"><a href="loop.html#cb313-11" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb313-12"><a href="loop.html#cb313-12" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb313-13"><a href="loop.html#cb313-13" tabindex="-1"></a><span class="do">## [1] 3</span></span></code></pre></div>
</div>
</div>
</div>
<div id="nested-loops" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Nested Loops<a href="loop.html#nested-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once you understand the iterative structure, it’s easy to expand its potential by nesting one loop inside another. You can have as many <em>nested</em> loops as necessary, but this increases not only the complexity but also the execution time. To better understand what happens inside a nested loop, it’s helpful to visualize the indices:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="loop.html#cb314-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){ <span class="co"># level 1</span></span>
<span id="cb314-2"><a href="loop.html#cb314-2" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){ <span class="co"># level 2</span></span>
<span id="cb314-3"><a href="loop.html#cb314-3" tabindex="-1"></a>    <span class="cf">for</span>(l <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){ <span class="co"># level 3</span></span>
<span id="cb314-4"><a href="loop.html#cb314-4" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">paste</span>(i, j, l))</span>
<span id="cb314-5"><a href="loop.html#cb314-5" tabindex="-1"></a>    }</span>
<span id="cb314-6"><a href="loop.html#cb314-6" tabindex="-1"></a>  }</span>
<span id="cb314-7"><a href="loop.html#cb314-7" tabindex="-1"></a>}</span>
<span id="cb314-8"><a href="loop.html#cb314-8" tabindex="-1"></a><span class="do">## [1] &quot;1 1 1&quot;</span></span>
<span id="cb314-9"><a href="loop.html#cb314-9" tabindex="-1"></a><span class="do">## [1] &quot;1 1 2&quot;</span></span>
<span id="cb314-10"><a href="loop.html#cb314-10" tabindex="-1"></a><span class="do">## [1] &quot;1 1 3&quot;</span></span>
<span id="cb314-11"><a href="loop.html#cb314-11" tabindex="-1"></a><span class="do">## [1] &quot;1 2 1&quot;</span></span>
<span id="cb314-12"><a href="loop.html#cb314-12" tabindex="-1"></a><span class="do">## [1] &quot;1 2 2&quot;</span></span>
<span id="cb314-13"><a href="loop.html#cb314-13" tabindex="-1"></a><span class="do">## [1] &quot;1 2 3&quot;</span></span>
<span id="cb314-14"><a href="loop.html#cb314-14" tabindex="-1"></a><span class="do">## [1] &quot;1 3 1&quot;</span></span>
<span id="cb314-15"><a href="loop.html#cb314-15" tabindex="-1"></a><span class="do">## [1] &quot;1 3 2&quot;</span></span>
<span id="cb314-16"><a href="loop.html#cb314-16" tabindex="-1"></a><span class="do">## [1] &quot;1 3 3&quot;</span></span>
<span id="cb314-17"><a href="loop.html#cb314-17" tabindex="-1"></a><span class="do">## [1] &quot;2 1 1&quot;</span></span>
<span id="cb314-18"><a href="loop.html#cb314-18" tabindex="-1"></a><span class="do">## [1] &quot;2 1 2&quot;</span></span>
<span id="cb314-19"><a href="loop.html#cb314-19" tabindex="-1"></a><span class="do">## [1] &quot;2 1 3&quot;</span></span>
<span id="cb314-20"><a href="loop.html#cb314-20" tabindex="-1"></a><span class="do">## [1] &quot;2 2 1&quot;</span></span>
<span id="cb314-21"><a href="loop.html#cb314-21" tabindex="-1"></a><span class="do">## [1] &quot;2 2 2&quot;</span></span>
<span id="cb314-22"><a href="loop.html#cb314-22" tabindex="-1"></a><span class="do">## [1] &quot;2 2 3&quot;</span></span>
<span id="cb314-23"><a href="loop.html#cb314-23" tabindex="-1"></a><span class="do">## [1] &quot;2 3 1&quot;</span></span>
<span id="cb314-24"><a href="loop.html#cb314-24" tabindex="-1"></a><span class="do">## [1] &quot;2 3 2&quot;</span></span>
<span id="cb314-25"><a href="loop.html#cb314-25" tabindex="-1"></a><span class="do">## [1] &quot;2 3 3&quot;</span></span>
<span id="cb314-26"><a href="loop.html#cb314-26" tabindex="-1"></a><span class="do">## [1] &quot;3 1 1&quot;</span></span>
<span id="cb314-27"><a href="loop.html#cb314-27" tabindex="-1"></a><span class="do">## [1] &quot;3 1 2&quot;</span></span>
<span id="cb314-28"><a href="loop.html#cb314-28" tabindex="-1"></a><span class="do">## [1] &quot;3 1 3&quot;</span></span>
<span id="cb314-29"><a href="loop.html#cb314-29" tabindex="-1"></a><span class="do">## [1] &quot;3 2 1&quot;</span></span>
<span id="cb314-30"><a href="loop.html#cb314-30" tabindex="-1"></a><span class="do">## [1] &quot;3 2 2&quot;</span></span>
<span id="cb314-31"><a href="loop.html#cb314-31" tabindex="-1"></a><span class="do">## [1] &quot;3 2 3&quot;</span></span>
<span id="cb314-32"><a href="loop.html#cb314-32" tabindex="-1"></a><span class="do">## [1] &quot;3 3 1&quot;</span></span>
<span id="cb314-33"><a href="loop.html#cb314-33" tabindex="-1"></a><span class="do">## [1] &quot;3 3 2&quot;</span></span>
<span id="cb314-34"><a href="loop.html#cb314-34" tabindex="-1"></a><span class="do">## [1] &quot;3 3 3&quot;</span></span></code></pre></div>
<p>Looking at the indices, it’s clear that the innermost loop completes first before moving outward. The logic is as follows:</p>
<ul>
<li>In the first iteration, we enter the outermost loop <code>i = 1</code>, then into the inner loop <code>j = 1</code>, and into the innermost loop <code>l = 1</code>.</li>
<li>In the second iteration, we are locked in the inner loop, so both <code>i</code> and <code>j</code> remain 1, while <code>l</code> becomes 2.</li>
<li>When the innermost loop <code>l</code> finishes, <code>i</code> will still be 1, but <code>j</code> will move to 2, and so on.</li>
</ul>
<p>An important aspect is the use of different indices; indeed, <code>i</code>, <code>j</code>, and <code>l</code> take different values at each iteration, and if we used the same index, we wouldn’t get the desired result.</p>
<div id="exercises-16" class="section level3 unnumbered hasAnchor">
<h3>Exercises<a href="loop.html#exercises-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Write a function that calculates the average of a numeric vector using a <code>for</code> loop.</li>
<li>Write a function that, given a numeric vector, returns the maximum and minimum values using a <code>for</code> loop (pay attention to the initialization value).</li>
<li>Write a function that, for each iteration, generates <span class="math inline">\(n\)</span> observations from a normal distribution (<code>rnorm()</code> function) with mean <span class="math inline">\(mu\)</span> and standard deviation <span class="math inline">\(sigma\)</span>, and saves the mean of each sample. The function parameters will be <span class="math inline">\(n\)</span>, <span class="math inline">\(mu\)</span>, <span class="math inline">\(sigma\)</span>, and <span class="math inline">\(iter\)</span> (number of iterations).</li>
</ol>
</div>
</div>
<div id="apply-family" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Apply Family<a href="loop.html#apply-family" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There is a family of extremely powerful and versatile functions in R called <code>*apply</code>. The asterisk suggests a range of variants available in R that, despite their common structure and function, have different objectives:</p>
<ul>
<li><code>apply</code>: given a dataframe (or matrix), applies the same function to each row or column.</li>
<li><code>tapply</code>: given a vector of values, applies the same function to each group that has been defined.</li>
<li><code>lapply</code>: applies the same function to each element of a list. Returns a list.</li>
<li><code>sapply</code>: applies the same function to each element of a list. If possible, it returns a simplified object (a vector, matrix, or array).</li>
<li><code>vapply</code>: similar to <code>sapply</code>, but requires you to define the type of data to be returned.</li>
<li><code>mapply</code>: the multivariate version. Allows you to apply a function to multiple lists of elements.</li>
</ul>
<p>Before illustrating the various functions, it’s helpful to understand the general structure. Generally, these functions accept a <strong>list</strong> object (a collection of elements) and a <strong>function</strong>. The idea is to have a function that takes other functions as arguments and applies the argument-function to each input element. These functions, especially in R, are often preferred over using <code>for</code> loops due to their speed, compactness, and versatility.</p>
<p>Hadley Wickam[^talk-map] provides a great example to understand the difference between <code>loop</code> and <code>*apply</code>. Imagine you have a series of vectors and want to apply some functions to each vector; we could set up a simple loop in this way:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="loop.html#cb315-1" tabindex="-1"></a>list_vect <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb315-2"><a href="loop.html#cb315-2" tabindex="-1"></a>  <span class="at">vect1 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb315-3"><a href="loop.html#cb315-3" tabindex="-1"></a>  <span class="at">vect2 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb315-4"><a href="loop.html#cb315-4" tabindex="-1"></a>  <span class="at">vect3 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb315-5"><a href="loop.html#cb315-5" tabindex="-1"></a>  <span class="at">vect4 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb315-6"><a href="loop.html#cb315-6" tabindex="-1"></a>  <span class="at">vect5 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb315-7"><a href="loop.html#cb315-7" tabindex="-1"></a>)</span>
<span id="cb315-8"><a href="loop.html#cb315-8" tabindex="-1"></a></span>
<span id="cb315-9"><a href="loop.html#cb315-9" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(list_vect))</span>
<span id="cb315-10"><a href="loop.html#cb315-10" tabindex="-1"></a>medians <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(list_vect))</span>
<span id="cb315-11"><a href="loop.html#cb315-11" tabindex="-1"></a>st_devs <span class="ot">=</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(list_vect))</span>
<span id="cb315-12"><a href="loop.html#cb315-12" tabindex="-1"></a></span>
<span id="cb315-13"><a href="loop.html#cb315-13" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(list_vect)){</span>
<span id="cb315-14"><a href="loop.html#cb315-14" tabindex="-1"></a>  means[i] <span class="ot">=</span> <span class="fu">mean</span>(list_vect[[i]])</span>
<span id="cb315-15"><a href="loop.html#cb315-15" tabindex="-1"></a>  medians[i] <span class="ot">=</span> <span class="fu">median</span>(list_vect[[i]])</span>
<span id="cb315-16"><a href="loop.html#cb315-16" tabindex="-1"></a>  st_devs[i] <span class="ot">=</span> <span class="fu">sd</span>(list_vect[[i]])</span>
<span id="cb315-17"><a href="loop.html#cb315-17" tabindex="-1"></a>}</span></code></pre></div>
<p>Although it is perfectly correct, this writing has several problems:</p>
<ul>
<li>It is very redundant. Between calculating the mean, median, and standard deviation, the only thing that changes is the function being applied, while for each, we must pre-allocate a variable, set up indexing based on the iteration to select the list element, and store the result. To improve this, we can wrap the entire structure (pre-allocation, indexing, and storing) into a function and use this function with the list as input and the function to apply. Using the <code>sapply</code> function:</li>
</ul>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="loop.html#cb316-1" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, mean)</span>
<span id="cb316-2"><a href="loop.html#cb316-2" tabindex="-1"></a>means</span>
<span id="cb316-3"><a href="loop.html#cb316-3" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb316-4"><a href="loop.html#cb316-4" tabindex="-1"></a><span class="do">## [1] -0.1744844</span></span>
<span id="cb316-5"><a href="loop.html#cb316-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-6"><a href="loop.html#cb316-6" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb316-7"><a href="loop.html#cb316-7" tabindex="-1"></a><span class="do">## [1] -0.001581971</span></span>
<span id="cb316-8"><a href="loop.html#cb316-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-9"><a href="loop.html#cb316-9" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb316-10"><a href="loop.html#cb316-10" tabindex="-1"></a><span class="do">## [1] 0.003746107</span></span>
<span id="cb316-11"><a href="loop.html#cb316-11" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-12"><a href="loop.html#cb316-12" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb316-13"><a href="loop.html#cb316-13" tabindex="-1"></a><span class="do">## [1] -0.1040844</span></span>
<span id="cb316-14"><a href="loop.html#cb316-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-15"><a href="loop.html#cb316-15" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb316-16"><a href="loop.html#cb316-16" tabindex="-1"></a><span class="do">## [1] 0.2978849</span></span>
<span id="cb316-17"><a href="loop.html#cb316-17" tabindex="-1"></a>medians <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, median)</span>
<span id="cb316-18"><a href="loop.html#cb316-18" tabindex="-1"></a>medians</span>
<span id="cb316-19"><a href="loop.html#cb316-19" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb316-20"><a href="loop.html#cb316-20" tabindex="-1"></a><span class="do">## [1] -0.1336871</span></span>
<span id="cb316-21"><a href="loop.html#cb316-21" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-22"><a href="loop.html#cb316-22" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb316-23"><a href="loop.html#cb316-23" tabindex="-1"></a><span class="do">## [1] 0.08244486</span></span>
<span id="cb316-24"><a href="loop.html#cb316-24" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-25"><a href="loop.html#cb316-25" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb316-26"><a href="loop.html#cb316-26" tabindex="-1"></a><span class="do">## [1] 0.002455108</span></span>
<span id="cb316-27"><a href="loop.html#cb316-27" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-28"><a href="loop.html#cb316-28" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb316-29"><a href="loop.html#cb316-29" tabindex="-1"></a><span class="do">## [1] -0.00886783</span></span>
<span id="cb316-30"><a href="loop.html#cb316-30" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-31"><a href="loop.html#cb316-31" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb316-32"><a href="loop.html#cb316-32" tabindex="-1"></a><span class="do">## [1] 0.2095848</span></span>
<span id="cb316-33"><a href="loop.html#cb316-33" tabindex="-1"></a>st_devs <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, sd)</span>
<span id="cb316-34"><a href="loop.html#cb316-34" tabindex="-1"></a>st_devs</span>
<span id="cb316-35"><a href="loop.html#cb316-35" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb316-36"><a href="loop.html#cb316-36" tabindex="-1"></a><span class="do">## [1] 1.028626</span></span>
<span id="cb316-37"><a href="loop.html#cb316-37" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-38"><a href="loop.html#cb316-38" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb316-39"><a href="loop.html#cb316-39" tabindex="-1"></a><span class="do">## [1] 1.056527</span></span>
<span id="cb316-40"><a href="loop.html#cb316-40" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-41"><a href="loop.html#cb316-41" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb316-42"><a href="loop.html#cb316-42" tabindex="-1"></a><span class="do">## [1] 1.027976</span></span>
<span id="cb316-43"><a href="loop.html#cb316-43" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-44"><a href="loop.html#cb316-44" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb316-45"><a href="loop.html#cb316-45" tabindex="-1"></a><span class="do">## [1] 0.9351077</span></span>
<span id="cb316-46"><a href="loop.html#cb316-46" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb316-47"><a href="loop.html#cb316-47" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb316-48"><a href="loop.html#cb316-48" tabindex="-1"></a><span class="do">## [1] 1.04055</span></span></code></pre></div>
<p>As you can see, the code becomes extremely compact, clean, and easy to read.</p>
<div id="which-functions-to-apply" class="section level3 hasAnchor" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> Which Functions to Apply?<a href="loop.html#which-functions-to-apply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before detailing each <code>*apply</code> function, it’s important to understand what types of functions can be used within this family. In general, any function can be applied, but for convenience, we can distinguish them into:</p>
<ul>
<li>Functions already available in R.</li>
<li>Custom functions (created and saved in the main environment).</li>
<li><strong>Anonymous</strong> functions.</li>
</ul>
<p>In the previous example, we used the <code>mean</code> function simply by writing <code>lapply(list_vec, mean)</code>. This is possible because <code>mean</code> requires only one argument. However, if we wanted to apply more complex functions or add arguments, we could use the more general syntax:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="loop.html#cb317-1" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, <span class="cf">function</span>(x) <span class="fu">mean</span>(x))</span>
<span id="cb317-2"><a href="loop.html#cb317-2" tabindex="-1"></a>means</span>
<span id="cb317-3"><a href="loop.html#cb317-3" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb317-4"><a href="loop.html#cb317-4" tabindex="-1"></a><span class="do">## [1] -0.1744844</span></span>
<span id="cb317-5"><a href="loop.html#cb317-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb317-6"><a href="loop.html#cb317-6" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb317-7"><a href="loop.html#cb317-7" tabindex="-1"></a><span class="do">## [1] -0.001581971</span></span>
<span id="cb317-8"><a href="loop.html#cb317-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb317-9"><a href="loop.html#cb317-9" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb317-10"><a href="loop.html#cb317-10" tabindex="-1"></a><span class="do">## [1] 0.003746107</span></span>
<span id="cb317-11"><a href="loop.html#cb317-11" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb317-12"><a href="loop.html#cb317-12" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb317-13"><a href="loop.html#cb317-13" tabindex="-1"></a><span class="do">## [1] -0.1040844</span></span>
<span id="cb317-14"><a href="loop.html#cb317-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb317-15"><a href="loop.html#cb317-15" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb317-16"><a href="loop.html#cb317-16" tabindex="-1"></a><span class="do">## [1] 0.2978849</span></span></code></pre></div>
<p>The only difference here is that we defined an <strong>anonymous</strong> function with the syntax <code>function(x) ...</code>. This is interpreted as <em>“for each element of <code>list_vect</code>, treat it as <code>x</code> and apply the <code>mean()</code> function to each element of <code>list_vect</code>.”</em> Anonymous functions allow us to write functions that aren’t saved or available in R and apply them directly to a series of elements. We can also use more complex functions, such as centering each element of <code>list_vect</code>:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="loop.html#cb318-1" tabindex="-1"></a>centered_list <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, <span class="cf">function</span>(x) x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb318-2"><a href="loop.html#cb318-2" tabindex="-1"></a>centered_list</span>
<span id="cb318-3"><a href="loop.html#cb318-3" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb318-4"><a href="loop.html#cb318-4" tabindex="-1"></a><span class="do">##   [1]  0.052024420  0.726941033  0.523133907  0.534116649  1.072538094</span></span>
<span id="cb318-5"><a href="loop.html#cb318-5" tabindex="-1"></a><span class="do">##   [6] -1.748085116  0.436228769  1.090050776  0.188256343  1.904447568</span></span>
<span id="cb318-6"><a href="loop.html#cb318-6" tabindex="-1"></a><span class="do">##  [11] -0.907720449 -0.098340775  0.356479804  1.683026192  1.778954510</span></span>
<span id="cb318-7"><a href="loop.html#cb318-7" tabindex="-1"></a><span class="do">##  [16] -1.666991209  1.797794611  0.305873422  1.655606875  1.687802692</span></span>
<span id="cb318-8"><a href="loop.html#cb318-8" tabindex="-1"></a><span class="do">##  [21] -0.767958869 -0.011200606 -0.926640234  1.382599658 -1.450454139</span></span>
<span id="cb318-9"><a href="loop.html#cb318-9" tabindex="-1"></a><span class="do">##  [26]  0.279862739 -1.280958942 -0.179531732  0.080784364  1.275153032</span></span>
<span id="cb318-10"><a href="loop.html#cb318-10" tabindex="-1"></a><span class="do">##  [31] -1.789340704 -1.273459981  1.193927825 -1.246932674 -0.430047712</span></span>
<span id="cb318-11"><a href="loop.html#cb318-11" tabindex="-1"></a><span class="do">##  [36] -1.408989494 -1.111447945 -1.280200478  0.087413286  0.679220848</span></span>
<span id="cb318-12"><a href="loop.html#cb318-12" tabindex="-1"></a><span class="do">##  [41]  0.290873113  1.934698137 -0.170632058  2.294484562  0.140106914</span></span>
<span id="cb318-13"><a href="loop.html#cb318-13" tabindex="-1"></a><span class="do">##  [46] -0.617669647  1.649999618 -0.551072804  0.486863447  0.866448514</span></span>
<span id="cb318-14"><a href="loop.html#cb318-14" tabindex="-1"></a><span class="do">##  [51] -0.325806393 -2.081384947  0.218225732 -0.194333682 -0.785738000</span></span>
<span id="cb318-15"><a href="loop.html#cb318-15" tabindex="-1"></a><span class="do">##  [56]  0.278250713  0.601773540  0.004002865 -1.374655893 -1.331115539</span></span>
<span id="cb318-16"><a href="loop.html#cb318-16" tabindex="-1"></a><span class="do">##  [61]  0.190527940 -0.010879909  0.566417661 -0.582226517  0.405902013</span></span>
<span id="cb318-17"><a href="loop.html#cb318-17" tabindex="-1"></a><span class="do">##  [66] -0.809129005  0.739565224  1.791236297 -0.077479735 -0.881394205</span></span>
<span id="cb318-18"><a href="loop.html#cb318-18" tabindex="-1"></a><span class="do">##  [71] -0.173747353  0.131494431 -1.223069551  1.664700735 -0.864902716</span></span>
<span id="cb318-19"><a href="loop.html#cb318-19" tabindex="-1"></a><span class="do">##  [76] -0.062460642 -0.824657046 -1.218058185  1.156489655  0.535425340</span></span>
<span id="cb318-20"><a href="loop.html#cb318-20" tabindex="-1"></a><span class="do">##  [81] -0.163024811 -0.468903190 -1.992400872  0.807773400  0.029570256</span></span>
<span id="cb318-21"><a href="loop.html#cb318-21" tabindex="-1"></a><span class="do">##  [86] -1.065542698  0.708443728 -1.413780392 -0.816480128  0.657745237</span></span>
<span id="cb318-22"><a href="loop.html#cb318-22" tabindex="-1"></a><span class="do">##  [91]  0.985102777 -0.119180161  0.121026086  0.909668900  0.189469398</span></span>
<span id="cb318-23"><a href="loop.html#cb318-23" tabindex="-1"></a><span class="do">##  [96]  0.052482555 -0.472289289 -0.693373923 -0.334215899 -1.903099951</span></span>
<span id="cb318-24"><a href="loop.html#cb318-24" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb318-25"><a href="loop.html#cb318-25" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb318-26"><a href="loop.html#cb318-26" tabindex="-1"></a><span class="do">##   [1] -0.25875450  0.45192195 -0.14129965 -0.48513950 -1.19419119  0.04852296</span></span>
<span id="cb318-27"><a href="loop.html#cb318-27" tabindex="-1"></a><span class="do">##   [7] -0.12494971 -2.69913307 -0.56923136  0.59317969  0.48855867 -0.12521792</span></span>
<span id="cb318-28"><a href="loop.html#cb318-28" tabindex="-1"></a><span class="do">##  [13] -1.25761789  0.20287395 -1.91532248  1.67432109  0.47237159  1.41569682</span></span>
<span id="cb318-29"><a href="loop.html#cb318-29" tabindex="-1"></a><span class="do">##  [19]  0.08588055 -1.80072157  0.75532561 -0.31036112 -1.73097833 -2.13698056</span></span>
<span id="cb318-30"><a href="loop.html#cb318-30" tabindex="-1"></a><span class="do">##  [25]  2.36738038  0.48633857  1.09481961  0.30449038  1.01688141  2.45517490</span></span>
<span id="cb318-31"><a href="loop.html#cb318-31" tabindex="-1"></a><span class="do">##  [31] -0.24403885  0.54310131  0.19845858 -2.06958035  0.51416551 -0.40417991</span></span>
<span id="cb318-32"><a href="loop.html#cb318-32" tabindex="-1"></a><span class="do">##  [37]  0.35777998 -0.32998890  0.08217311 -0.25995052 -0.87586827  0.74289078</span></span>
<span id="cb318-33"><a href="loop.html#cb318-33" tabindex="-1"></a><span class="do">##  [43] -2.68138122 -0.94789651  0.44784397 -1.28724749 -0.15622349  0.34939757</span></span>
<span id="cb318-34"><a href="loop.html#cb318-34" tabindex="-1"></a><span class="do">##  [49] -0.05804050  1.47831075 -0.65258270 -0.25523286 -1.25245596  0.77262514</span></span>
<span id="cb318-35"><a href="loop.html#cb318-35" tabindex="-1"></a><span class="do">##  [55] -0.90976997 -0.69172340 -0.61608640  0.76370516 -1.08557639 -0.39821755</span></span>
<span id="cb318-36"><a href="loop.html#cb318-36" tabindex="-1"></a><span class="do">##  [61]  0.82937843  0.35700165  0.16072076  0.95697716 -0.33806032 -0.72579950</span></span>
<span id="cb318-37"><a href="loop.html#cb318-37" tabindex="-1"></a><span class="do">##  [67] -1.69622426  1.95572036  2.66831987  2.06496139  0.82036535 -0.07806814</span></span>
<span id="cb318-38"><a href="loop.html#cb318-38" tabindex="-1"></a><span class="do">##  [73] -0.48786746  0.84930072 -0.95746280  0.93026931  0.38254698  1.49618576</span></span>
<span id="cb318-39"><a href="loop.html#cb318-39" tabindex="-1"></a><span class="do">##  [79] -0.46612240  0.26273926 -0.99102667 -1.06179903  0.27586663  0.94692452</span></span>
<span id="cb318-40"><a href="loop.html#cb318-40" tabindex="-1"></a><span class="do">##  [85]  0.72777105 -0.25293070  1.48676214  0.23186813  0.27958462  0.14862272</span></span>
<span id="cb318-41"><a href="loop.html#cb318-41" tabindex="-1"></a><span class="do">##  [91] -1.19470741  0.09171824  1.22085175 -0.55991059  0.33846373 -1.53521819</span></span>
<span id="cb318-42"><a href="loop.html#cb318-42" tabindex="-1"></a><span class="do">##  [97] -0.23854774  0.51644745 -0.23727325  0.58340054</span></span>
<span id="cb318-43"><a href="loop.html#cb318-43" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb318-44"><a href="loop.html#cb318-44" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb318-45"><a href="loop.html#cb318-45" tabindex="-1"></a><span class="do">##   [1]  0.2664491638 -1.3469963272 -0.8526350420 -0.4113540385 -0.6698965617</span></span>
<span id="cb318-46"><a href="loop.html#cb318-46" tabindex="-1"></a><span class="do">##   [6] -0.1069834877 -0.9277972315  0.4348533514 -0.0158461161 -0.6496568470</span></span>
<span id="cb318-47"><a href="loop.html#cb318-47" tabindex="-1"></a><span class="do">##  [11]  1.3404006827  0.3308553677 -0.0008524137  1.0932070221  1.1595245506</span></span>
<span id="cb318-48"><a href="loop.html#cb318-48" tabindex="-1"></a><span class="do">##  [16]  0.0970402348 -0.3954985959 -0.4148154462 -0.9173273893 -0.5441391984</span></span>
<span id="cb318-49"><a href="loop.html#cb318-49" tabindex="-1"></a><span class="do">##  [21]  0.1176161927  1.7239915983 -0.0479376631  0.5410962859  1.9136056395</span></span>
<span id="cb318-50"><a href="loop.html#cb318-50" tabindex="-1"></a><span class="do">##  [26] -0.2403162233  1.5678772409  0.4771039676  0.0388510442  0.4360775197</span></span>
<span id="cb318-51"><a href="loop.html#cb318-51" tabindex="-1"></a><span class="do">##  [31] -1.8843109374 -1.7278160519  1.8794222142 -0.0350334621  0.9952978517</span></span>
<span id="cb318-52"><a href="loop.html#cb318-52" tabindex="-1"></a><span class="do">##  [36]  0.2965731726 -0.0089397169 -0.2440504016 -1.7747293817 -0.1599453739</span></span>
<span id="cb318-53"><a href="loop.html#cb318-53" tabindex="-1"></a><span class="do">##  [41]  1.9116204426  1.1063735070 -1.9894549474  0.8106197600  1.0945052782</span></span>
<span id="cb318-54"><a href="loop.html#cb318-54" tabindex="-1"></a><span class="do">##  [46] -1.4444401450  1.2114915468 -0.7866311249 -2.0708321586  0.3306083127</span></span>
<span id="cb318-55"><a href="loop.html#cb318-55" tabindex="-1"></a><span class="do">##  [51]  0.2571921978 -0.4380882424 -1.8767536475 -0.8067906332  0.3285759849</span></span>
<span id="cb318-56"><a href="loop.html#cb318-56" tabindex="-1"></a><span class="do">##  [56]  0.0083665339  0.8463602573 -1.5346139219 -0.0353043768  1.4238938000</span></span>
<span id="cb318-57"><a href="loop.html#cb318-57" tabindex="-1"></a><span class="do">##  [61] -0.9307764997  1.0018625824 -0.0897035610  0.9342787542 -0.5220418242</span></span>
<span id="cb318-58"><a href="loop.html#cb318-58" tabindex="-1"></a><span class="do">##  [66] -0.9382625616  1.2278393538 -0.2433379966  0.2694431409  1.4270790033</span></span>
<span id="cb318-59"><a href="loop.html#cb318-59" tabindex="-1"></a><span class="do">##  [71] -1.1447635626  0.8922605510  0.0790918016  0.3463267640 -1.2620371186</span></span>
<span id="cb318-60"><a href="loop.html#cb318-60" tabindex="-1"></a><span class="do">##  [76]  0.8359400483 -1.2621666167  0.1493675938 -0.4874471285  2.2071080499</span></span>
<span id="cb318-61"><a href="loop.html#cb318-61" tabindex="-1"></a><span class="do">##  [81]  0.0770783378  0.7123603570  1.0507096270  0.2724235769 -0.4240092719</span></span>
<span id="cb318-62"><a href="loop.html#cb318-62" tabindex="-1"></a><span class="do">##  [86]  2.5187562528 -0.0017295860 -1.5659889251 -1.9915300574 -1.4957999457</span></span>
<span id="cb318-63"><a href="loop.html#cb318-63" tabindex="-1"></a><span class="do">##  [91]  0.2514953082 -0.8182432673  0.8301238234 -1.1562445178 -0.1441958015</span></span>
<span id="cb318-64"><a href="loop.html#cb318-64" tabindex="-1"></a><span class="do">##  [96]  1.1723315781  0.1831991812 -0.6985203200 -0.4631891217 -0.4787516183</span></span>
<span id="cb318-65"><a href="loop.html#cb318-65" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb318-66"><a href="loop.html#cb318-66" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb318-67"><a href="loop.html#cb318-67" tabindex="-1"></a><span class="do">##   [1]  1.31014158  1.09819466  1.64324210  0.39593137  0.61463274 -0.43683054</span></span>
<span id="cb318-68"><a href="loop.html#cb318-68" tabindex="-1"></a><span class="do">##   [7] -0.56982943  0.78423560  0.29079922 -1.28144712 -0.95320981  0.47832305</span></span>
<span id="cb318-69"><a href="loop.html#cb318-69" tabindex="-1"></a><span class="do">##  [13] -0.89843251  0.06142016  0.09834140 -0.93750994 -0.22114701 -0.50447853</span></span>
<span id="cb318-70"><a href="loop.html#cb318-70" tabindex="-1"></a><span class="do">##  [19]  1.62135004  0.40054994  0.50377989  0.85258426  0.01601205 -0.98150469</span></span>
<span id="cb318-71"><a href="loop.html#cb318-71" tabindex="-1"></a><span class="do">##  [25]  0.01879710  0.56958632  0.10405552  0.72039850 -0.54796577  0.55132606</span></span>
<span id="cb318-72"><a href="loop.html#cb318-72" tabindex="-1"></a><span class="do">##  [31] -0.07849753 -0.70235630 -1.70546632 -0.67537030 -1.88424294  1.10131999</span></span>
<span id="cb318-73"><a href="loop.html#cb318-73" tabindex="-1"></a><span class="do">##  [37] -0.93803709  0.30884776  0.38639004  0.26406936 -1.48220109  0.64941069</span></span>
<span id="cb318-74"><a href="loop.html#cb318-74" tabindex="-1"></a><span class="do">##  [43] -1.26245228 -1.01196361  0.26655677  1.61573387 -0.24499703 -1.86615753</span></span>
<span id="cb318-75"><a href="loop.html#cb318-75" tabindex="-1"></a><span class="do">##  [49] -0.74331502 -1.66625739  1.19375590 -1.29834857  1.03931548  0.09209179</span></span>
<span id="cb318-76"><a href="loop.html#cb318-76" tabindex="-1"></a><span class="do">##  [55]  0.36417167  1.25497932  1.27163836 -1.08423536  0.32463046  1.23838613</span></span>
<span id="cb318-77"><a href="loop.html#cb318-77" tabindex="-1"></a><span class="do">##  [61]  0.61505477 -1.39306979 -1.01347083 -0.65377057 -0.67234873 -0.15951329</span></span>
<span id="cb318-78"><a href="loop.html#cb318-78" tabindex="-1"></a><span class="do">##  [67] -1.09475421 -1.24828431  0.44936851 -0.81031734  0.48577901 -0.44783374</span></span>
<span id="cb318-79"><a href="loop.html#cb318-79" tabindex="-1"></a><span class="do">##  [73]  0.13878656 -0.42861642  1.05753379  0.80005894 -0.56816795  1.42707901</span></span>
<span id="cb318-80"><a href="loop.html#cb318-80" tabindex="-1"></a><span class="do">##  [79] -0.24334500 -0.42674961  0.83810754  0.25860309  0.76271285 -0.83189895</span></span>
<span id="cb318-81"><a href="loop.html#cb318-81" tabindex="-1"></a><span class="do">##  [85] -1.83769866  0.13777046 -0.34121388  1.28152635  0.02692627  0.65523055</span></span>
<span id="cb318-82"><a href="loop.html#cb318-82" tabindex="-1"></a><span class="do">##  [91] -0.34789338 -1.27102060  0.10899483  1.00604579 -0.82845156  0.66493483</span></span>
<span id="cb318-83"><a href="loop.html#cb318-83" tabindex="-1"></a><span class="do">##  [97]  0.41550756  1.49611518  2.54392757 -0.08039012</span></span>
<span id="cb318-84"><a href="loop.html#cb318-84" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb318-85"><a href="loop.html#cb318-85" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb318-86"><a href="loop.html#cb318-86" tabindex="-1"></a><span class="do">##   [1] -0.97244116 -0.05975831  0.24720098 -0.74673643  0.67336181 -1.84504878</span></span>
<span id="cb318-87"><a href="loop.html#cb318-87" tabindex="-1"></a><span class="do">##   [7] -0.10088763  0.54085362  0.19802171 -0.21846188 -1.35504038 -1.00568442</span></span>
<span id="cb318-88"><a href="loop.html#cb318-88" tabindex="-1"></a><span class="do">##  [13] -1.66143029  0.32770743 -0.87494585  1.42240563  1.33871389 -0.49724504</span></span>
<span id="cb318-89"><a href="loop.html#cb318-89" tabindex="-1"></a><span class="do">##  [19]  0.23183020 -1.28236562  0.94682403  0.15097940 -0.08996773 -1.87922549</span></span>
<span id="cb318-90"><a href="loop.html#cb318-90" tabindex="-1"></a><span class="do">##  [25]  0.56434072  1.01141751  0.59054641  0.90708246  1.81054234  1.52125463</span></span>
<span id="cb318-91"><a href="loop.html#cb318-91" tabindex="-1"></a><span class="do">##  [31]  1.59879629  0.65703478 -1.36100263  1.52636999 -0.67568978  1.18846185</span></span>
<span id="cb318-92"><a href="loop.html#cb318-92" tabindex="-1"></a><span class="do">##  [37] -0.71371197 -0.62705645 -0.34696123  1.81946720 -0.14410534  0.77391802</span></span>
<span id="cb318-93"><a href="loop.html#cb318-93" tabindex="-1"></a><span class="do">##  [43] -1.40734286 -0.22652747 -0.08663243  0.24917797  0.10482833  0.40064474</span></span>
<span id="cb318-94"><a href="loop.html#cb318-94" tabindex="-1"></a><span class="do">##  [49] -0.11465530  1.67669566  0.89489601 -1.18726409 -0.69802085 -0.34089280</span></span>
<span id="cb318-95"><a href="loop.html#cb318-95" tabindex="-1"></a><span class="do">##  [55] -0.31607492 -1.19132141 -1.34752712  0.06417591  0.57868314  1.93393514</span></span>
<span id="cb318-96"><a href="loop.html#cb318-96" tabindex="-1"></a><span class="do">##  [61]  1.29099212  0.28454888 -1.05159708 -0.12011029 -1.39846790 -0.34956404</span></span>
<span id="cb318-97"><a href="loop.html#cb318-97" tabindex="-1"></a><span class="do">##  [67]  1.15216589  0.47442520  0.42866114  1.24934339 -0.17264100 -0.18756486</span></span>
<span id="cb318-98"><a href="loop.html#cb318-98" tabindex="-1"></a><span class="do">##  [73]  1.52868692 -0.50630793 -0.52108509 -2.27123722  0.10655986 -1.07339635</span></span>
<span id="cb318-99"><a href="loop.html#cb318-99" tabindex="-1"></a><span class="do">##  [79] -0.53370249  1.60949570 -0.08346146 -1.11549234 -1.60046934 -0.70496768</span></span>
<span id="cb318-100"><a href="loop.html#cb318-100" tabindex="-1"></a><span class="do">##  [85]  2.72371679 -0.15590380 -1.05128938  0.86727635  0.28486870 -1.34945579</span></span>
<span id="cb318-101"><a href="loop.html#cb318-101" tabindex="-1"></a><span class="do">##  [91] -0.81570377 -1.37540652  0.69447464 -0.31187353 -2.04954616  0.56538309</span></span>
<span id="cb318-102"><a href="loop.html#cb318-102" tabindex="-1"></a><span class="do">##  [97]  0.55236386  1.42950364  1.15527183 -0.17463612</span></span></code></pre></div>
<p>In this case, it’s clear that <code>x</code> is a placeholder for each element of the <code>list_vect</code>.</p>
<p>The use of anonymous functions is extremely useful and clear once you understand the notation. However, for more complex functions, it’s often more convenient to save the function in an object and then apply it, as with <code>mean</code>. Using the example of centering a variable:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="loop.html#cb319-1" tabindex="-1"></a>center_vect <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb319-2"><a href="loop.html#cb319-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb319-3"><a href="loop.html#cb319-3" tabindex="-1"></a>}</span>
<span id="cb319-4"><a href="loop.html#cb319-4" tabindex="-1"></a></span>
<span id="cb319-5"><a href="loop.html#cb319-5" tabindex="-1"></a>centered_list <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, center_vect)</span></code></pre></div>
<p>We can also apply complex functions as <strong>anonymous</strong> by using curly braces, just as if we were declaring a function:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="loop.html#cb320-1" tabindex="-1"></a>center_vect <span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb320-2"><a href="loop.html#cb320-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb320-3"><a href="loop.html#cb320-3" tabindex="-1"></a>}</span>
<span id="cb320-4"><a href="loop.html#cb320-4" tabindex="-1"></a></span>
<span id="cb320-5"><a href="loop.html#cb320-5" tabindex="-1"></a>centered_list <span class="ot">=</span> <span class="fu">lapply</span>(list_vect, <span class="cf">function</span>(x){</span>
<span id="cb320-6"><a href="loop.html#cb320-6" tabindex="-1"></a>  res <span class="ot">=</span> x <span class="sc">-</span> <span class="fu">mean</span>(x)</span>
<span id="cb320-7"><a href="loop.html#cb320-7" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb320-8"><a href="loop.html#cb320-8" tabindex="-1"></a>})</span></code></pre></div>
<p>One last point concerns the parallelism between <code>x</code> in our examples and <code>i</code> in the <code>for</code> loops we discussed earlier. Just like <code>i</code>, <code>x</code> is a simple convention, and you can use any name to define the generic argument. Moreover, it’s useful to think of <code>x</code> in the same role as <code>i</code>: in the previous function, <code>x</code> took on the value of each element in <code>list_vect</code> just as the <code>for</code> loop uses the values of the vector we are iterating over. Sometimes, it can be useful to apply an <strong>indexing</strong> principle with the <code>*apply</code> family as well:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="loop.html#cb321-1" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">lapply</span>(<span class="fu">seq_along</span>(list_vect), <span class="cf">function</span>(i) <span class="fu">mean</span>(list_vect[[i]]))</span>
<span id="cb321-2"><a href="loop.html#cb321-2" tabindex="-1"></a>means</span>
<span id="cb321-3"><a href="loop.html#cb321-3" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb321-4"><a href="loop.html#cb321-4" tabindex="-1"></a><span class="do">## [1] -0.1744844</span></span>
<span id="cb321-5"><a href="loop.html#cb321-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb321-6"><a href="loop.html#cb321-6" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb321-7"><a href="loop.html#cb321-7" tabindex="-1"></a><span class="do">## [1] -0.001581971</span></span>
<span id="cb321-8"><a href="loop.html#cb321-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb321-9"><a href="loop.html#cb321-9" tabindex="-1"></a><span class="do">## [[3]]</span></span>
<span id="cb321-10"><a href="loop.html#cb321-10" tabindex="-1"></a><span class="do">## [1] 0.003746107</span></span>
<span id="cb321-11"><a href="loop.html#cb321-11" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb321-12"><a href="loop.html#cb321-12" tabindex="-1"></a><span class="do">## [[4]]</span></span>
<span id="cb321-13"><a href="loop.html#cb321-13" tabindex="-1"></a><span class="do">## [1] -0.1040844</span></span>
<span id="cb321-14"><a href="loop.html#cb321-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb321-15"><a href="loop.html#cb321-15" tabindex="-1"></a><span class="do">## [[5]]</span></span>
<span id="cb321-16"><a href="loop.html#cb321-16" tabindex="-1"></a><span class="do">## [1] 0.2978849</span></span></code></pre></div>
<p>In this case, the argument is no longer the list but a vector of numbers from 1 to the length of the list (just like in a <code>for</code> loop). The anonymous function then takes <code>i</code> as its argument (which, as we know, can be any name) and uses <code>i</code> to index and apply the function. This may not be extremely useful here, but with this syntax, we have reproduced the exact logic of the <code>for</code> loop in a very compact way.</p>
</div>
<div id="apply" class="section level3 hasAnchor" number="14.3.2">
<h3><span class="header-section-number">14.3.2</span> apply<a href="loop.html#apply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>apply</code> function is used on <strong>matrices</strong> and <strong>dataframes</strong> to apply a function to each dimension (row or column). The structure of the function is as follows:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="loop.html#cb322-1" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> , <span class="at">MARGIN =</span> , <span class="at">FUN =</span> , ...)</span></code></pre></div>
<p>Where:</p>
<ul>
<li><code>X</code> is the dataframe or matrix.</li>
<li><code>MARGIN</code> is the dimension on which to apply the function: <code>1</code> = row, <code>2</code> = column.</li>
<li><code>FUN</code> is the function to apply.</li>
</ul>
<div id="examples" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Simple functions:</li>
</ul>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="loop.html#cb323-1" tabindex="-1"></a>my_matrix <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">6</span>)</span>
<span id="cb323-2"><a href="loop.html#cb323-2" tabindex="-1"></a></span>
<span id="cb323-3"><a href="loop.html#cb323-3" tabindex="-1"></a><span class="co"># For rows</span></span>
<span id="cb323-4"><a href="loop.html#cb323-4" tabindex="-1"></a><span class="fu">apply</span>(my_matrix, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> sum)</span>
<span id="cb323-5"><a href="loop.html#cb323-5" tabindex="-1"></a><span class="do">## [1] 66 72 78 84</span></span>
<span id="cb323-6"><a href="loop.html#cb323-6" tabindex="-1"></a></span>
<span id="cb323-7"><a href="loop.html#cb323-7" tabindex="-1"></a><span class="co"># For columns</span></span>
<span id="cb323-8"><a href="loop.html#cb323-8" tabindex="-1"></a><span class="fu">apply</span>(my_matrix, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum)</span>
<span id="cb323-9"><a href="loop.html#cb323-9" tabindex="-1"></a><span class="do">## [1] 10 26 42 58 74 90</span></span></code></pre></div>
<ul>
<li>Complex functions:</li>
</ul>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="loop.html#cb324-1" tabindex="-1"></a><span class="co"># Coefficient of Variation</span></span>
<span id="cb324-2"><a href="loop.html#cb324-2" tabindex="-1"></a><span class="fu">apply</span>(my_matrix, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> </span>
<span id="cb324-3"><a href="loop.html#cb324-3" tabindex="-1"></a>        <span class="cf">function</span>(x){</span>
<span id="cb324-4"><a href="loop.html#cb324-4" tabindex="-1"></a>            mean <span class="ot">=</span> <span class="fu">mean</span>(x)</span>
<span id="cb324-5"><a href="loop.html#cb324-5" tabindex="-1"></a>            sd <span class="ot">=</span> <span class="fu">sd</span>(x)</span>
<span id="cb324-6"><a href="loop.html#cb324-6" tabindex="-1"></a>            <span class="fu">return</span>(<span class="fu">round</span>(sd<span class="sc">/</span>mean,<span class="dv">2</span>))</span>
<span id="cb324-7"><a href="loop.html#cb324-7" tabindex="-1"></a>        }</span>
<span id="cb324-8"><a href="loop.html#cb324-8" tabindex="-1"></a>)</span>
<span id="cb324-9"><a href="loop.html#cb324-9" tabindex="-1"></a><span class="do">## [1] 0.52 0.20 0.12 0.09 0.07 0.06</span></span></code></pre></div>
</div>
</div>
<div id="tapply" class="section level3 hasAnchor" number="14.3.3">
<h3><span class="header-section-number">14.3.3</span> tapply<a href="loop.html#tapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>tapply</code> is useful when you want to apply a function to an element that is <strong>grouped</strong> by another variable. The syntax is as follows:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="loop.html#cb325-1" tabindex="-1"></a><span class="fu">tapply</span>(<span class="at">X =</span> , <span class="at">INDEX =</span> , <span class="at">FUN =</span> , ...)</span></code></pre></div>
<p>Where:</p>
<ul>
<li><code>X</code> is the primary variable.</li>
<li><code>INDEX</code> is the variable by which <code>X</code> is divided.</li>
<li><code>FUN</code> is the function to apply.</li>
</ul>
<div id="examples-1" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="loop.html#cb326-1" tabindex="-1"></a>my_data <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb326-2"><a href="loop.html#cb326-2" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">10</span>), <span class="at">size =</span> <span class="dv">32</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb326-3"><a href="loop.html#cb326-3" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>), <span class="at">each =</span> <span class="dv">16</span>)),</span>
<span id="cb326-4"><a href="loop.html#cb326-4" tabindex="-1"></a>  <span class="at">class =</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;3&quot;</span>, <span class="st">&quot;5&quot;</span>), <span class="at">times =</span> <span class="dv">16</span>))</span>
<span id="cb326-5"><a href="loop.html#cb326-5" tabindex="-1"></a>)</span>
<span id="cb326-6"><a href="loop.html#cb326-6" tabindex="-1"></a></span>
<span id="cb326-7"><a href="loop.html#cb326-7" tabindex="-1"></a><span class="fu">head</span>(my_data, <span class="at">n =</span> <span class="dv">4</span>)</span>
<span id="cb326-8"><a href="loop.html#cb326-8" tabindex="-1"></a><span class="do">##    y gender class</span></span>
<span id="cb326-9"><a href="loop.html#cb326-9" tabindex="-1"></a><span class="do">## 1  8      F     3</span></span>
<span id="cb326-10"><a href="loop.html#cb326-10" tabindex="-1"></a><span class="do">## 2 10      F     5</span></span>
<span id="cb326-11"><a href="loop.html#cb326-11" tabindex="-1"></a><span class="do">## 3  2      F     3</span></span>
<span id="cb326-12"><a href="loop.html#cb326-12" tabindex="-1"></a><span class="do">## 4  4      F     5</span></span>
<span id="cb326-13"><a href="loop.html#cb326-13" tabindex="-1"></a></span>
<span id="cb326-14"><a href="loop.html#cb326-14" tabindex="-1"></a><span class="co"># Mean y by class</span></span>
<span id="cb326-15"><a href="loop.html#cb326-15" tabindex="-1"></a><span class="fu">tapply</span>(my_data<span class="sc">$</span>y, <span class="at">INDEX =</span> my_data<span class="sc">$</span>class, <span class="at">FUN =</span> mean)</span>
<span id="cb326-16"><a href="loop.html#cb326-16" tabindex="-1"></a><span class="do">##     3     5 </span></span>
<span id="cb326-17"><a href="loop.html#cb326-17" tabindex="-1"></a><span class="do">## 5.875 6.625</span></span>
<span id="cb326-18"><a href="loop.html#cb326-18" tabindex="-1"></a></span>
<span id="cb326-19"><a href="loop.html#cb326-19" tabindex="-1"></a><span class="co"># Mean y by class and gender</span></span>
<span id="cb326-20"><a href="loop.html#cb326-20" tabindex="-1"></a><span class="fu">tapply</span>(my_data<span class="sc">$</span>y, <span class="at">INDEX =</span> <span class="fu">list</span>(my_data<span class="sc">$</span>class, my_data<span class="sc">$</span>gender), <span class="at">FUN =</span> mean)</span>
<span id="cb326-21"><a href="loop.html#cb326-21" tabindex="-1"></a><span class="do">##      F    M</span></span>
<span id="cb326-22"><a href="loop.html#cb326-22" tabindex="-1"></a><span class="do">## 3 6.50 5.25</span></span>
<span id="cb326-23"><a href="loop.html#cb326-23" tabindex="-1"></a><span class="do">## 5 5.75 7.50</span></span></code></pre></div>
</div>
</div>
<div id="lapply" class="section level3 hasAnchor" number="14.3.4">
<h3><span class="header-section-number">14.3.4</span> lapply<a href="loop.html#lapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is perhaps the most commonly used and general function. It can be applied to any type of data, whether a list of elements or a vector. The key characteristic is that it always returns a list as the result, regardless of the input type. The syntax is as follows:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="loop.html#cb327-1" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> , <span class="at">FUN =</span> , ...)</span></code></pre></div>
<p>Where:</p>
<ul>
<li><code>X</code> is the vector or list.</li>
<li><code>FUN</code> is the function to apply.</li>
</ul>
<div id="examples-2" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="loop.html#cb328-1" tabindex="-1"></a>my_list <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb328-2"><a href="loop.html#cb328-2" tabindex="-1"></a>  <span class="at">sample_norm =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>),</span>
<span id="cb328-3"><a href="loop.html#cb328-3" tabindex="-1"></a>  <span class="at">sample_unif =</span> <span class="fu">runif</span>(<span class="dv">15</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>),</span>
<span id="cb328-4"><a href="loop.html#cb328-4" tabindex="-1"></a>  <span class="at">sample_pois =</span> <span class="fu">rpois</span>(<span class="dv">20</span>, <span class="at">lambda =</span> <span class="dv">5</span>)</span>
<span id="cb328-5"><a href="loop.html#cb328-5" tabindex="-1"></a>)</span>
<span id="cb328-6"><a href="loop.html#cb328-6" tabindex="-1"></a></span>
<span id="cb328-7"><a href="loop.html#cb328-7" tabindex="-1"></a><span class="fu">str</span>(my_list)</span>
<span id="cb328-8"><a href="loop.html#cb328-8" tabindex="-1"></a><span class="do">## List of 3</span></span>
<span id="cb328-9"><a href="loop.html#cb328-9" tabindex="-1"></a><span class="do">##  $ sample_norm: num [1:10] 0.343 1.371 0.26 0.482 0.309 ...</span></span>
<span id="cb328-10"><a href="loop.html#cb328-10" tabindex="-1"></a><span class="do">##  $ sample_unif: num [1:15] 0.031 0.011 0.882 0.113 0.323 ...</span></span>
<span id="cb328-11"><a href="loop.html#cb328-11" tabindex="-1"></a><span class="do">##  $ sample_pois: int [1:20] 2 3 7 9 5 3 3 5 2 4 ...</span></span>
<span id="cb328-12"><a href="loop.html#cb328-12" tabindex="-1"></a></span>
<span id="cb328-13"><a href="loop.html#cb328-13" tabindex="-1"></a><span class="co"># Mean </span></span>
<span id="cb328-14"><a href="loop.html#cb328-14" tabindex="-1"></a><span class="fu">lapply</span>(my_list, <span class="at">FUN =</span> mean)</span>
<span id="cb328-15"><a href="loop.html#cb328-15" tabindex="-1"></a><span class="do">## $sample_norm</span></span>
<span id="cb328-16"><a href="loop.html#cb328-16" tabindex="-1"></a><span class="do">## [1] 0.5029392</span></span>
<span id="cb328-17"><a href="loop.html#cb328-17" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb328-18"><a href="loop.html#cb328-18" tabindex="-1"></a><span class="do">## $sample_unif</span></span>
<span id="cb328-19"><a href="loop.html#cb328-19" tabindex="-1"></a><span class="do">## [1] 0.3935366</span></span>
<span id="cb328-20"><a href="loop.html#cb328-20" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb328-21"><a href="loop.html#cb328-21" tabindex="-1"></a><span class="do">## $sample_pois</span></span>
<span id="cb328-22"><a href="loop.html#cb328-22" tabindex="-1"></a><span class="do">## [1] 4.25</span></span></code></pre></div>
</div>
</div>
<div id="sapply" class="section level3 hasAnchor" number="14.3.5">
<h3><span class="header-section-number">14.3.5</span> sapply<a href="loop.html#sapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>sapply</code> has the same functionality as <code>lapply</code> but also has the ability to return a simplified version (if possible) of the output.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="loop.html#cb329-1" tabindex="-1"></a><span class="fu">sapply</span>(<span class="at">X =</span> , <span class="at">FUN =</span> , ... )</span></code></pre></div>
<div id="examples-3" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="loop.html#cb330-1" tabindex="-1"></a><span class="co"># Mean  </span></span>
<span id="cb330-2"><a href="loop.html#cb330-2" tabindex="-1"></a><span class="fu">sapply</span>(my_list, <span class="at">FUN =</span> mean)</span>
<span id="cb330-3"><a href="loop.html#cb330-3" tabindex="-1"></a><span class="do">## sample_norm sample_unif sample_pois </span></span>
<span id="cb330-4"><a href="loop.html#cb330-4" tabindex="-1"></a><span class="do">##   0.5029392   0.3935366   4.2500000</span></span></code></pre></div>
<p>To understand the difference, let’s apply both <code>lapply</code> and <code>sapply</code> with the previous examples:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="loop.html#cb331-1" tabindex="-1"></a><span class="fu">sapply</span>(list_vect, mean)</span>
<span id="cb331-2"><a href="loop.html#cb331-2" tabindex="-1"></a><span class="do">##        vect1        vect2        vect3        vect4        vect5 </span></span>
<span id="cb331-3"><a href="loop.html#cb331-3" tabindex="-1"></a><span class="do">## -0.174484405 -0.001581971  0.003746107 -0.104084425  0.297884925</span></span>
<span id="cb331-4"><a href="loop.html#cb331-4" tabindex="-1"></a><span class="fu">lapply</span>(list_vect, mean)</span>
<span id="cb331-5"><a href="loop.html#cb331-5" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb331-6"><a href="loop.html#cb331-6" tabindex="-1"></a><span class="do">## [1] -0.1744844</span></span>
<span id="cb331-7"><a href="loop.html#cb331-7" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-8"><a href="loop.html#cb331-8" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb331-9"><a href="loop.html#cb331-9" tabindex="-1"></a><span class="do">## [1] -0.001581971</span></span>
<span id="cb331-10"><a href="loop.html#cb331-10" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-11"><a href="loop.html#cb331-11" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb331-12"><a href="loop.html#cb331-12" tabindex="-1"></a><span class="do">## [1] 0.003746107</span></span>
<span id="cb331-13"><a href="loop.html#cb331-13" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-14"><a href="loop.html#cb331-14" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb331-15"><a href="loop.html#cb331-15" tabindex="-1"></a><span class="do">## [1] -0.1040844</span></span>
<span id="cb331-16"><a href="loop.html#cb331-16" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-17"><a href="loop.html#cb331-17" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb331-18"><a href="loop.html#cb331-18" tabindex="-1"></a><span class="do">## [1] 0.2978849</span></span>
<span id="cb331-19"><a href="loop.html#cb331-19" tabindex="-1"></a><span class="fu">sapply</span>(list_vect, mean, <span class="at">simplify =</span> <span class="cn">FALSE</span>)</span>
<span id="cb331-20"><a href="loop.html#cb331-20" tabindex="-1"></a><span class="do">## $vect1</span></span>
<span id="cb331-21"><a href="loop.html#cb331-21" tabindex="-1"></a><span class="do">## [1] -0.1744844</span></span>
<span id="cb331-22"><a href="loop.html#cb331-22" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-23"><a href="loop.html#cb331-23" tabindex="-1"></a><span class="do">## $vect2</span></span>
<span id="cb331-24"><a href="loop.html#cb331-24" tabindex="-1"></a><span class="do">## [1] -0.001581971</span></span>
<span id="cb331-25"><a href="loop.html#cb331-25" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-26"><a href="loop.html#cb331-26" tabindex="-1"></a><span class="do">## $vect3</span></span>
<span id="cb331-27"><a href="loop.html#cb331-27" tabindex="-1"></a><span class="do">## [1] 0.003746107</span></span>
<span id="cb331-28"><a href="loop.html#cb331-28" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-29"><a href="loop.html#cb331-29" tabindex="-1"></a><span class="do">## $vect4</span></span>
<span id="cb331-30"><a href="loop.html#cb331-30" tabindex="-1"></a><span class="do">## [1] -0.1040844</span></span>
<span id="cb331-31"><a href="loop.html#cb331-31" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb331-32"><a href="loop.html#cb331-32" tabindex="-1"></a><span class="do">## $vect5</span></span>
<span id="cb331-33"><a href="loop.html#cb331-33" tabindex="-1"></a><span class="do">## [1] 0.2978849</span></span></code></pre></div>
<p>As you can see, the result of these operations corresponds to one value per element of <code>list_vect</code>. <code>lapply</code> returns a list with the results, while <code>sapply</code> returns a vector. In cases like this, where there are single results for each element, <code>sapply</code> is convenient, while keeping the list structure with <code>lapply</code> might be better in other cases. We can also prevent <code>sapply</code> from simplifying the output by using the argument <code>simplify = FALSE</code>.</p>
</div>
</div>
<div id="vapply" class="section level3 hasAnchor" number="14.3.6">
<h3><span class="header-section-number">14.3.6</span> vapply<a href="loop.html#vapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="loop.html#cb332-1" tabindex="-1"></a><span class="fu">vapply</span>(<span class="at">X =</span> , <span class="at">FUN =</span> , <span class="at">FUN.VALUE =</span>  ,... )</span></code></pre></div>
<div id="examples-4" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>vapply</code>is similar to both <code>lapply</code> and <code>sapply</code>. However, it requires the type of output to be specified in advance. For this reason, it’s considered a more <em>robust</em> version of the previous functions because it provides more control over what happens.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="loop.html#cb333-1" tabindex="-1"></a><span class="co"># Mean </span></span>
<span id="cb333-2"><a href="loop.html#cb333-2" tabindex="-1"></a><span class="fu">vapply</span>(my_list, <span class="at">FUN =</span> mean, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="at">length =</span> 1L))</span>
<span id="cb333-3"><a href="loop.html#cb333-3" tabindex="-1"></a><span class="do">## sample_norm sample_unif sample_pois </span></span>
<span id="cb333-4"><a href="loop.html#cb333-4" tabindex="-1"></a><span class="do">##   0.5029392   0.3935366   4.2500000</span></span></code></pre></div>
<p>In this case, as before, we define the list on which to apply the function. However, the argument <code>FUN.VALUE = numeric(length = 1L)</code> specifies that each result must be a <code>numeric</code> value of length 1. Since we are applying the mean, we obtain a single value for each iteration, and that value must be numeric.</p>
<div class="warning" title="sapply() vs vapply()">
<p><code>sapply()</code> does not always return the same type of object, while <code>vapply()</code> requires you to specify the output type for each iteration.</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="loop.html#cb334-1" tabindex="-1"></a>x1 <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb334-2"><a href="loop.html#cb334-2" tabindex="-1"></a>  <span class="at">sample_unif =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="fu">runif</span>(<span class="dv">15</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)),</span>
<span id="cb334-3"><a href="loop.html#cb334-3" tabindex="-1"></a>  <span class="at">sample_norm =</span> <span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>),</span>
<span id="cb334-4"><a href="loop.html#cb334-4" tabindex="-1"></a>  <span class="at">sample_pois =</span> <span class="fu">rpois</span>(<span class="dv">20</span>, <span class="at">lambda =</span> <span class="dv">5</span>)</span>
<span id="cb334-5"><a href="loop.html#cb334-5" tabindex="-1"></a>)</span>
<span id="cb334-6"><a href="loop.html#cb334-6" tabindex="-1"></a>x2 <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb334-7"><a href="loop.html#cb334-7" tabindex="-1"></a>  <span class="at">sample_gamma =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="fu">rgamma</span>(<span class="dv">10</span>, <span class="at">shape =</span> <span class="dv">1</span>)),</span>
<span id="cb334-8"><a href="loop.html#cb334-8" tabindex="-1"></a>  <span class="at">sample_unif =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="fu">runif</span>(<span class="dv">15</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)),</span>
<span id="cb334-9"><a href="loop.html#cb334-9" tabindex="-1"></a>  <span class="at">sample_pois =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="fu">rpois</span>(<span class="dv">20</span>, <span class="at">lambda =</span> <span class="dv">5</span>))</span>
<span id="cb334-10"><a href="loop.html#cb334-10" tabindex="-1"></a>)</span>
<span id="cb334-11"><a href="loop.html#cb334-11" tabindex="-1"></a></span>
<span id="cb334-12"><a href="loop.html#cb334-12" tabindex="-1"></a>negative_values <span class="ot">=</span> <span class="cf">function</span>(x) x[x <span class="sc">&lt;</span> <span class="dv">0</span>]</span>
<span id="cb334-13"><a href="loop.html#cb334-13" tabindex="-1"></a><span class="fu">sapply</span>(x1, negative_values) </span>
<span id="cb334-14"><a href="loop.html#cb334-14" tabindex="-1"></a><span class="do">## $sample_unif</span></span>
<span id="cb334-15"><a href="loop.html#cb334-15" tabindex="-1"></a><span class="do">## [1] -1</span></span>
<span id="cb334-16"><a href="loop.html#cb334-16" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb334-17"><a href="loop.html#cb334-17" tabindex="-1"></a><span class="do">## $sample_norm</span></span>
<span id="cb334-18"><a href="loop.html#cb334-18" tabindex="-1"></a><span class="do">## [1] -0.95907200 -0.08395547</span></span>
<span id="cb334-19"><a href="loop.html#cb334-19" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb334-20"><a href="loop.html#cb334-20" tabindex="-1"></a><span class="do">## $sample_pois</span></span>
<span id="cb334-21"><a href="loop.html#cb334-21" tabindex="-1"></a><span class="do">## integer(0)</span></span>
<span id="cb334-22"><a href="loop.html#cb334-22" tabindex="-1"></a><span class="fu">sapply</span>(x2, negative_values) </span>
<span id="cb334-23"><a href="loop.html#cb334-23" tabindex="-1"></a><span class="do">## sample_gamma  sample_unif  sample_pois </span></span>
<span id="cb334-24"><a href="loop.html#cb334-24" tabindex="-1"></a><span class="do">##           -1           -2           -3</span></span>
<span id="cb334-25"><a href="loop.html#cb334-25" tabindex="-1"></a></span>
<span id="cb334-26"><a href="loop.html#cb334-26" tabindex="-1"></a><span class="fu">vapply</span>(x1, negative_values, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>))</span>
<span id="cb334-27"><a href="loop.html#cb334-27" tabindex="-1"></a><span class="do">## Error in vapply(x1, negative_values, FUN.VALUE = numeric(1)): values must be length 1,</span></span>
<span id="cb334-28"><a href="loop.html#cb334-28" tabindex="-1"></a><span class="do">##  but FUN(X[[2]]) result is length 2</span></span>
<span id="cb334-29"><a href="loop.html#cb334-29" tabindex="-1"></a><span class="fu">vapply</span>(x2, negative_values, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>)) </span>
<span id="cb334-30"><a href="loop.html#cb334-30" tabindex="-1"></a><span class="do">## sample_gamma  sample_unif  sample_pois </span></span>
<span id="cb334-31"><a href="loop.html#cb334-31" tabindex="-1"></a><span class="do">##           -1           -2           -3</span></span></code></pre></div>
</div>
</div>
</div>
<div id="list-of-functions-applied-to-a-list-of-objects" class="section level3 hasAnchor" number="14.3.7">
<h3><span class="header-section-number">14.3.7</span> List of Functions Applied to a List of Objects<a href="loop.html#list-of-functions-applied-to-a-list-of-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Advanced users may employ the <code>*apply</code> family to extend the <em>“apply a function to a list of objects”</em> formula by applying different functions in a highly compact way. Functions in R are objects like any others and can be stored in lists:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="loop.html#cb335-1" tabindex="-1"></a>list_funs <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb335-2"><a href="loop.html#cb335-2" tabindex="-1"></a>  <span class="st">&quot;mean&quot;</span> <span class="ot">=</span> mean,</span>
<span id="cb335-3"><a href="loop.html#cb335-3" tabindex="-1"></a>  <span class="st">&quot;median&quot;</span> <span class="ot">=</span> median,</span>
<span id="cb335-4"><a href="loop.html#cb335-4" tabindex="-1"></a>  <span class="st">&quot;sd&quot;</span> <span class="ot">=</span> sd</span>
<span id="cb335-5"><a href="loop.html#cb335-5" tabindex="-1"></a>)</span>
<span id="cb335-6"><a href="loop.html#cb335-6" tabindex="-1"></a></span>
<span id="cb335-7"><a href="loop.html#cb335-7" tabindex="-1"></a><span class="fu">lapply</span>(list_funs, <span class="at">FUN =</span> <span class="cf">function</span>(f){</span>
<span id="cb335-8"><a href="loop.html#cb335-8" tabindex="-1"></a>                      <span class="fu">sapply</span>(list_vect, <span class="at">FUN =</span> <span class="cf">function</span>(x){ <span class="fu">f</span>(x) })</span>
<span id="cb335-9"><a href="loop.html#cb335-9" tabindex="-1"></a>                  }</span>
<span id="cb335-10"><a href="loop.html#cb335-10" tabindex="-1"></a>)</span>
<span id="cb335-11"><a href="loop.html#cb335-11" tabindex="-1"></a><span class="do">## $mean</span></span>
<span id="cb335-12"><a href="loop.html#cb335-12" tabindex="-1"></a><span class="do">##        vect1        vect2        vect3        vect4        vect5 </span></span>
<span id="cb335-13"><a href="loop.html#cb335-13" tabindex="-1"></a><span class="do">## -0.174484405 -0.001581971  0.003746107 -0.104084425  0.297884925 </span></span>
<span id="cb335-14"><a href="loop.html#cb335-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb335-15"><a href="loop.html#cb335-15" tabindex="-1"></a><span class="do">## $median</span></span>
<span id="cb335-16"><a href="loop.html#cb335-16" tabindex="-1"></a><span class="do">##        vect1        vect2        vect3        vect4        vect5 </span></span>
<span id="cb335-17"><a href="loop.html#cb335-17" tabindex="-1"></a><span class="do">## -0.133687067  0.082444857  0.002455108 -0.008867830  0.209584846 </span></span>
<span id="cb335-18"><a href="loop.html#cb335-18" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb335-19"><a href="loop.html#cb335-19" tabindex="-1"></a><span class="do">## $sd</span></span>
<span id="cb335-20"><a href="loop.html#cb335-20" tabindex="-1"></a><span class="do">##     vect1     vect2     vect3     vect4     vect5 </span></span>
<span id="cb335-21"><a href="loop.html#cb335-21" tabindex="-1"></a><span class="do">## 1.0286259 1.0565268 1.0279756 0.9351077 1.0405497</span></span></code></pre></div>
<p>What we did here is create a list of functions and then write two <code>lapply</code> and <code>sapply</code> calls in a <em>nested</em> way. Just like when writing two nested loops, the same function is applied to all elements, and then the next function is applied. The result is a list where each element contains the results of applying each function. While this kind of writing is less common, it is useful to understand the logic and power of this approach.</p>
<p>:::</p>
</div>
<div id="mapply" class="section level3 hasAnchor" number="14.3.8">
<h3><span class="header-section-number">14.3.8</span> mapply<a href="loop.html#mapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>mapply</code> is the most complex version of the apply functions because it extends the number of lists we want to use to <em>n</em>. The syntax is as follows:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="loop.html#cb336-1" tabindex="-1"></a><span class="fu">mapply</span>(FUN, ...)</span></code></pre></div>
<p>Where:</p>
<ul>
<li><code>FUN</code> is the function to apply.</li>
<li><code>...</code> are the lists of elements to which the function is applied. It’s important that all elements have the same length.</li>
</ul>
<p>Let’s try generating some vectors from a normal distribution using the <code>rnorm()</code> function with different values of sample size, mean, and standard deviation:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="loop.html#cb337-1" tabindex="-1"></a>ns <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb337-2"><a href="loop.html#cb337-2" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb337-3"><a href="loop.html#cb337-3" tabindex="-1"></a>sds <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb337-4"><a href="loop.html#cb337-4" tabindex="-1"></a></span>
<span id="cb337-5"><a href="loop.html#cb337-5" tabindex="-1"></a><span class="fu">mapply</span>(<span class="cf">function</span>(x, y, z) <span class="fu">rnorm</span>(x, y, z), <span class="co"># function</span></span>
<span id="cb337-6"><a href="loop.html#cb337-6" tabindex="-1"></a>       ns, means, sds) <span class="co"># arguments</span></span>
<span id="cb337-7"><a href="loop.html#cb337-7" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb337-8"><a href="loop.html#cb337-8" tabindex="-1"></a><span class="do">##  [1]  6.953099  6.854824  9.080728 11.687548  7.215676  7.706871 11.480102</span></span>
<span id="cb337-9"><a href="loop.html#cb337-9" tabindex="-1"></a><span class="do">##  [8]  7.142393  8.784290 13.292173</span></span>
<span id="cb337-10"><a href="loop.html#cb337-10" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb337-11"><a href="loop.html#cb337-11" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb337-12"><a href="loop.html#cb337-12" tabindex="-1"></a><span class="do">## [1] 21.99553 14.81288 18.84860</span></span>
<span id="cb337-13"><a href="loop.html#cb337-13" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb337-14"><a href="loop.html#cb337-14" tabindex="-1"></a><span class="do">## [[3]]</span></span>
<span id="cb337-15"><a href="loop.html#cb337-15" tabindex="-1"></a><span class="do">## [1] 33.26673 22.67479 26.38153 26.86117 25.80392</span></span></code></pre></div>
<p>The syntax is certainly less clear compared to the previous examples, but the idea is as follows:</p>
<ul>
<li>The <strong>anonymous</strong> function has not just one argument but <em>n</em> arguments.</li>
<li>The arguments are specified in order, so in our example <code>x = ns, y = means, and z = sds</code>.</li>
<li>At each iteration, the <code>rnorm</code> function gets different sample sizes, means, and standard deviations as arguments.</li>
</ul>
</div>
</div>
<div id="replicate" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Replicate<a href="loop.html#replicate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>replicate</code> is a slightly different but extremely useful function. It allows you to repeat a series of operations a specified number of times.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="loop.html#cb338-1" tabindex="-1"></a><span class="fu">replicate</span>(<span class="at">n =</span> , <span class="at">expr =</span> )</span></code></pre></div>
<p>Where:</p>
<ul>
<li><code>n</code> is the number of repetitions.</li>
<li><code>expr</code> is the code to repeat.</li>
</ul>
<div id="examples-5" class="section level4 unnumbered hasAnchor">
<h4>Examples<a href="loop.html#examples-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Simple:</li>
</ul>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="loop.html#cb339-1" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">1000</span>,{</span>
<span id="cb339-2"><a href="loop.html#cb339-2" tabindex="-1"></a>  my_sample <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb339-3"><a href="loop.html#cb339-3" tabindex="-1"></a>  my_mean <span class="ot">=</span> <span class="fu">mean</span>(my_sample)</span>
<span id="cb339-4"><a href="loop.html#cb339-4" tabindex="-1"></a>  </span>
<span id="cb339-5"><a href="loop.html#cb339-5" tabindex="-1"></a>  <span class="fu">return</span>(my_mean)</span>
<span id="cb339-6"><a href="loop.html#cb339-6" tabindex="-1"></a>})</span>
<span id="cb339-7"><a href="loop.html#cb339-7" tabindex="-1"></a></span>
<span id="cb339-8"><a href="loop.html#cb339-8" tabindex="-1"></a><span class="fu">str</span>(sample_info)</span>
<span id="cb339-9"><a href="loop.html#cb339-9" tabindex="-1"></a><span class="do">##  num [1:1000] 0.395 -0.057 0.252 0.225 0.286 ...</span></span></code></pre></div>
<ul>
<li>Complex:</li>
</ul>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="loop.html#cb340-1" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">1000</span>, {</span>
<span id="cb340-2"><a href="loop.html#cb340-2" tabindex="-1"></a>  my_sample <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb340-3"><a href="loop.html#cb340-3" tabindex="-1"></a>  my_mean <span class="ot">=</span> <span class="fu">mean</span>(my_sample)</span>
<span id="cb340-4"><a href="loop.html#cb340-4" tabindex="-1"></a>  my_sd <span class="ot">=</span> <span class="fu">sd</span>(my_sample)</span>
<span id="cb340-5"><a href="loop.html#cb340-5" tabindex="-1"></a>  </span>
<span id="cb340-6"><a href="loop.html#cb340-6" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(<span class="at">mean =</span> my_mean, </span>
<span id="cb340-7"><a href="loop.html#cb340-7" tabindex="-1"></a>                    <span class="at">sd =</span> my_sd))</span>
<span id="cb340-8"><a href="loop.html#cb340-8" tabindex="-1"></a>}, <span class="at">simplify =</span> <span class="cn">FALSE</span>)</span>
<span id="cb340-9"><a href="loop.html#cb340-9" tabindex="-1"></a></span>
<span id="cb340-10"><a href="loop.html#cb340-10" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, sample_info)</span>
<span id="cb340-11"><a href="loop.html#cb340-11" tabindex="-1"></a></span>
<span id="cb340-12"><a href="loop.html#cb340-12" tabindex="-1"></a><span class="fu">str</span>(sample_info)</span>
<span id="cb340-13"><a href="loop.html#cb340-13" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    1000 obs. of  2 variables:</span></span>
<span id="cb340-14"><a href="loop.html#cb340-14" tabindex="-1"></a><span class="do">##  $ mean: num  0.0966 -0.2776 0.1665 0.166 -0.1766 ...</span></span>
<span id="cb340-15"><a href="loop.html#cb340-15" tabindex="-1"></a><span class="do">##  $ sd  : num  1.093 1.059 1.105 1.109 0.954 ...</span></span>
<span id="cb340-16"><a href="loop.html#cb340-16" tabindex="-1"></a><span class="fu">head</span>(sample_info)</span>
<span id="cb340-17"><a href="loop.html#cb340-17" tabindex="-1"></a><span class="do">##          mean        sd</span></span>
<span id="cb340-18"><a href="loop.html#cb340-18" tabindex="-1"></a><span class="do">## 1  0.09660155 1.0926324</span></span>
<span id="cb340-19"><a href="loop.html#cb340-19" tabindex="-1"></a><span class="do">## 2 -0.27757342 1.0591981</span></span>
<span id="cb340-20"><a href="loop.html#cb340-20" tabindex="-1"></a><span class="do">## 3  0.16649003 1.1050091</span></span>
<span id="cb340-21"><a href="loop.html#cb340-21" tabindex="-1"></a><span class="do">## 4  0.16595363 1.1089836</span></span>
<span id="cb340-22"><a href="loop.html#cb340-22" tabindex="-1"></a><span class="do">## 5 -0.17656075 0.9537385</span></span>
<span id="cb340-23"><a href="loop.html#cb340-23" tabindex="-1"></a><span class="do">## 6 -0.18156384 0.9634895</span></span></code></pre></div>
<p>It’s important to emphasize that repetition is the foundation of any iterative structure we’ve seen so far. In fact, the same result (in terms of readability, speed, and versatility) can be obtained indistinguishably with a <code>for</code> loop, <code>lapply</code>, or <code>replicate</code>. Reusing the previous example:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="loop.html#cb341-1" tabindex="-1"></a></span>
<span id="cb341-2"><a href="loop.html#cb341-2" tabindex="-1"></a><span class="do">## replicate</span></span>
<span id="cb341-3"><a href="loop.html#cb341-3" tabindex="-1"></a></span>
<span id="cb341-4"><a href="loop.html#cb341-4" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>) <span class="co"># set seed for reproducibility</span></span>
<span id="cb341-5"><a href="loop.html#cb341-5" tabindex="-1"></a></span>
<span id="cb341-6"><a href="loop.html#cb341-6" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">1000</span>, <span class="at">expr =</span> {</span>
<span id="cb341-7"><a href="loop.html#cb341-7" tabindex="-1"></a>  my_sample <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb341-8"><a href="loop.html#cb341-8" tabindex="-1"></a>  my_mean <span class="ot">=</span> <span class="fu">mean</span>(my_sample)</span>
<span id="cb341-9"><a href="loop.html#cb341-9" tabindex="-1"></a>  <span class="fu">return</span>(my_mean)</span>
<span id="cb341-10"><a href="loop.html#cb341-10" tabindex="-1"></a>} )</span>
<span id="cb341-11"><a href="loop.html#cb341-11" tabindex="-1"></a></span>
<span id="cb341-12"><a href="loop.html#cb341-12" tabindex="-1"></a><span class="fu">str</span>(sample_info)</span>
<span id="cb341-13"><a href="loop.html#cb341-13" tabindex="-1"></a><span class="do">##  num [1:1000] -0.00178 0.11165 -0.1156 -0.15386 0.27293 ...</span></span>
<span id="cb341-14"><a href="loop.html#cb341-14" tabindex="-1"></a></span>
<span id="cb341-15"><a href="loop.html#cb341-15" tabindex="-1"></a><span class="do">## *apply</span></span>
<span id="cb341-16"><a href="loop.html#cb341-16" tabindex="-1"></a></span>
<span id="cb341-17"><a href="loop.html#cb341-17" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>) <span class="co"># set seed for reproducibility</span></span>
<span id="cb341-18"><a href="loop.html#cb341-18" tabindex="-1"></a></span>
<span id="cb341-19"><a href="loop.html#cb341-19" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">sapply</span>(<span class="at">X =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb341-20"><a href="loop.html#cb341-20" tabindex="-1"></a>  my_sample <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb341-21"><a href="loop.html#cb341-21" tabindex="-1"></a>  my_mean <span class="ot">=</span> <span class="fu">mean</span>(my_sample)</span>
<span id="cb341-22"><a href="loop.html#cb341-22" tabindex="-1"></a>})</span>
<span id="cb341-23"><a href="loop.html#cb341-23" tabindex="-1"></a></span>
<span id="cb341-24"><a href="loop.html#cb341-24" tabindex="-1"></a><span class="fu">str</span>(sample_info)</span>
<span id="cb341-25"><a href="loop.html#cb341-25" tabindex="-1"></a><span class="do">##  num [1:1000] -0.00178 0.11165 -0.1156 -0.15386 0.27293 ...</span></span>
<span id="cb341-26"><a href="loop.html#cb341-26" tabindex="-1"></a></span>
<span id="cb341-27"><a href="loop.html#cb341-27" tabindex="-1"></a><span class="do">## for loop</span></span>
<span id="cb341-28"><a href="loop.html#cb341-28" tabindex="-1"></a></span>
<span id="cb341-29"><a href="loop.html#cb341-29" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>) <span class="co"># set seed for reproducibility</span></span>
<span id="cb341-30"><a href="loop.html#cb341-30" tabindex="-1"></a></span>
<span id="cb341-31"><a href="loop.html#cb341-31" tabindex="-1"></a>sample_info <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">1000</span>) <span class="co"># initialize before &#39;for&#39; loop</span></span>
<span id="cb341-32"><a href="loop.html#cb341-32" tabindex="-1"></a></span>
<span id="cb341-33"><a href="loop.html#cb341-33" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>) {</span>
<span id="cb341-34"><a href="loop.html#cb341-34" tabindex="-1"></a>  my_sample <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb341-35"><a href="loop.html#cb341-35" tabindex="-1"></a>  sample_info[i] <span class="ot">=</span> <span class="fu">mean</span>(my_sample)</span>
<span id="cb341-36"><a href="loop.html#cb341-36" tabindex="-1"></a>}</span>
<span id="cb341-37"><a href="loop.html#cb341-37" tabindex="-1"></a></span>
<span id="cb341-38"><a href="loop.html#cb341-38" tabindex="-1"></a><span class="fu">str</span>(sample_info)</span>
<span id="cb341-39"><a href="loop.html#cb341-39" tabindex="-1"></a><span class="do">##  num [1:1000] -0.00178 0.11165 -0.1156 -0.15386 0.27293 ...</span></span></code></pre></div>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="conditionals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="fourth-section.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": true
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Introduction2R.pdf", "Introduction2R.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true,
"toc_float": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
